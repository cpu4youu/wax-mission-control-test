import{s as a,e as de,a as X,Q as Z,V as F,R as w,_ as $,W as xe,aJ as me,h as v,b as C,j as t,aK as ue,aG as pe,aL as le,B as R,k as A,a1 as fe,l as I,O as K,aI as Y}from"./index-f4372181.js";import{B as we}from"./bolt-22e9f948.js";import{u as he}from"./index-58642eda.js";import{a as ge}from"./index.esm-c95ad384.js";import{e as je,a as ye}from"./execute-remove-favorites-land-contract-0c6748b0.js";import{e as be}from"./execute-add-favorites-land-contract copy-7cfd7bda.js";import"./info-builder-f0da06fe.js";const ve=["Rocky Desert","Grassland","Dormant Volcano","Icy Mountains","Rocky Crater","Sandy Desert","Mountains","Icy Desert","Rocky Coastline","Plains","Methane Swampland","Small Island","Dunes","Tree Forest","Geothermal Springs","Active Volcano","Mushroom Forest","Inland River","Grass Coastline","Sandy Coastline"],_e=a("div",{d:"flex",align:"center",justify:"flex-start",direction:"column",w:"100%",maxW:"1190px",padding:"0 10px",">svg":{mr:"auto",mt:"20px",cursor:"pointer"}}),T=a("h3",{d:"flex",mr:"auto",mt:"25px",gap:"10px",w:"100%",fs:"29px",fw:"$bold",ff:"$heading",color:"$white500","@sm":{fs:"18px",flexWrap:"wrap",span:{w:"100%"}}}),Se=a("div",{d:"flex",align:"center",justify:"flex-start",flexWrap:"wrap",gap:"20px",mt:"30px",mb:"30px",w:"100%","@sm":{justify:"center"}}),Le=a("button",{d:"flex",align:"center",justify:"flex-start",direction:"column",variants:{isSelected:{true:{filter:"drop-shadow(0 0 0.75rem rgb(0, 186, 255))"}}}}),$e=a("p",{fs:"18px",fw:"$bold",ff:"$heading",color:"$white500",textTransform:"uppercase",mb:"10px"}),ke=a("img",{w:"75px",h:"75px"}),H=a("div",{d:"flex",align:"flex-start",justify:"center",direction:"column",margin:"auto",w:"100%","@md":{d:"flex",padding:"0 20px",flexWrap:"wrap"},"@sm":{align:"center",padding:"0px"}}),Ce=a("div",{d:"flex",align:"center",justify:"flex-start",flexWrap:"wrap",gap:"5px",mt:"15px",w:"100%",maxW:"900px","@md":{d:"flex",padding:"0 20px",flexWrap:"wrap"},"@sm":{justify:"center",padding:"0px"}}),Re=a("button",{w:"82px",h:"82px",img:{objectFit:"cover",w:"82px",h:"82px"},"&:disabled":{cursor:"not-allowed",opacity:.5,filter:"grayscale(100%)"},variants:{isSelected:{true:{img:{border:"3px solid #00BAFF"}}}}}),W=a("div",{d:"flex",align:"center",justify:"center",gap:"5px",fs:"20px",ff:"$heading",fw:"$bold",color:"$white500",svg:{w:"30px",h:"30px"},"@sm":{}}),Ae=a("button",{d:"flex",align:"center",justify:"center",ml:"auto",svg:{w:"30px",h:"30px"},"@sm":{}}),Ie=a("div",{d:"flex",align:"center",justify:"flex-start",gap:"15px",my:"25px",svg:{w:"30px",h:"30px"},"@sm":{flexWrap:"wrap"}}),J=a("div",{d:"flex",align:"center",justify:"center",gap:"5px",fs:"18px",ff:"$heading",fw:"$medium",color:"$white500",input:{padding:"5px",border:"2px solid $white500",br:"5px",h:"40px",w:"55px",maxW:"150px",fs:"18px",ff:"$heading",fw:"$medium","&.owner":{w:"150px"}},"@sm":{}}),Te=a("button",{d:"flex",align:"center",justify:"center",ml:"auto",svg:{w:"30px",h:"30px"},"@sm":{}});a("p",{maxW:"900px",mr:"auto",fs:"18px",ff:"$body",fw:"$medium",color:"$white500","@sm":{fs:"18px"}});const We=a("div",{d:"flex",align:"center",justify:"flex-start",flexWrap:"wrap",gap:"25px",mt:"15px",w:"100%","@md":{d:"flex",justify:"center",padding:"0 20px"},"@sm":{padding:"0 10px"}}),Ve=a("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",position:"relative",span:{fs:"16px",ff:"$body",color:"$white500"},"@sm":{w:"100%",img:{objectFit:"cover",h:"140px",w:"100%"}}}),Ee=a("div",{d:"flex",align:"flex-start",justify:"flex-start",position:"absolute",fs:"16px",ff:"$heading",fw:"$bold",textShadow:"0px 2px 2px #000",color:"$white500",left:"5px",top:"5px","@sm":{w:"100%"}}),Ge=a("div",{d:"flex",align:"flex-start",justify:"flex-start",gap:"5px",w:"100%",">button":{h:"45px",w:"100%",maxW:"unset",minW:"unset",padding:"0",br:"10px","&:last-child":{w:"60px"},div:{br:"10px",fs:"16px",border:"none"}},"@sm":{w:"100%",">button":{"&:last-child":{w:"100%"}}}}),V=de({"0%":{backgroundPosition:"0% 0%"},"100%":{backgroundPosition:"-135% 0%"}}),Ne=a("div",{d:"flex",w:"50%",h:"50px",mt:"10px",background:"linear-gradient( -90deg, rgba(255,255,255, .05), rgba(255,255,255, 0.07) ,rgba(255,255,255, .05))",br:"10px",backgroundSize:"400% 400%",animation:`${V} 1.2s ease-in-out infinite`,"@sm":{h:"60px",w:"100%"}}),De=a("div",{d:"flex",w:"85%",h:"50px",mt:"10px",background:"linear-gradient( -90deg, rgba(255,255,255, .05), rgba(255,255,255, 0.07) ,rgba(255,255,255, .05))",br:"10px",backgroundSize:"400% 400%",animation:`${V} 1.2s ease-in-out infinite`,"@sm":{h:"120px",w:"100%"}}),Oe=a("div",{d:"flex",w:"240px",h:"220px",background:"linear-gradient( -90deg, rgba(255,255,255, .05), rgba(255,255,255, 0.07) ,rgba(255,255,255, .05))",br:"10px",backgroundSize:"400% 400%",animation:`${V} 1.2s ease-in-out infinite`,"@sm":{w:"100%",h:"240px"}}),ze=o=>X({queryKey:[o,Z.AvailableLands],queryFn:()=>Qe(o),staleTime:1e3*60*60});async function Qe(o){if(!o)return[];try{const{getTemplates:s}=F;return(await s({collection_name:"alien.worlds",schema_name:"land.worlds",match:o,page:1,limit:100,order:"desc"})).map(l=>{const d=l.immutable_data.name.split(" on ");return{...l.immutable_data,planetName:d[1]||"",landName:d[0]||""}})}catch(s){return console.log(s),[]}}const Me=(o,s)=>X({queryKey:[o,Z.AvailableLands,s],queryFn:()=>Ue(o,s),staleTime:1e3*60*60});async function Ue(o,s){var _,l,d,S;if(!o)return[];try{const{getAssets:u}=F;let p={collection_name:"alien.worlds",schema_name:"land.worlds",match:o,page:1,limit:1e3};return s!=null&&s.owner&&(p={collection_name:"alien.worlds",schema_name:"land.worlds",owner:s.owner,match:o,page:1,limit:1e3}),(_=s==null?void 0:s.coordinates)!=null&&_.x&&(p={collection_name:"alien.worlds",schema_name:"land.worlds",owner:s==null?void 0:s.owner,"immutable_data:number.x":s.coordinates.x,match:o.split(" on ")[1],page:1,limit:1e3}),(l=s==null?void 0:s.coordinates)!=null&&l.y&&(p={collection_name:"alien.worlds",schema_name:"land.worlds",owner:s==null?void 0:s.owner,"immutable_data:number.y":s.coordinates.y,match:o.split(" on ")[1],page:1,limit:1e3}),(d=s==null?void 0:s.coordinates)!=null&&d.x&&((S=s==null?void 0:s.coordinates)!=null&&S.y)&&(p={collection_name:"alien.worlds",schema_name:"land.worlds",owner:s==null?void 0:s.owner,"immutable_data:number.x":s.coordinates.x,"immutable_data:number.y":s.coordinates.y,match:o.split(" on ")[1],page:1,limit:1e3}),s!=null&&s.template_whitelist&&(p={collection_name:"alien.worlds",schema_name:"land.worlds",template_whitelist:s==null?void 0:s.template_whitelist.join(","),owner:s.owner,match:o,page:1,limit:1e3}),(await u(p)).map(x=>{const g=x.data.name.split(" on ");return{...x.data,assetId:x.asset_id,owner:x.owner,planetName:g[1]||"",landName:g[0]||""}})}catch(u){return console.log(u),[]}}const qe=w.lazy(()=>$(()=>import("./filter-a04616c3.js"),["assets/filter-a04616c3.js","assets/index-f4372181.js","assets/index-55fec1ff.css"])),Pe=w.lazy(()=>$(()=>import("./search-64a2a627.js"),["assets/search-64a2a627.js","assets/index-f4372181.js","assets/index-55fec1ff.css"])),Be=w.lazy(()=>$(()=>import("./hearth-ab02abdb.js"),["assets/hearth-ab02abdb.js","assets/index-f4372181.js","assets/index-55fec1ff.css"])),Ke=w.lazy(()=>$(()=>import("./hearth-broken-5d5cb8bc.js"),["assets/hearth-broken-5d5cb8bc.js","assets/index-f4372181.js","assets/index-55fec1ff.css"])),tt=()=>{var G,N,D,O,z;const{data:o}=xe(),{data:s,isLoading:_}=me(),l={template_whitelist:(o==null?void 0:o.landName)==="Mountains"?["19546","19530","19510","19496","19478","19463"]:[],owner:"",coordinates:{x:void 0,y:void 0}},[d,S]=v.useState(o==null?void 0:o.planetName),[u,p]=v.useState(o==null?void 0:o.landName),[f,x]=v.useState(!1),[g,ee]=v.useState(!1),[L,j]=v.useState(l),c=C(e=>e.user),y=w.useRef(null),b=w.useRef(null),h=w.useRef(null);function te(){he.setState({selectedPage:"main"})}function se(e){S(e),j(n=>{var i;return{...n,owner:((i=h.current)==null?void 0:i.value)??""}})}function oe(e){var n,i;p(e),j(e==="Mountains"?{template_whitelist:["19546","19530","19510","19496","19478","19463"],owner:((n=h.current)==null?void 0:n.value)??"",coordinates:{x:void 0,y:void 0}}:{template_whitelist:[],owner:((i=h.current)==null?void 0:i.value)??"",coordinates:{x:void 0,y:void 0}})}function ne(){var e,n,i,m,Q,M,U,q,P,B;if(u==="Mountains"){j({template_whitelist:["19546","19530","19510","19496","19478","19463"],owner:((e=h.current)==null?void 0:e.value)??"",coordinates:{x:(n=y.current)!=null&&n.value?Number((i=y.current)==null?void 0:i.value):void 0,y:(m=b.current)!=null&&m.value?Number((Q=b.current)==null?void 0:Q.value):void 0}});return}console.log({selectedLand:u}),j({owner:((M=h.current)==null?void 0:M.value)??"",coordinates:{x:(U=y.current)!=null&&U.value?Number((q=y.current)==null?void 0:q.value):void 0,y:(P=b.current)!=null&&P.value?Number((B=b.current)==null?void 0:B.value):void 0}})}async function ae(e){if(c){x(!0);try{await je(c,e)&&(await A(1e3),await fe(),I.success("Land added to current setup"))}catch(n){console.error(n)}finally{x(!1)}}}async function re(e){if(c){x(!0);try{if(await be(c,e)){await A(1e3);const i=await K(c==null?void 0:c.name);C.setState(m=>({...m,user:m.user?{...m.user,...i}:null})),await Y(),I.success("Current Land added to favorites")}}catch(n){console.error(n)}finally{x(!1)}}}async function ie(e){if(c){x(!0);try{if(await ye(c,e)){await A(1e3);const i=await K(c==null?void 0:c.name);C.setState(m=>({...m,user:m.user?{...m.user,...i}:null})),await Y(),I.success("Land removed from favorites")}}catch(n){console.error(n)}finally{x(!1)}}}const ce=e=>s==null?void 0:s.favoriteLands.some(n=>n.map(({assetId:i})=>i).join(",")===e),{data:k}=ze(d),{data:r,isLoading:E}=Me(`${u} on ${d}`,L);return t.jsxs(_e,{children:[t.jsx(ge,{size:30,color:"#fff",onClick:te}),t.jsx(T,{children:"Planet"}),t.jsx(Se,{children:ue.map(e=>t.jsxs(Le,{onClick:()=>se(e),isSelected:(d==null?void 0:d.toLowerCase())===e,children:[t.jsx($e,{children:e}),t.jsx(ke,{src:`/assets/planets/${e}.png`,alt:e,title:e})]},e))}),t.jsxs(H,{children:[t.jsx(T,{children:"Land Type"}),t.jsx(Ce,{children:ve.map(e=>t.jsx(Re,{onClick:()=>oe(e),disabled:!(k!=null&&k.some(n=>n.landName===e)),isSelected:u===e,children:t.jsx("img",{src:`/assets/lands/${e}.webp`,alt:e,title:e})},e))})]}),t.jsxs(H,{children:[E?t.jsxs(t.Fragment,{children:[t.jsx(Ne,{}),t.jsx(De,{})]}):t.jsxs(t.Fragment,{children:[t.jsxs(T,{children:[r!=null&&r[0]?t.jsxs(t.Fragment,{children:[t.jsx("span",{children:(G=r==null?void 0:r[0])==null?void 0:G.landName}),t.jsxs(W,{children:[t.jsx(pe,{}),(((N=r==null?void 0:r[0])==null?void 0:N.luck)/10).toLocaleString("US-en")]}),t.jsxs(W,{children:[t.jsx(le,{}),(((D=r==null?void 0:r[0])==null?void 0:D.ease)/10).toLocaleString("US-en")]}),t.jsxs(W,{children:[t.jsx(we,{fill:!0,color:"white"}),(((O=r==null?void 0:r[0])==null?void 0:O.delay)/10).toLocaleString("US-en")]})]}):t.jsx("span",{children:"No lands found"}),t.jsx(Ae,{onClick:()=>ee(!g),children:t.jsx(qe,{})})]}),g&&t.jsxs(Ie,{children:[t.jsxs(J,{children:["Coordinates",t.jsx("input",{ref:y,type:"text",defaultValue:L.coordinates.x}),":",t.jsx("input",{ref:b,type:"text",defaultValue:L.coordinates.y})]}),t.jsxs(J,{children:["Owner",t.jsx("input",{ref:h,className:"owner",type:"text",defaultValue:L.owner})]}),t.jsx(Te,{onClick:ne,children:t.jsx(Pe,{})})]})]}),t.jsx(We,{children:E?Array.from({length:8}).map((e,n)=>t.jsx(Oe,{},n)):(z=r==null?void 0:r.sort((e,n)=>e.commission-n.commission))==null?void 0:z.map(e=>t.jsxs(Ve,{children:[t.jsxs(Ee,{children:[e==null?void 0:e.x,":",e==null?void 0:e.y]}),t.jsx("img",{src:`/assets/lands/${e.landName}.webp`,alt:e.landName,title:e.landName}),t.jsxs("span",{children:["Commission: ",(e==null?void 0:e.commission)/100," %"]}),t.jsxs("span",{children:["Owner: ",e==null?void 0:e.owner]}),t.jsxs(Ge,{children:[t.jsx(R,{isLoading:f,disabled:f,onClick:()=>ae(e.assetId),color:"solidBlue",children:"Select"}),ce(e.assetId)?t.jsx(R,{isLoading:f,disabled:f,onClick:()=>ie(e.assetId),children:t.jsx(Ke,{})}):t.jsx(R,{isLoading:f,disabled:f,onClick:()=>re(e.assetId),color:"gradientYellow",children:t.jsx(Be,{})})]})]},e.assetId))})]})]})};export{tt as default};
