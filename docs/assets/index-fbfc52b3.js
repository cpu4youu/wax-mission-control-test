import{s as r,e as ne,j as t,a as H,Q as Y,am as Z,R as h,_ as k,P as re,ax as ae,f as v,b as A,ay as ie,ao as ce,B as I,h as T,a0 as xe,k as V,J as P,aw as U}from"./index-5a7413cc.js";import{B as de}from"./bolt-97f924bd.js";import{u as me}from"./index-0605c08e.js";import{a as ue}from"./index.esm-1e14ce2e.js";import{e as pe,a as le}from"./execute-remove-favorites-land-contract-9ccf1a5d.js";import{e as fe}from"./execute-add-favorites-land-contract copy-b6319c5c.js";import"./info-builder-88d390d7.js";const he=["Rocky Desert","Grassland","Dormant Volcano","Icy Mountains","Rocky Crater","Sandy Desert","Mountains","Icy Desert","Rocky Coastline","Plains","Methane Swampland","Small Island","Dunes","Tree Forest","Geothermal Springs","Active Volcano","Mushroom Forest","Inland River","Grass Coastline","Sandy Coastline"],we=r("div",{d:"flex",align:"center",justify:"flex-start",direction:"column",w:"100%",maxW:"1190px",padding:"0 10px",">svg":{mr:"auto",mt:"20px",cursor:"pointer"}}),W=r("h3",{d:"flex",mr:"auto",mt:"25px",gap:"10px",w:"100%",fs:"29px",fw:"$bold",ff:"$heading",color:"$white500","@sm":{fs:"18px",flexWrap:"wrap",span:{w:"100%"}}}),ge=r("div",{d:"flex",align:"center",justify:"flex-start",flexWrap:"wrap",gap:"20px",mt:"30px",mb:"30px",w:"100%","@sm":{justify:"center"}}),je=r("button",{d:"flex",align:"center",justify:"flex-start",direction:"column",variants:{isSelected:{true:{filter:"drop-shadow(0 0 0.75rem rgb(0, 186, 255))"}}}}),ye=r("p",{fs:"18px",fw:"$bold",ff:"$heading",color:"$white500",textTransform:"uppercase",mb:"10px"}),be=r("img",{w:"75px",h:"75px"}),q=r("div",{d:"flex",align:"flex-start",justify:"center",direction:"column",margin:"auto",w:"100%","@md":{d:"flex",padding:"0 20px",flexWrap:"wrap"},"@sm":{align:"center",padding:"0px"}}),Le=r("div",{d:"flex",align:"center",justify:"flex-start",flexWrap:"wrap",gap:"5px",mt:"15px",w:"100%",maxW:"900px","@md":{d:"flex",padding:"0 20px",flexWrap:"wrap"},"@sm":{justify:"center",padding:"0px"}}),ve=r("button",{w:"82px",h:"82px",img:{objectFit:"cover",w:"82px",h:"82px"},"&:disabled":{cursor:"not-allowed",opacity:.5,filter:"grayscale(100%)"},variants:{isSelected:{true:{img:{border:"3px solid #00BAFF"}}}}}),E=r("div",{d:"flex",align:"center",justify:"center",gap:"5px",fs:"20px",ff:"$heading",fw:"$bold",color:"$white500",svg:{w:"30px",h:"30px"},"@sm":{}}),_e=r("button",{d:"flex",align:"center",justify:"center",ml:"auto",svg:{w:"30px",h:"30px"},"@sm":{}}),Se=r("div",{d:"flex",align:"center",justify:"flex-start",gap:"15px",my:"25px",svg:{w:"30px",h:"30px"},"@sm":{flexWrap:"wrap"}}),B=r("div",{d:"flex",align:"center",justify:"center",gap:"5px",fs:"18px",ff:"$heading",fw:"$medium",color:"$white500",input:{padding:"5px",border:"2px solid $white500",br:"5px",h:"40px",w:"55px",maxW:"150px",fs:"18px",ff:"$heading",fw:"$medium","&.owner":{w:"150px"}},"@sm":{}}),Ce=r("button",{d:"flex",align:"center",justify:"center",ml:"auto",svg:{w:"30px",h:"30px"},"@sm":{}});r("p",{maxW:"900px",mr:"auto",fs:"18px",ff:"$body",fw:"$medium",color:"$white500","@sm":{fs:"18px"}});const $e=r("div",{d:"flex",align:"center",justify:"flex-start",flexWrap:"wrap",gap:"25px",mt:"15px",w:"100%","@md":{d:"flex",justify:"center",padding:"0 20px"},"@sm":{padding:"0 10px"}}),ke=r("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",position:"relative",span:{fs:"16px",ff:"$body",color:"$white500"},"@sm":{w:"100%",img:{objectFit:"cover",h:"140px",w:"100%"}}}),Re=r("div",{d:"flex",align:"flex-start",justify:"flex-start",position:"absolute",fs:"16px",ff:"$heading",fw:"$bold",textShadow:"0px 2px 2px #000",color:"$white500",left:"5px",top:"5px","@sm":{w:"100%"}}),Ae=r("div",{d:"flex",align:"flex-start",justify:"flex-start",gap:"5px",w:"100%",">button":{h:"45px",w:"100%",maxW:"unset",minW:"unset",padding:"0",br:"10px","&:last-child":{w:"60px"},div:{br:"10px",fs:"16px",border:"none"}},"@sm":{w:"100%",">button":{"&:last-child":{w:"100%"}}}}),G=ne({"0%":{backgroundPosition:"0% 0%"},"100%":{backgroundPosition:"-135% 0%"}}),Ie=r("div",{d:"flex",w:"50%",h:"50px",mt:"10px",background:"linear-gradient( -90deg, rgba(255,255,255, .05), rgba(255,255,255, 0.07) ,rgba(255,255,255, .05))",br:"10px",backgroundSize:"400% 400%",animation:`${G} 1.2s ease-in-out infinite`,"@sm":{h:"60px",w:"100%"}}),Te=r("div",{d:"flex",w:"85%",h:"50px",mt:"10px",background:"linear-gradient( -90deg, rgba(255,255,255, .05), rgba(255,255,255, 0.07) ,rgba(255,255,255, .05))",br:"10px",backgroundSize:"400% 400%",animation:`${G} 1.2s ease-in-out infinite`,"@sm":{h:"120px",w:"100%"}}),Ve=r("div",{d:"flex",w:"240px",h:"220px",background:"linear-gradient( -90deg, rgba(255,255,255, .05), rgba(255,255,255, 0.07) ,rgba(255,255,255, .05))",br:"10px",backgroundSize:"400% 400%",animation:`${G} 1.2s ease-in-out infinite`,"@sm":{w:"100%",h:"240px"}}),We=()=>t.jsxs("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{d:"M16.7339 15.1277L14.9875 13.3813C14.8334 13.2272 14.6793 13.1758 14.4739 13.1758C14.2684 13.1758 14.1143 13.2272 13.9602 13.3813L2.7624 24.6305C2.4542 24.9387 2.4542 25.401 2.7624 25.6578L4.50884 27.4042C4.81704 27.7125 5.27933 27.7125 5.53616 27.4042L16.7339 16.2064C16.8881 16.0523 16.9394 15.8982 16.9394 15.6927C16.9394 15.4873 16.8367 15.2818 16.7339 15.1277Z",fill:"white"}),t.jsx("path",{d:"M23.8726 11.326L23.2563 10.6583L23.6158 8.24403C23.6672 8.03859 23.5644 7.78172 23.4104 7.62765L22.4858 6.70303C22.3317 6.54897 22.0748 6.44622 21.8694 6.49759L19.5065 6.85715L18.8388 6.29209C18.5306 6.03528 18.1196 6.03528 17.8628 6.34347L15.7054 8.50084C15.5 8.70634 15.4486 9.0659 15.5514 9.32272L16.065 10.35L16.0136 11.6856C16.0136 11.891 16.065 12.0965 16.2191 12.2506L17.9656 13.997C18.1196 14.1512 18.3251 14.2025 18.5306 14.2025L19.8661 14.1512L20.8934 14.6648C21.1503 14.8189 21.5098 14.7675 21.7153 14.5107L23.8726 12.3533C24.1295 12.0452 24.1295 11.6342 23.8726 11.326Z",fill:"white"}),t.jsx("path",{d:"M27.4697 20.315V16.8221C27.4697 16.7194 27.4183 16.5653 27.367 16.4626L25.9801 13.997C25.8773 13.7915 25.6719 13.6888 25.4665 13.6374C25.261 13.586 25.0042 13.6888 24.85 13.8429L22.8982 15.7948C22.59 16.0516 22.59 16.4626 22.8468 16.7708L26.1856 20.8287L26.2369 20.88C26.4424 21.0855 26.7506 21.1369 27.0074 21.0341C27.2643 20.88 27.4697 20.6232 27.4697 20.315Z",fill:"white"}),t.jsx("path",{d:"M16.5281 4.75192C16.4768 4.54645 16.3741 4.34098 16.1686 4.23825L13.703 2.85137C13.549 2.74863 13.4462 2.69727 13.2921 2.69727H9.7992C9.49102 2.69727 9.2342 2.90273 9.13145 3.15956C9.0287 3.41639 9.08008 3.72459 9.28558 3.93005L9.33695 3.98142L13.3948 7.32023C13.703 7.57704 14.114 7.52567 14.3708 7.26885L16.3227 5.31695C16.4768 5.16285 16.5281 4.95738 16.5281 4.75192Z",fill:"white"})]}),Ee=n=>H({queryKey:[n,Y.AvailableLands],queryFn:()=>Ge(n),staleTime:1e3*60*60});async function Ge(n){if(!n)return[];try{const{getTemplates:s}=Z;return(await s({collection_name:"alien.worlds",schema_name:"land.worlds",match:n,page:1,limit:100,order:"desc"})).map(m=>{const u=m.immutable_data.name.split(" on ");return{...m.immutable_data,planetName:u[1]||"",landName:u[0]||""}})}catch(s){return console.log(s),[]}}const Ne=(n,s)=>H({queryKey:[n,Y.AvailableLands,s],queryFn:()=>Me(n,s),staleTime:1e3*60*60});async function Me(n,s){var _,m,u,p;if(!n)return[];try{const{getAssets:w}=Z;let c={collection_name:"alien.worlds",schema_name:"land.worlds",match:n,page:1,limit:1e3};return s!=null&&s.owner&&(c={collection_name:"alien.worlds",schema_name:"land.worlds",owner:s.owner,match:n,page:1,limit:1e3}),(_=s==null?void 0:s.coordinates)!=null&&_.x&&(c={collection_name:"alien.worlds",schema_name:"land.worlds",owner:s==null?void 0:s.owner,"immutable_data:number.x":s.coordinates.x,match:n.split(" on ")[1],page:1,limit:1e3}),(m=s==null?void 0:s.coordinates)!=null&&m.y&&(c={collection_name:"alien.worlds",schema_name:"land.worlds",owner:s==null?void 0:s.owner,"immutable_data:number.y":s.coordinates.y,match:n.split(" on ")[1],page:1,limit:1e3}),(u=s==null?void 0:s.coordinates)!=null&&u.x&&((p=s==null?void 0:s.coordinates)!=null&&p.y)&&(c={collection_name:"alien.worlds",schema_name:"land.worlds",owner:s==null?void 0:s.owner,"immutable_data:number.x":s.coordinates.x,"immutable_data:number.y":s.coordinates.y,match:n.split(" on ")[1],page:1,limit:1e3}),s!=null&&s.template_whitelist&&(c={collection_name:"alien.worlds",schema_name:"land.worlds",template_whitelist:s==null?void 0:s.template_whitelist.join(","),owner:s.owner,match:n,page:1,limit:1e3}),(await w(c)).map(f=>{const S=f.data.name.split(" on ");return{...f.data,assetId:f.asset_id,owner:f.owner,planetName:S[1]||"",landName:S[0]||""}})}catch(w){return console.log(w),[]}}const De=h.lazy(()=>k(()=>import("./filter-ec4a2f0e.js"),["assets/filter-ec4a2f0e.js","assets/index-5a7413cc.js","assets/index-55fec1ff.css"])),Oe=h.lazy(()=>k(()=>import("./search-823f65e0.js"),["assets/search-823f65e0.js","assets/index-5a7413cc.js","assets/index-55fec1ff.css"])),ze=h.lazy(()=>k(()=>import("./hearth-df722a29.js"),["assets/hearth-df722a29.js","assets/index-5a7413cc.js","assets/index-55fec1ff.css"])),Qe=h.lazy(()=>k(()=>import("./hearth-broken-7381c6fb.js"),["assets/hearth-broken-7381c6fb.js","assets/index-5a7413cc.js","assets/index-55fec1ff.css"])),Pe={owner:"",coordinates:{x:void 0,y:void 0}},Je=()=>{var M,D,O,z,Q;const{data:n}=re(),{data:s,isLoading:_}=ae(),[m,u]=v.useState(n==null?void 0:n.planetName),[p,w]=v.useState(n==null?void 0:n.landName),[c,l]=v.useState(!1),[f,S]=v.useState(!1),[C,$]=v.useState(Pe),{data:R}=Ee(m),{data:a,isLoading:N}=Ne(`${p} on ${m}`,C),d=A(e=>e.user),g=h.useRef(null),j=h.useRef(null),y=h.useRef(null);function K(){me.setState({selectedPage:"main"})}function J(e){u(e),$(o=>{var i;return{...o,owner:((i=y.current)==null?void 0:i.value)??""}})}function X(e){if(w(e),e==="Mountains"){$(o=>{var i;return{...o,template_whitelist:["19546","19530","19510","19496","19478","19463"],owner:((i=y.current)==null?void 0:i.value)??"",coordinates:{x:void 0,y:void 0}}});return}}function F(){if(p==="Mountains"){$(e=>{var o,i,x,b,L;return{...e,template_whitelist:["19546","19530","19510","19496","19478","19463"],owner:((o=y.current)==null?void 0:o.value)??"",coordinates:{x:(i=g.current)!=null&&i.value?Number((x=g.current)==null?void 0:x.value):void 0,y:(b=j.current)!=null&&b.value?Number((L=j.current)==null?void 0:L.value):void 0}}});return}console.log({selectedLand:p}),$(e=>{var o,i,x,b,L;return{...e,owner:((o=y.current)==null?void 0:o.value)??"",coordinates:{x:(i=g.current)!=null&&i.value?Number((x=g.current)==null?void 0:x.value):void 0,y:(b=j.current)!=null&&b.value?Number((L=j.current)==null?void 0:L.value):void 0}}})}async function ee(e){if(d){l(!0);try{await pe(d,e)&&(await T(1e3),await xe(),V.success("Land added to current setup"))}catch(o){console.error(o)}finally{l(!1)}}}async function te(e){if(d){l(!0);try{if(await fe(d,e)){await T(1e3);const i=await P(d==null?void 0:d.name);A.setState(x=>({...x,user:x.user?{...x.user,...i}:null})),await U(),V.success("Current Land added to favorites")}}catch(o){console.error(o)}finally{l(!1)}}}async function se(e){if(d){l(!0);try{if(await le(d,e)){await T(1e3);const i=await P(d==null?void 0:d.name);A.setState(x=>({...x,user:x.user?{...x.user,...i}:null})),await U(),V.success("Land removed from favorites")}}catch(o){console.error(o)}finally{l(!1)}}}const oe=e=>s==null?void 0:s.favoriteLands.some(o=>o.map(({assetId:i})=>i).join(",")===e);return t.jsxs(we,{children:[t.jsx(ue,{size:30,color:"#fff",onClick:K}),t.jsx(W,{children:"Planet"}),t.jsx(ge,{children:ie.map(e=>t.jsxs(je,{onClick:()=>J(e),isSelected:(m==null?void 0:m.toLowerCase())===e,children:[t.jsx(ye,{children:e}),t.jsx(be,{src:`/assets/planets/${e}.png`,alt:e,title:e})]},e))}),t.jsxs(q,{children:[t.jsx(W,{children:"Land Type"}),t.jsx(Le,{children:he.map(e=>t.jsx(ve,{onClick:()=>X(e),disabled:!(R!=null&&R.some(o=>o.landName===e)),isSelected:p===e,children:t.jsx("img",{src:`/assets/lands/${e}.webp`,alt:e,title:e})},e))})]}),t.jsxs(q,{children:[N?t.jsxs(t.Fragment,{children:[t.jsx(Ie,{}),t.jsx(Te,{})]}):t.jsxs(t.Fragment,{children:[t.jsxs(W,{children:[a!=null&&a[0]?t.jsxs(t.Fragment,{children:[t.jsx("span",{children:(M=a==null?void 0:a[0])==null?void 0:M.landName}),t.jsxs(E,{children:[t.jsx(ce,{}),(((D=a==null?void 0:a[0])==null?void 0:D.luck)/10).toLocaleString("US-en")]}),t.jsxs(E,{children:[t.jsx(We,{}),(((O=a==null?void 0:a[0])==null?void 0:O.ease)/10).toLocaleString("US-en")]}),t.jsxs(E,{children:[t.jsx(de,{fill:!0,color:"white"}),(((z=a==null?void 0:a[0])==null?void 0:z.delay)/10).toLocaleString("US-en")]})]}):t.jsx("span",{children:"No lands found"}),t.jsx(_e,{onClick:()=>S(!f),children:t.jsx(De,{})})]}),f&&t.jsxs(Se,{children:[t.jsxs(B,{children:["Coordinates",t.jsx("input",{ref:g,type:"text",defaultValue:C.coordinates.x}),":",t.jsx("input",{ref:j,type:"text",defaultValue:C.coordinates.y})]}),t.jsxs(B,{children:["Owner",t.jsx("input",{ref:y,className:"owner",type:"text",defaultValue:C.owner})]}),t.jsx(Ce,{onClick:F,children:t.jsx(Oe,{})})]})]}),t.jsx($e,{children:N?Array.from({length:8}).map((e,o)=>t.jsx(Ve,{},o)):(Q=a==null?void 0:a.sort((e,o)=>e.commission-o.commission))==null?void 0:Q.map(e=>t.jsxs(ke,{children:[t.jsxs(Re,{children:[e==null?void 0:e.x,":",e==null?void 0:e.y]}),t.jsx("img",{src:`/assets/lands/${e.landName}.webp`,alt:e.landName,title:e.landName}),t.jsxs("span",{children:["Commission: ",(e==null?void 0:e.commission)/100," %"]}),t.jsxs("span",{children:["Owner: ",e==null?void 0:e.owner]}),t.jsxs(Ae,{children:[t.jsx(I,{isLoading:c,disabled:c,onClick:()=>ee(e.assetId),color:"solidBlue",children:"Select"}),oe(e.assetId)?t.jsx(I,{isLoading:c,disabled:c,onClick:()=>se(e.assetId),children:t.jsx(Qe,{})}):t.jsx(I,{isLoading:c,disabled:c,onClick:()=>te(e.assetId),color:"gradientYellow",children:t.jsx(ze,{})})]})]},e.assetId))})]})]})};export{Je as default};
