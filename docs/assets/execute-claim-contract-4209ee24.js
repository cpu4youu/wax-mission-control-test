import{S as r}from"./index-8e02403b.js";import{u as i,g as u}from"./showTlmValueFromMine-2b6e6249.js";import{s as m}from"./sleep-da79c358.js";import{u as f}from"./use-transaction-5fbdb395.js";async function l(a){const{executeTransaction:n}=f(),t=i.getState().nonce;if(!(t!=null&&t.rand_str))return await u(),!1;const e=t.rand_str,c=await d(a,e);if(!await n(c))return!1;await m(500);const o=i.getState().updateNonce;return o(void 0),!0}async function d(a,n){return{actions:[{account:"cpu.mc",name:"paycpu",authorization:[{actor:a.name,permission:a.authorization.permission}],data:{wallet:a.name,type:0}},{account:r.M__FEDERATION,name:"mine",authorization:[{actor:a.name,permission:"active"}],data:{miner:a.name,nonce:n,notify:"notify.mc"}}]}}async function g(a,n){if(!n)return l(a);const{executeTransaction:t}=f(),e=i.getState().nonce;if(!(e!=null&&e.rand_str))return await u(),!1;const c=e.rand_str,s=await _(a,c,n),o=await t(s);if(!o)return!1;await m(500);const p=i.getState().updateNonce;return p(void 0),!!o}async function _(a,n,t){return{max_net_usage_words:5e3,actions:[{account:"cpu.mc",name:"paycpu",authorization:[{actor:a.name,permission:"active"}],data:{wallet:a.name,type:1}},{account:r.M__FEDERATION,name:"setland",authorization:[{actor:a.name,permission:"active"}],data:{account:a.name,land_id:t}},{account:r.M__FEDERATION,name:"mine",authorization:[{actor:a.name,permission:"active"}],data:{miner:a.name,nonce:n,notify:"notify.mc"}}]}}export{l as a,g as e};
