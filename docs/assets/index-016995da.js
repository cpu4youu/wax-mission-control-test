import{s as f,u as fe,a as Ae,b as I,j as i,f as le,q as ge,Q as ue,e as Ce,R as h,_ as y,c as Ve,r as S,B as ke,L as he,d as $e}from"./index-adc1ff3a.js";import{R as Le}from"./index.esm-a4ce4a8a.js";import{F as Ie}from"./index.esm-a6847b0c.js";import{o as Y,u as Oe}from"./user-miners-query-b3ab0e22.js";import{r as de,o as ye,u as ze}from"./tools-query-76a20a7c.js";import{o as be,u as Pe}from"./lands-query-a3b988af.js";import{o as Be,u as Fe}from"./lands-query-0e5fa63c.js";import{g as we,s as q,u as D}from"./showTlmValueFromMine-0577e0d0.js";import{o as Ge,u as Ne}from"./get-user-settings-assets-query-6911c671.js";import{u as _e}from"./use-media-c151069d.js";import{o as Qe,u as qe}from"./wallets-query-b276a7ba.js";import{o as Ke,g as Ue,u as He}from"./tool-query-6c03fcf6.js";import{f as Ye,o as Ze,g as We,e as Xe,u as Je}from"./execute-mine-tool-contract-52af3383.js";import{f as et}from"./format-currency-usd-c3f487ff.js";import{f as z}from"./formatNumber-be910684.js";import{d as A,c as Z,a as L}from"./mineCooldown-949e0c2a.js";import{u as tt}from"./use-wharfkit-9179b2b2.js";import{c as P,a as B}from"./calculateShardsByLand-a2bf5420.js";import{s as $}from"./sleep-da79c358.js";import{e as nt,a as je}from"./execute-claim-contract-ef315504.js";import{o as at}from"./toolov-query-a254daf6.js";import{o as it}from"./miner-claim-da145a6f.js";import{u as pe}from"./index-492928cf.js";import{v as ot}from"./v4-4a60fe23.js";import"./iconBase-85fcc813.js";import"./adapters-dce73fe2.js";import"./axios-45629df5.js";import"./toast-options-a7956e66.js";import"./lands-84e963ec.js";import"./use-transaction-f145f4c1.js";import"./index-a1f3306a.js";import"./index-e8771ad4.js";const rt=f("div",{d:"flex",align:"center",justify:"center",direction:"column",my:"auto","@sm":{ml:"auto",my:"auto"}}),ct=f("div",{d:"flex",align:"center",justify:"center",direction:"column",cursor:"pointer",mr:"auto",position:"relative"}),st=f("img",{w:"100%",h:"60px",mb:"10px",objectFit:"contain","@sm":{w:"80px",h:"80px"}}),lt=f("div",{d:"flex",align:"center",justify:"center",zIndex:3,position:"absolute",bottom:"-10px",left:"0px",w:"30px",h:"30px",br:"10px","-webkit-text-stroke":"1px white",letterSpacing:"1px",color:"#00D1FF",fw:"900",fs:"20px",ff:"$heading",border:"2px solid white",background:"#D9D9D9",backdropFilter:"blur(15px)"}),dt=f("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",w:"100%","@sm":{d:"none"}}),pt=f("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",mb:"10px",minW:"200px",w:"100%"}),mt=f("div",{d:"flex",align:"center",justify:"center",position:"relative",boxShadow:"2px 2px 10px #000000",w:"100%",h:"10px",br:"3px",bg:"#595959"}),xt=f("div",{d:"flex",align:"center",justify:"center",position:"absolute",left:"0px",maxW:"200px",h:"10px",br:"3px",bg:"linear-gradient(90deg, #07A3DD 0%, rgba(0, 186, 255, 0.5) 100%)","&::after":{content:"",position:"absolute",right:"-2px",h:"14px",w:"7px",br:"50%",bg:"$white500",filter:"blur(2px)"}}),ft=f("div",{d:"flex",align:"center",justify:"center",direction:"column",ff:"$heading",fw:"$thin",fs:"12px",color:"$white500","@md":{ml:"auto",fs:"10px"}}),gt=f("div",{d:"flex",align:"center",justify:"space-between",w:"100%","@md":{fs:"12px"}}),ut=f("button",{d:"flex",align:"center",justify:"center",ff:"$body",fs:"14px",fw:"$normal",color:"$red500",cursor:"pointer","&:hover":{textShadow:"1px 1px 2px red"},"@md":{fs:"12px"}}),ht=()=>{const n=fe(),{data:e}=Ae(),t=I(m=>m.user),{unAuthorize:a}=tt(),{isSmall:s}=_e(),c=e==null?void 0:e.find(m=>m.level===(t==null?void 0:t.level)),l=((t==null?void 0:t.experience)??0)/((c==null?void 0:c.xp_to_level_up)??100)*100;return i.jsxs(rt,{children:[i.jsx(ct,{onClick:()=>n(s?"/user-settings":"/menu"),children:i.jsx(st,{src:"/assets/icons/logo.webp",alt:"avatar icon"})}),i.jsxs(dt,{children:[i.jsxs(pt,{children:[i.jsx(lt,{children:(t==null?void 0:t.level)??1}),i.jsx(mt,{children:i.jsx(xt,{style:{width:`${l}%`}})})]}),i.jsxs(gt,{children:[!s&&i.jsx(ut,{onClick:a,children:"Logout"}),i.jsxs(ft,{children:[(t==null?void 0:t.experience)??0,"/",(c==null?void 0:c.xp_to_level_up)??100," ",!s&&"XP"]})]})]})]})},me=async({mTools:n,miners:e,setExpireDate:t,setIsLoading:a,toolsLoaning:s,toolsWallets:c,updateIsCalculating:l,user:m,updateAuth:o})=>{if(!m)return null;a(!0),l(!0);try{if(!await nt(m))throw new Error("MINE error from contract");await q(m==null?void 0:m.name)}catch(g){console.log(g)}finally{await $(800),l(!1),await O({miners:e,mTools:n,setExpireDate:t,toolsLoaning:s,toolsWallets:c,user:m}),a(!1)}},yt=async({setIsLoading:n,updateIsCalculating:e,user:t,miners:a,nonce:s,updateHashExpire:c,mTools:l,setExpireDate:m,toolsLoaning:o,toolsWallets:g})=>{var b;n(!0);try{await be(),e(!0),await $(500);const[[u,r]]=ge.getQueriesData(ue.LANDS),d=(b=r.highestValue)==null?void 0:b.asset_id;if(!t||!d)return null;if(!(s!=null&&s.rand_str)){await we();const w=new Date;c(w.setMinutes(w.getMinutes()+1))}await je(t,d)&&(await q(t==null?void 0:t.name),await O({miners:a,mTools:l,setExpireDate:m,toolsLoaning:o,toolsWallets:g,user:t}))}catch(u){console.log(u)}finally{e(!1),n(!1)}},N=({delay:n,tools:e,miners:t,setExpireDate:a})=>{var m,o,g,b,u,r,d,p,w;const s=(n??0)/10;if(((m=e==null?void 0:e.userTools)==null?void 0:m.length)===1){const _=s*(((g=(o=e==null?void 0:e.userTools)==null?void 0:o[0])==null?void 0:g.delay)??0);return A(_,e,t,a)}const c=(b=e==null?void 0:e.userTools)==null?void 0:b.sort((_,T)=>T.delay-_.delay);if(((u=e==null?void 0:e.userTools)==null?void 0:u.length)===2){const _=s*((((r=c==null?void 0:c[0])==null?void 0:r.delay)??0)+(((d=c==null?void 0:c[1])==null?void 0:d.delay)??0)/2);return A(_,e,t,a)}const l=s*((((p=c==null?void 0:c[0])==null?void 0:p.delay)??0)+(((w=c==null?void 0:c[1])==null?void 0:w.delay)??0));return A(l,e,t,a)},Q=({landsType:n,favorites:e,user:t,tools:a,miners:s,setExpireDate:c})=>{var b,u;if(!n||!(e!=null&&e.favoriteLands))return null;let l=[];const m=e==null?void 0:e.favoriteLands.filter(([r])=>Z(L(N({delay:r.delay,miners:s,setExpireDate:c,tools:a})))==="MINE");if(m.length>0)l=m;else{const r=Math.min(...e.favoriteLands.map(([p])=>L(N({delay:p.delay,miners:s,setExpireDate:c,tools:a})).difference));l=e.favoriteLands.filter(([p])=>L(N({delay:p.delay,miners:s,setExpireDate:c,tools:a})).difference===r)}if((t==null?void 0:t.miningType)==="orange"){const r=Math.max(...l.map(([p])=>P({land:p})));return{...(b=l.filter(([p])=>P({land:p})===r).flatMap(([p])=>p).sort((p,w)=>B({landCardId:w.cardid,landsType:n,userTools:a==null?void 0:a.userTools})-B({landCardId:p.cardid,landsType:n,userTools:a==null?void 0:a.userTools})))==null?void 0:b[0]}}const o=Math.max(...l.map(([r])=>B({landCardId:r.cardid,landsType:n,userTools:a==null?void 0:a.userTools})));return{...(u=l.filter(([r])=>B({landCardId:r.cardid,landsType:n,userTools:a==null?void 0:a.userTools})===o).sort(([r],[d])=>P({land:d})-P({land:r})).flatMap(([r])=>r))==null?void 0:u[0]}},bt=async({setIsLoading:n,user:e,updateIsCalculating:t,miners:a,mTools:s,toolsLoaning:c,toolsWallets:l,setExpireDate:m,favorites:o,landsType:g,tools:b})=>{n(!0);try{t(!0),await $(500);const u=Q({favorites:o,landsType:g,tools:b,user:e,miners:a,setExpireDate:m});if(!e)return null;await je(e,u==null?void 0:u.assetId)&&(await q(e==null?void 0:e.name),await O({miners:a,mTools:s,toolsLoaning:c,toolsWallets:l,setExpireDate:m,user:e}))}catch(u){console.log(u)}finally{t(!1),n(!1)}},W=async()=>{await Ke(),await Y(),await Qe(),await it(),await at(),await Ze()},X=({toolsLoaning:n,user:e,mTools:t,toolsWallets:a,miners:s,setExpireDate:c})=>{if(!n||!t)return null;const l=n==null?void 0:n.toolsOv.filter(r=>{var p;const d=r.owned>0&&(r.tool_name==="Certified Kol Digger"?!0:r.allowed===1)&&Ye((e==null?void 0:e.total_points)??0,r);return((a==null?void 0:a.tempid_allow_list.length)??0)===0?d:d&&((p=a==null?void 0:a.tempid_allow_list)==null?void 0:p.some(w=>w===r.template_id))}).map(r=>{if(r.tool_name==="Certified Kol Digger"){const p=t==null?void 0:t.reduce((w,_)=>{const T=Number(new Date(w.readyat));return Number(new Date(_.readyat))<T?_:w},t[0]);return{...p,last_use:+new Date(`${p.readyat}.000Z`)/1e3-p.cooldown_seconds}}const d=n.stakedTools.find(p=>p.template_id===r.template_id);return{...r,...d,last_use:+new Date(`${r.readyat}.000Z`)/1e3-r.cooldown_seconds}}),m=l==null?void 0:l.filter(r=>{const d=(r.tool_name==="Certified Kol Digger"?500:r.cooldown_seconds)*1.6;return Z(L(A(d,{userTools:[r],allData:[]},s)))==="MINE"});let o=null;m.length>0?o=m.sort((r,d)=>de[r.rarity]-de[d.rarity]||d.mining_power-r.mining_power)[0]:o=l==null?void 0:l.reduce((r,d)=>{const p=(r.tool_name==="Certified Kol Digger"?500:r.cooldown_seconds)*1.6,_=+A(p,{userTools:[r],allData:[]},s),T=(d.tool_name==="Certified Kol Digger"?500:d.cooldown_seconds)*1.6,E=+A(T,{userTools:[d],allData:[]},s);return E<_?{...d,cooldownSec:E}:{...r,cooldownSec:_}},l[0]);const g=(o.tool_name==="Certified Kol Digger"?500:o.cooldown_seconds)*1.5,u=A(g,{userTools:[o],allData:[]},s);return c(u),o},wt=async({setIsLoading:n,user:e,updateIsCalculating:t,mTools:a,tools:s,updateMineButtonLoading:c,miners:l,toolsLoaning:m,setExpireDate:o,toolsWallets:g})=>{var b,u;n(!0);try{const r=X({miners:l,toolsLoaning:m,mTools:a,setExpireDate:o,toolsWallets:g,user:e});if(!r||!e||!a)return;await be(),t(!0),await $(500);let d=0,p,w=[];if(r.tool_name==="Certified Kol Digger"){const T=a==null?void 0:a.reduce((v,E)=>{const K=Number(new Date(v.readyat));return Number(new Date(E.readyat))<K?E:v},a[0]);d=T.asset_ids.length*r.pow,w=T.asset_ids.map(v=>Number(v)),p="1099512958237"}else{const[T]=await Ue(`${r.template_id}`);d=T.pow,w=[T.next_asset_id];let v;try{[[,v]]=ge.getQueriesData([ue.LANDS,"red",r])}catch{v=await We(r)}p=(b=v.highestValue)==null?void 0:b.asset_id}await Xe({user:e,difficulty:d,assets_ids:w,land_asset_id:p,old_bag_assets_ids:((u=s==null?void 0:s.userTools)==null?void 0:u.map(T=>Number(T.asset_id)))??[]})&&(await q(e==null?void 0:e.name),await W())}catch(r){console.log(r)}finally{c(!1),t(!1),n(!1)}},O=async({user:n,mTools:e,toolsLoaning:t,toolsWallets:a,miners:s,setExpireDate:c})=>{if(await Y(),await ye(),(n==null?void 0:n.miningType)==="red"){await W(),await $(500),X({miners:s,toolsLoaning:t,mTools:e,setExpireDate:c,toolsWallets:a,user:n});return}},H=({toolCooldown:n,updateMineCooldown:e})=>{const t=Z(n);return e(t),t},_t=async()=>{await ye(),await Be(),await Y(),await Ge()},jt=async({isSmall:n})=>{const e=new Audio("https://play.alienworlds.io/sounds/aw-mining-claim-sfx-02.mp3");n&&await $(1e3),e.play()},Tt=({isDisableToMine:n,nonce:e,toolCooldown:t,updateMineCooldown:a})=>n?i.jsx("span",{style:{fontSize:"15px"},children:"Membership"}):e!=null&&e.rand_str&&H({toolCooldown:t,updateMineCooldown:a})==="MINE"?"Submit":H({toolCooldown:t,updateMineCooldown:a}),vt=({isDisableToMine:n,user:e,toolsWallets:t})=>{var a;return n?"Not a Member":(e==null?void 0:e.miningType)==="green"?"Favorites (shards)":(e==null?void 0:e.miningType)==="orange"?"Favorites (TLM)":(e==null?void 0:e.miningType)==="gold"?"Mining":(e==null?void 0:e.miningType)==="blue"?"Mine Maximizer":(e==null?void 0:e.miningType)==="red"?`Deposit: ${le(t==null?void 0:t.deposit).toFixed(4)} TLM`:`Deposit: ${(le((a=e==null?void 0:e.HqMember)==null?void 0:a.deposit)+((e==null?void 0:e.tlm_deposit)??0)/1e4).toFixed(4)} TLM`},St=({isDisableToMine:n,user:e,miners:t,bestLand:a})=>n?"Become a member to use mine":(e==null?void 0:e.miningType)==="red"?"Tool Loaning":(e==null?void 0:e.miningType)==="gold"||(e==null?void 0:e.miningType)==="blue"?`${t!=null&&t.name?t==null?void 0:t.name:""}`:`${a!=null&&a.name?a==null?void 0:a.name:""}`,Mt=async({isDisableToMine:n,user:e,navigate:t,isCalculating:a,nonce:s,updateIsCalculating:c,updateHashExpire:l,mTools:m,miners:o,setExpireDate:g,setIsLoading:b,tools:u,toolsLoaning:r,toolsWallets:d,updateMineButtonLoading:p,favorites:w,landsType:_,updateAuth:T})=>{if(console.log(`buttonOnClick: ${n}`),n)return t("/membership");if((e==null?void 0:e.miningType)==="red")return await W(),wt({miners:o,mTools:m,setExpireDate:g,setIsLoading:b,tools:u,toolsLoaning:r,toolsWallets:d,updateIsCalculating:c,updateMineButtonLoading:p,user:e}),null;if(!(s!=null&&s.rand_str)&&!a){c(!0),((e==null?void 0:e.miningType)==="green"||(e==null?void 0:e.miningType)==="orange")&&await _t(),await we();const v=new Date;return l(v.setMinutes(v.getMinutes()+1)),null}return(e==null?void 0:e.miningType)==="blue"?(yt({miners:o,mTools:m,nonce:s,setExpireDate:g,setIsLoading:b,toolsLoaning:r,toolsWallets:d,updateIsCalculating:c,user:e,updateHashExpire:l}),null):(e==null?void 0:e.miningType)==="gold"?(me({miners:o,mTools:m,setExpireDate:g,setIsLoading:b,toolsLoaning:r,toolsWallets:d,updateAuth:T,updateIsCalculating:c,user:e}),null):(e==null?void 0:e.miningType)==="green"||(e==null?void 0:e.miningType)==="orange"?(bt({miners:o,mTools:m,setExpireDate:g,setIsLoading:b,toolsLoaning:r,toolsWallets:d,updateIsCalculating:c,user:e,favorites:w,landsType:_,tools:u}),null):me({miners:o,mTools:m,setExpireDate:g,setIsLoading:b,toolsLoaning:r,toolsWallets:d,updateAuth:T,updateIsCalculating:c,user:e})},Dt=({isCalculating:n,isLoading:e,minersLoading:t,toolLoading:a,toolCooldown:s,toolCooldownEqual0:c,isLoadingLand:l,isMineButtonLoading:m,userMiningTypeRed:o})=>n||e||t||a||!s||c||l||m||o,Et=({user:n,setBestLand:e,favorites:t,landsType:a,tools:s,setExpireDate:c,miners:l})=>(n==null?void 0:n.miningType)==="gold"?"gradientYellow":(n==null?void 0:n.miningType)==="orange"?(e(Q({favorites:t,landsType:a,tools:s,user:n,setExpireDate:c,miners:l})),"gradientOrange"):(n==null?void 0:n.miningType)==="green"?(e(Q({favorites:t,landsType:a,tools:s,user:n,setExpireDate:c,miners:l})),"gradientGreen"):(n==null?void 0:n.miningType)==="blue"?"gradientBlue":(n==null?void 0:n.miningType)==="red"?"gradientRed":"gradientYellow",Rt=f("div",{d:"flex",align:"center",justify:"space-between",w:"100%",position:"relative",zIndex:20,bg:"$blue700"}),At=f("div",{d:"flex",align:"center",justify:"space-between",zIndex:20,w:"100%",px:"30px",h:"140px","@media(max-width:1224px)":{minW:"100%"},"@md":{px:"15px"},"@sm":{}}),Ct=f("div",{d:"flex",align:"center",justify:"center",gap:"20px",">a":{d:"flex",align:"center",justify:"center",svg:{h:"28px",w:"28px"}},svg:{color:"$white500",h:"22px",w:"22px"},zIndex:30,button:{"&:disabled":{opacity:.5}},"@sm":{order:-1,justify:"space-between",w:"max-content",button:{d:"none","&:last-of-type":{d:"flex",zIndex:2,svg:{h:"35px",w:"35px"}}}},"@xxsm":{">a":{top:"10px",position:"absolute"}}}),Vt=Ce({"100%":{transform:"rotate(360deg)"}}),kt=f("button",{color:"$white500",svg:{ml:"10px",color:"$white500",w:"25px",h:"25px"},variants:{isLoading:{true:{pointerEvents:"none",opacity:"0.5",svg:{animation:`${Vt} 1s linear`,animationIterationCount:"infinite"}},false:{pointerEvents:"all",opacity:"1"}}}}),$t=f("div",{d:"flex",align:"center",justify:"center",direction:"column",gap:"3px",w:"100%",">button":{h:"30px",minW:"150px",fs:"20px"},span:{textTransform:"uppercase",color:"$white500",fs:"10px",fw:"$bold",ff:"$heading"},"@sm":{w:"max-content",position:"absolute",left:"50%",transform:"translateX(-50%)"}}),Lt=f("div",{d:"flex",align:"center",justify:"center",direction:"column",gap:"10px",width:"310px","@md":{width:"max-content",margin:"0",gap:"7px"},"@sm":{d:"none"}});f("button",{d:"flex",align:"center",justify:"center",ml:"10px"});const It=f("div",{d:"flex",align:"flex-end",justify:"center",gap:"20px",mt:"20px"}),F=f("div",{d:"flex",align:"center",justify:"space-between",direction:"column",color:"$white500",w:"max-content",fs:"14px",svg:{w:"25px",h:"25px"}}),G=f("div",{d:"flex",align:"center",justify:"center",direction:"column",padding:"5px",w:"35px",h:"35px",border:"1px solid $white500",borderRadius:"$full"}),Ot=f("div",{d:"flex",align:"center",justify:"center",">button>div":{d:"flex",align:"center",justify:"center"},"@sm":{gap:"10px",">button>div":{direction:"column"}}}),zt=f("div",{d:"flex",align:"center",justify:"center",gap:"5px",ml:"10px",fs:"20px",ff:"$body",color:"$white500",path:{fill:"$white500"}}),Pt=f("p",{ff:"$heading",fs:"20px",fw:"$bold",textShadow:"1px 1px 2px black",color:"$yellow500"}),xe=h.lazy(()=>y(()=>import("./tlm-5b6fb959.js"),["assets/tlm-5b6fb959.js","assets/index-adc1ff3a.js","assets/index-55fec1ff.css"])),Bt=h.lazy(()=>y(()=>import("./star-1da7aa2a.js"),["assets/star-1da7aa2a.js","assets/index-adc1ff3a.js","assets/index-55fec1ff.css"])),Ft=h.lazy(()=>y(()=>import("./atom-c8271759.js"),["assets/atom-c8271759.js","assets/index-adc1ff3a.js","assets/index-55fec1ff.css"])),Gt=h.lazy(()=>y(()=>import("./quest-ae98de9a.js"),["assets/quest-ae98de9a.js","assets/index-adc1ff3a.js","assets/index-55fec1ff.css"])),Nt=h.lazy(()=>y(()=>import("./open-menu-aff8da83.js"),["assets/open-menu-aff8da83.js","assets/index-adc1ff3a.js","assets/index-55fec1ff.css"])),Qt=()=>{var ce,se;const{isSmall:n}=_e(),e=fe(),t=I(x=>x.user),{data:a,isLoading:s,isFetching:c}=Oe(),{data:l,isLoading:m,isFetching:o}=ze(),{data:g}=Fe(),{data:b,isLoading:u}=Pe(),{data:r}=Ne(),{data:d}=qe(),{data:p,isLoading:w}=He(),{data:_}=Je(),T=I(x=>x.updateAuth),v=D(x=>x.nonce),E=D(x=>x.updateIsCalculating),K=D(x=>x.isMineButtonLoading),J=D(x=>x.updateMineButtonLoading),ee=D(x=>x.isCalculating),te=D(x=>x.updateNonce),ne=D(x=>x.hashExpire),Te=D(x=>x.updateHashExpire),ae=D(x=>x.updateMineCooldown),U=Ve(x=>x.currentWeek),[ie,R]=S.useState(new Date),[ve,Se]=S.useState(!1),[M,Me]=S.useState(void 0),[C,oe]=S.useState(null),V=!(t!=null&&t.isMember)||(t==null?void 0:t.flagged);S.useEffect(()=>{let x=(a==null?void 0:a.delay)??0;if((t==null?void 0:t.miningType)==="blue"&&(x=15),((t==null?void 0:t.miningType)==="green"||(t==null?void 0:t.miningType)==="orange")&&C&&(x=C==null?void 0:C.delay),(t==null?void 0:t.miningType)==="red"){X({miners:a,mTools:_,setExpireDate:R,toolsLoaning:p,toolsWallets:d,user:t});return}N({delay:x,miners:a,setExpireDate:R,tools:l})},[t==null?void 0:t.miningType,a,C,_,l,p,d,t]),S.useEffect(()=>{const x=setInterval(()=>{const j=L(ie);Me(j),((t==null?void 0:t.miningType)==="orange"||(t==null?void 0:t.miningType)==="green")&&oe(Q({favorites:r,landsType:g,setExpireDate:R,tools:l,user:t,miners:a})),(j==null?void 0:j.hours)===0&&(j==null?void 0:j.minutes)===0&&(j==null?void 0:j.seconds)===1&&jt({isSmall:n}),(j==null?void 0:j.hours)===0&&(j==null?void 0:j.minutes)===0&&(j==null?void 0:j.seconds)===0&&clearInterval(x)},1e3);return()=>clearInterval(x)},[ie,t==null?void 0:t.miningType,n,r,g,a,l,t]),S.useEffect(()=>{const x=setInterval(()=>{ne-new Date().getTime()<0&&te(void 0)},3e3);return()=>clearInterval(x)},[ne,te]),S.useEffect(()=>{setInterval(async()=>{await O({miners:a,mTools:_,setExpireDate:R,toolsLoaning:p,toolsWallets:d,user:t})},6e4)},[a,_,R,p,d,t]);const De=S.useMemo(()=>Et({favorites:r,landsType:g,miners:a,setBestLand:oe,setExpireDate:R,tools:l,user:t}),[t==null?void 0:t.miningType]),re=Dt({isCalculating:ee,isLoading:ve,isLoadingLand:u,isMineButtonLoading:K,minersLoading:s,toolCooldown:!!M,toolCooldownEqual0:((M==null?void 0:M.seconds)??0)<0&&((M==null?void 0:M.minutes)??0)<0&&((M==null?void 0:M.hours)??0)<0,toolLoading:m,userMiningTypeRed:(t==null?void 0:t.miningType)==="red"?w:!1}),Ee=V?!1:re,Re=V?!1:re||H({toolCooldown:M,updateMineCooldown:ae})!=="MINE";return i.jsx(Rt,{children:i.jsxs(At,{children:[i.jsx(ht,{}),i.jsxs(Ct,{children:[i.jsx(kt,{disabled:!(t!=null&&t.member),onClick:()=>O({miners:a,mTools:_,setExpireDate:R,toolsLoaning:p,toolsWallets:d,user:t}),isLoading:c||o,children:i.jsx(Ie,{})}),i.jsxs($t,{children:[i.jsx("span",{children:vt({isDisableToMine:V,toolsWallets:d,user:t})}),i.jsx(ke,{onClick:()=>Mt({favorites:r,isCalculating:ee,isDisableToMine:V,landsType:g,miners:a,mTools:_,navigate:e,nonce:v,setExpireDate:R,setIsLoading:Se,tools:l,toolsLoaning:p,toolsWallets:d,updateAuth:T,updateIsCalculating:E,updateMineButtonLoading:J,updateHashExpire:Te,user:t}),disabled:Re,color:De,isLoading:Ee,children:Tt({isDisableToMine:V,nonce:v,toolCooldown:M,updateMineCooldown:ae})}),i.jsx("span",{children:St({bestLand:C,isDisableToMine:V,miners:a,user:t})})]}),i.jsx("button",{onClick:()=>e("/user-settings"),children:i.jsx(Le,{})}),i.jsx("button",{onClick:()=>e("/menu"),children:i.jsx(Nt,{})})]}),i.jsxs(Lt,{children:[i.jsxs(It,{children:[i.jsxs(F,{children:[i.jsx(G,{children:i.jsx(Gt,{})}),z(((ce=t==null?void 0:t.userWeekly)==null?void 0:ce.total_quest_points)??0,1)]}),i.jsxs(F,{children:[i.jsx(G,{children:i.jsx(Bt,{})}),z((t==null?void 0:t.mcPoints)??0,1)]}),i.jsxs(F,{children:[i.jsx(G,{children:i.jsx(Ft,{color:"#F6A800"})}),z(((t==null?void 0:t.redeemable_points)??0)/10,1)]}),i.jsxs(F,{children:[i.jsx(G,{children:i.jsx(xe,{})}),z(Number((se=t==null?void 0:t.userTlm)==null?void 0:se.balance)??0,1)]})]}),i.jsx(Ot,{children:i.jsx("button",{onClick:()=>e("/week-reward"),children:i.jsxs("div",{children:[i.jsx(Pt,{children:"Prize Pool"}),i.jsxs(zt,{children:[et((U==null?void 0:U.initial_prize_pool_formatted)??0),i.jsx(xe,{})]})]})})})]})]})})},qt=f("div",{d:"flex",align:"center",justify:"flex-start",direction:"column",w:"100%",minH:"100vh",bgSize:"cover !important",backgroundPosition:"top",bgRepeat:"no-repeat",bg:"$blue700",variants:{pathBG:{menu:{bg:"$blue700"},"about-us":{bgImage:"url(/assets/background/bg-login.jpeg)"},questing:{bgImage:"url(/assets/background/bg-quest.jpeg)"},"week-reward":{bgImage:"url(/assets/background/bg-week-rewards.jpeg)"},"mine-max":{bgImage:"url(/assets/background/mine-bg.jpeg)"},crowdfunding:{bgImage:"url(/assets/background/bg-crowdfunding.jpeg)",backgroundPosition:"center"},adventures:{bgImage:"url(/assets/background/bg-adventures.jpeg)"},news:{bgImage:"url(/assets/background/bg-news.jpeg)"}}}}),Kt=f("div",{d:"flex",align:"center",justify:"flex-start",direction:"column",position:"relative",pb:"35px",minH:"calc(100vh - 290px)",w:"100%",variants:{pathBG:{referendums:{bg:"$blue700"},builder:{bgImage:"url(/assets/background/bg-content-mcp-builder.jpeg)",backgroundPosition:"center",bgRepeat:"no-repeat",bgSize:"cover"},"daily-rewards":{pb:"0px",bgImage:"url(/assets/background/bg-content-daily-rewards.webp)",backgroundPosition:"top 110px center",backgroundRepeat:"no-repeat",backgroundSize:"cover","@md":{backgroundPosition:"top 100px center"},"@sm":{backgroundPosition:"top  center"}},"about-us":{mt:"10px"},questing:{mt:"10px"},"user-settings":{mt:"10px"},"tool-tactician":{mt:"10px"},"week-reward":{mt:"10px"},"mine-max":{mt:"10px"},voting:{mt:"10px"},crowdfunding:{mt:"10px"},adventures:{mt:"10px"},news:{mt:"10px"},applications:{mt:"10px"},information:{mt:"10px"}}}}),Ut=f("nav",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%",pb:"10px",mb:"20px",bg:"$blue700"}),Ht=f("nav",{d:"flex",align:"center",justify:"flex-start",maxW:"95%",w:"100%",py:"10px","@sm":{overflow:"auto"}}),Yt=f(he,{d:"flex",align:"center",justify:"center",padding:"10px 20px",fs:"20px",ff:"$heading",color:"$white500",textTransform:"uppercase",variants:{active:{true:{textDecoration:"underline",textDecorationColor:"$blue100",textDecorationThickness:"2px",textUnderlineOffset:"7px"}}}}),Zt=f("nav",{d:"flex",align:"center",justify:"flex-start",gap:"20px",padding:"10px 20px",bg:"rgba(255, 255, 255, 0.05)",br:"10px",maxW:"95%",w:"100%","@md":{flexWrap:"wrap"},"@sm":{d:"grid",gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"repeat(3, 1fr)",align:"center",justify:"center",gap:"5px",bg:"$blue700"},"@xxsm":{gridTemplateColumns:"repeat(3, 100px)"}}),Wt=f(he,{d:"flex",align:"center",justify:"center",w:"130px",variants:{isDisabled:{true:{filter:"grayscale(1)",opacity:"0.5",pointerEvents:"none",cursor:"not-allowed"}}},"@sm":{d:"flex",align:"center",justify:"center",bg:"rgba(255, 255, 255, 0.05)",w:"100%",h:"100%"}}),Xt=f("button",{d:"flex",align:"center",justify:"flex-end",direction:"column",fs:"20px",ff:"$heading",color:"$white500",svg:{w:"50px",h:"35px"},span:{mt:"10px",fs:"12px",textTransform:"uppercase",ff:"$heading"},"@sm":{padding:"10px",svg:{w:"25px",h:"25px"}},"@xsm":{span:{mt:"5px",fs:"10px"}}}),Jt=h.lazy(()=>y(()=>import("./gift-575d372a.js"),["assets/gift-575d372a.js","assets/index-adc1ff3a.js","assets/index-55fec1ff.css"])),en=h.lazy(()=>y(()=>import("./pickaxe-9171d7d1.js"),["assets/pickaxe-9171d7d1.js","assets/index-adc1ff3a.js","assets/index-55fec1ff.css"])),tn=h.lazy(()=>y(()=>import("./laserGun-c4141ef1.js"),["assets/laserGun-c4141ef1.js","assets/index-adc1ff3a.js","assets/index-55fec1ff.css"])),nn=h.lazy(()=>y(()=>import("./discord-94196130.js"),["assets/discord-94196130.js","assets/index-adc1ff3a.js","assets/index-55fec1ff.css"])),an=h.lazy(()=>y(()=>import("./rocket-3fa78a08.js"),["assets/rocket-3fa78a08.js","assets/index-adc1ff3a.js","assets/index-55fec1ff.css"])),on=h.lazy(()=>y(()=>import("./exclamation2-bbbf668a.js"),["assets/exclamation2-bbbf668a.js","assets/index-adc1ff3a.js","assets/index-55fec1ff.css"])),rn=h.lazy(()=>y(()=>import("./trophy-b603495b.js"),["assets/trophy-b603495b.js","assets/index-adc1ff3a.js","assets/index-55fec1ff.css"])),cn=h.lazy(()=>y(()=>import("./voting-76727be6.js"),["assets/voting-76727be6.js","assets/index-adc1ff3a.js","assets/index-55fec1ff.css"])),sn=h.lazy(()=>y(()=>import("./calculation-83cebbb3.js"),["assets/calculation-83cebbb3.js","assets/index-adc1ff3a.js","assets/index-55fec1ff.css"])),ln=h.lazy(()=>y(()=>import("./bulldozer-1e2584fa.js"),["assets/bulldozer-1e2584fa.js","assets/index-adc1ff3a.js","assets/index-55fec1ff.css"])),dn=h.lazy(()=>y(()=>import("./news-44f65111.js"),["assets/news-44f65111.js","assets/index-adc1ff3a.js","assets/index-55fec1ff.css"])),pn=h.lazy(()=>y(()=>import("./tutorial-123ff9eb.js"),["assets/tutorial-123ff9eb.js","assets/index-adc1ff3a.js","assets/index-55fec1ff.css"])),mn=h.lazy(()=>y(()=>import("./membership-b964a504.js"),["assets/membership-b964a504.js","assets/index-adc1ff3a.js","assets/index-55fec1ff.css"])),xn=h.lazy(()=>y(()=>import("./trilium-vault-adfcbcae.js"),["assets/trilium-vault-adfcbcae.js","assets/index-adc1ff3a.js","assets/index-55fec1ff.css"])),fn=h.lazy(()=>y(()=>import("./applications-b71bf14c.js"),["assets/applications-b71bf14c.js","assets/index-adc1ff3a.js","assets/index-55fec1ff.css"])),gn=h.lazy(()=>y(()=>import("./mcp-builder-b7cff8dc.js"),["assets/mcp-builder-b7cff8dc.js","assets/index-adc1ff3a.js","assets/index-55fec1ff.css"])),un=h.lazy(()=>y(()=>import("./sponsor-4d49cc94.js"),["assets/sponsor-4d49cc94.js","assets/index-adc1ff3a.js","assets/index-55fec1ff.css"])),hn=h.lazy(()=>y(()=>import("./aw-mining-e2d75ca1.js"),["assets/aw-mining-e2d75ca1.js","assets/index-adc1ff3a.js","assets/index-55fec1ff.css"])),k="#BBBBBB",yn=()=>{var m;const n=I(o=>o.user),e=pe(o=>o.currentMenu),t=pe(o=>o.updateCurrentMenu),a=S.useMemo(()=>{var o;return{play:[{path:"builder",title:"Builder",isDisabled:!(n!=null&&n.member),icon:i.jsx(gn,{})},{path:"adventures",title:"Adventures",isDisabled:!(n!=null&&n.member),icon:i.jsx(an,{color1:n!=null&&n.member?"#00A3FF":k,color2:n!=null&&n.member?"#E75300":k})},{path:"questing",title:"Weekly Quests",isDisabled:!(n!=null&&n.member),icon:i.jsx(on,{color:n!=null&&n.member?"#ff4f6b ":k})},{path:"week-reward",title:"Rewards",isDisabled:!(n!=null&&n.member),icon:i.jsx(rn,{color1:n!=null&&n.member?"#AC12AF":k,color2:n!=null&&n.member?"#AC12AF":k})},{path:"daily-rewards",title:"DAILY CLAIM",isDisabled:!(n!=null&&n.isMember),icon:i.jsx(S.Suspense,{children:i.jsx(Jt,{})})},{path:"mine-max",title:"Mine Maximizer",icon:i.jsx(ln,{color1:"#00ADD3",color2:"#00ADD3"})},{path:"aw-mining",title:"Mining",icon:i.jsx(hn,{})},{path:"tool-loaning",title:"TOOL LOANING",isDisabled:!(n!=null&&n.isMember),icon:i.jsx(en,{version:1})},{path:"emporium",title:"Zapp's",icon:i.jsx(tn,{})},((o=n==null?void 0:n.playerSupport)==null?void 0:o.wallet)&&{path:"applications",title:"Applications",icon:i.jsx(fn,{})}],tools:[{path:"voting",title:"Voting",isDisabled:!(n!=null&&n.member),icon:i.jsx(cn,{color:n!=null&&n.member?"#46C553":k})},{path:"trilium-vault",title:"Vault",icon:i.jsx(xn,{color:"#26d7ff"})},{path:"tool-tactician",title:"Tool Tactician",icon:i.jsx(sn,{color:"#FFC700"})}],more:[{path:"membership",title:"Membership",icon:i.jsx(mn,{color:"#57CE4C"})},{path:"information",title:"Tutorials",icon:i.jsx(pn,{color:"#EB7509"})},{path:"news",title:"News",icon:i.jsx(dn,{color:"#D32C54"})},{path:"sponsor-adventures",title:"Sponsor",icon:i.jsx(un,{})},{path:"https://discord.gg/EmpMt7NDsV",isExternal:!0,title:"Discord",icon:i.jsx(nn,{color:"#9563FF"})}]}},[n==null?void 0:n.member,(m=n==null?void 0:n.playerSupport)==null?void 0:m.wallet]),s=S.useMemo(()=>{switch(e){case"play":return a.play;case"tools":return a.tools;case"more":return a.more;default:a.play}},[e,a]),c=S.useMemo(()=>location.hash.replace("#/",""),[]);function l(o){t(o)}return i.jsx(Ut,{children:c==="menu"&&i.jsxs(i.Fragment,{children:[i.jsx(Ht,{children:Object.keys(a).map(o=>i.jsx(Yt,{onClick:()=>l(o),active:c==="menu"&&e===o,to:"menu",children:o},o))}),s&&i.jsx(Zt,{children:s==null?void 0:s.map(o=>i.jsx(Wt,{isDisabled:o==null?void 0:o.isDisabled,to:o==null?void 0:o.path,target:o!=null&&o.isExternal?"_blank":"_self",rel:o!=null&&o.isExternal?"noreferrer":"",children:i.jsxs(Xt,{children:[o==null?void 0:o.icon,i.jsx("span",{children:o==null?void 0:o.title})]})},ot()))})]})})};function Wn({children:n}){const e=$e(),t=I(s=>s.user),a=S.useMemo(()=>e.pathname.replace("/",""),[e.pathname]);return i.jsxs(qt,{pathBG:a,children:[i.jsxs(S.Suspense,{children:[t&&i.jsx(Qt,{}),a==="menu"&&i.jsx(yn,{})]}),i.jsx(Kt,{pathBG:a,children:n})]})}export{Wn as default};
