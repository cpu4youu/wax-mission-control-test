import{a as t,g as E,S as T,T as $,u as I,Q as W,z as j,f as A,i as C,j as e,I as L}from"./index-934e383f.js";import{m,c as M}from"./index-f00853bf.js";const R=t("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%","@sm":{padding:"0 15px"}}),k=t("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",h:"165px",w:"100%",zIndex:1,img:{zIndex:-1,position:"absolute",h:"165px",w:"100%",objectFit:"cover",inset:0}}),B=t("h2",{d:"flex",align:"center",justify:"center",color:"$white500",fs:"40px",ff:"$heading",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.5)",w:"100%","@sm":{fs:"24px"}}),F=t("div",{d:"flex",align:"center",justify:"center",w:"100%",maxW:"1250px",mx:"auto",my:"20px",svg:{cursor:"pointer",mr:"auto"}}),H=t("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%",maxW:"1250px","@md":{d:"flex",flexWrap:"wrap"}}),O=t("h2",{color:"$white500",fs:"24px",ff:"$heading",mr:"auto"}),Q=t("div",{d:"grid",gap:"5px",mt:"20px",w:"100%",maxW:"1250px"}),z=t("div",{d:"grid",gap:"5px",maxH:"555px",overflowY:"auto",w:"100%",maxW:"1250px"}),P=t("div",{d:"grid",gridTemplateColumns:"0.5fr repeat(3, 1fr) 3fr",gap:"10px",w:"100%",h:"37px",maxW:"1250px",bg:"rgba(0, 0, 0, 0.27)",px:"20px",span:{d:"flex",align:"center",justify:"flex-start",color:"#797979",fs:"16px",fw:"bold",ff:"$heading"},"@sm":{gridTemplateColumns:"0.5fr repeat(3, 1fr)",gap:"10px",span:{fs:"12px","&:last-child":{d:"none"}}}}),Y=t("div",{d:"grid",alignItems:"center",justifyContent:"center",gridTemplateColumns:"0.5fr repeat(3, 1fr) 3fr",gap:"10px",minH:"55px",w:"100%",maxW:"1250px",bg:"rgba(72, 150, 222, 0.27)",pl:"20px",pr:"10px",mb:"15px",span:{d:"flex",align:"center",justify:"flex-start",color:"white",fs:"16px",fw:"bold",ff:"$heading"},"@sm":{h:"unset",gridTemplateColumns:"0.5fr repeat(3, 1fr)",gridTemplateRows:"0.8fr 2fr",gap:"10px",span:{fs:"12px"}}}),N=t("div",{d:"grid",gridTemplateColumns:"0.5fr repeat(3, 1fr) 3fr",gap:"10px",w:"100%",maxW:"1250px",bg:"rgba(0, 0, 0, 0.27)",pl:"20px",span:{d:"flex",align:"center",justify:"flex-start",color:"#797979",fs:"16px",fw:"bold",ff:"$heading"},"@sm":{h:"unset",gridTemplateColumns:"0.5fr repeat(3, 1fr)",gridTemplateRows:"0.8fr 2fr",gap:"10px",span:{fs:"12px"}}}),S=t("div",{d:"flex",flexWrap:"wrap",gap:"5px",py:"5px",">span":{d:"flex",gap:"5px"},"@sm":{gridColumnStart:1,gridColumnEnd:5,align:"center",justify:"center"}}),h=t("div",{d:"flex",align:"center",justify:"center",direction:"column",img:{objectFit:"cover",br:"10px",w:"37px",h:"37px"},span:{d:"flex",align:"center",justify:"flex-start",mt:"-10px",textShadow:"-1px 0 white, 0 1px white, 1px 0 white, 0 -1px white",color:"black !important",fs:"16px",fw:"bold",ff:"$heading"}}),q=async()=>await E({options:{code:T.GAME_MC,index_position:3,key_type:"i64",limit:"100",scope:T.GAME_MC,table:$.PLAYERS,reverse:!0}}),D=()=>I({queryKey:[W.LeaderBoard],queryFn:()=>G(),staleTime:1e3*60*60});async function G(){try{const i=await q();return i?K(i):null}catch(i){return console.log(i),null}}async function K(i){return i==null?void 0:i.map(a=>{var u,s,o;(u=a.buildings)==null||u.sort((d,g)=>j.findIndex(c=>c.label===d.buildingid)-j.findIndex(c=>c.label===g.buildingid));const l=(s=a.buildings)==null?void 0:s.filter(d=>d.building_type==="production"),v=(o=a.buildings)==null?void 0:o.filter(d=>d.building_type!=="production");return{...a,buildings:{production:l,special:v}}})}const V=()=>{var d,g,c,_;const{data:i,isLoading:a}=D(),{data:l,isLoading:v}=A();function u(){M.setState(n=>({...n,selectedProduction:null}))}const s=C.useMemo(()=>{var p,x,r;if(!l)return;(p=l==null?void 0:l.buildings)==null||p.sort((f,y)=>j.findIndex(w=>w.label===f.buildingid)-j.findIndex(w=>w.label===y.buildingid));const n=(x=l.buildings)==null?void 0:x.filter(f=>f.building_type==="production"),b=(r=l.buildings)==null?void 0:r.filter(f=>f.building_type!=="production");return{...l,buildings:{production:n,special:b}}},[]),o=C.useMemo(()=>!i||!l?-1:i.findIndex(n=>n.wallet===l.wallet)+1,[i,l]);return e.jsxs(R,{children:[e.jsxs(k,{children:[e.jsx(B,{children:"Outpost Builder"}),e.jsx("img",{src:"/assets/background/bg-mcp-builder.jpeg",alt:""})]}),e.jsx(F,{children:e.jsx(L,{onClick:u,color:"white",size:30})}),e.jsxs(H,{children:[e.jsx(O,{children:"SEASON LEADERBOARD"}),e.jsxs(Q,{children:[e.jsxs(P,{children:[e.jsx("span",{children:"Rank"}),e.jsx("span",{children:"Wallet"}),e.jsx("span",{children:"Building Score"}),e.jsx("span",{children:"Ð¯ / min"}),e.jsx("span",{children:"Buildings"})]}),e.jsxs(Y,{children:[e.jsx("span",{children:o<0?"< 100":o}),e.jsx("span",{children:s==null?void 0:s.wallet}),e.jsx("span",{children:m((s==null?void 0:s.score_building)||0)}),e.jsx("span",{children:m((s==null?void 0:s.gamecurrency_per_minute)||0,3)}),e.jsxs(S,{children:[(g=(d=s==null?void 0:s.buildings)==null?void 0:d.production)==null?void 0:g.map(n=>e.jsxs(h,{children:[e.jsx("img",{src:`/assets/mcp/${n==null?void 0:n.buildingid}.png`,alt:""}),e.jsx("span",{children:n.building_level===0?"-":n.building_level})]},n.buildingid)),e.jsx("span",{children:(_=(c=s==null?void 0:s.buildings)==null?void 0:c.special)==null?void 0:_.map(n=>e.jsxs(h,{children:[e.jsx("img",{src:`/assets/mcp/${n==null?void 0:n.buildingid}.png`,alt:""}),e.jsx("span",{children:n.building_level===0?"-":n.building_level})]},n.buildingid))})]})]}),e.jsx(z,{children:i==null?void 0:i.map((n,b)=>{var p,x;return e.jsxs(N,{children:[e.jsx("span",{children:b+1}),e.jsx("span",{children:n.wallet}),e.jsx("span",{children:m(n.score_building,3)}),e.jsx("span",{children:m((n==null?void 0:n.gamecurrency_per_minute)||0,3)}),e.jsxs(S,{children:[(p=n.buildings.production)==null?void 0:p.map(r=>e.jsxs(h,{children:[e.jsx("img",{src:`/assets/mcp/${r==null?void 0:r.buildingid}.png`,alt:""}),e.jsx("span",{children:r.building_level===0?"-":r.building_level})]},r.buildingid)),e.jsx("span",{children:(x=n.buildings.special)==null?void 0:x.map(r=>e.jsxs(h,{children:[e.jsx("img",{src:`/assets/mcp/${r==null?void 0:r.buildingid}.png`,alt:""}),e.jsx("span",{children:r.building_level===0?"-":r.building_level})]},r.buildingid))})]})]},n.wallet)})})]})]})]})};export{V as default};
