import{g as c,S as o,T as l,d as g,Q as r,u,n as M,q as m}from"./index-1c158c44.js";import{i as S}from"./index-f4dd86a7.js";import{u as f}from"./use-transaction-894e3475.js";const d=async()=>await c({options:{code:o.HQ_MU,index_position:1,limit:"1000",scope:o.HQ_MU,table:l.TLMDROPS}})??null,b=async e=>await c({options:{code:o.HQ_MU,index_position:3,limit:"1000",key_type:"i64",scope:o.HQ_MU,table:l.TLMBIDS,lower_bound:e,upper_bound:e}})??null,$=()=>g({queryKey:[r.SPECIAL_MINING],queryFn:()=>A(),staleTime:1e3*60*60*24,enabled:!!u.getState().user});async function O(){return await m.invalidateQueries(r.SPECIAL_MINING)}async function A(){const e=u.getState().user;if(!e)return null;try{const t=await b(e.name),s=await d();return t?t==null?void 0:t.reduce((i,a)=>{const n=s==null?void 0:s.find(p=>p.index===a.pool_index&&S(M,new Date(p.endtime)));if(!n)return i;const T=((a==null?void 0:a.total_bid)??0)/((n==null?void 0:n.total_power)??1),_=(n==null?void 0:n.rewards.replace(" TLM",""))??"1";return i+T*Number(_)},0):0}catch(t){return console.log(t),null}}const w=async e=>{const t=await c({options:{code:o.M__FEDERATION,index_position:1,limit:"1000",scope:o.M__FEDERATION,table:l.LANDCOMMS,lower_bound:e,upper_bound:e}});return(t==null?void 0:t[0])??null},R=()=>g({queryKey:[r.LAND_COMMS],queryFn:()=>h(),staleTime:1e3*60*60*24,enabled:!!u.getState().user});async function E(){return await m.invalidateQueries(r.LAND_COMMS)}async function h(){const e=u.getState().user;if(!e)return null;try{return await w(e.name)}catch(t){return console.log(t),null}}const C=async e=>{const t=await c({options:{code:o.AWLNDRATINGS,index_position:1,limit:"1000",scope:o.AWLNDRATINGS,table:l.PAYOUTS,lower_bound:e,upper_bound:e}});return(t==null?void 0:t[0])??null},F=()=>g({queryKey:[r.PAYOUTS],queryFn:()=>L(),staleTime:1e3*60*60*24,enabled:!!u.getState().user});async function x(){return await m.invalidateQueries(r.PAYOUTS)}async function L(){const e=u.getState().user;if(!e)return null;try{return await C(e.name)}catch(t){return console.log(t),null}}async function P(e){const{executeTransaction:t}=f(),s=N(e);return!!await t(s)}function N(e){return{actions:[{account:o.M__FEDERATION,name:"claimmines",authorization:[{actor:e.name,permission:e.authorization.permission}],data:{receiver:e.name}}]}}function q(e){const t=e.getFullYear(),s=e.getMonth()+1>9?e.getMonth()+1:`0${e.getMonth()+1}`,y=e.getDate()>9?e.getDate():`0${e.getDate()}`,i=e.getHours()>9?e.getHours():`0${e.getHours()}`,a=e.getMinutes()>9?e.getMinutes():`0${e.getMinutes()}`,n=e.getSeconds()>9?e.getSeconds():`0${e.getSeconds()}`;return`${t}-${s}-${y}T${i}:${a}:${n}`}export{E as a,x as b,R as c,F as d,P as e,q as f,O as o,$ as u};
