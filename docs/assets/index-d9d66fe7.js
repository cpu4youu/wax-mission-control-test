import{s as i,g as y,S as M,T as A,a as I,Q as L,b as W,R as F,f as _,j as e}from"./index-466eeaa7.js";import{m as p,c as H}from"./index-5cb36c97.js";import{b as B}from"./index.esm-ac05118a.js";import{b as j,u as O}from"./index-c24eaea3.js";import"./info-builder-ae538a85.js";import"./index-22368b99.js";import"./index-ac5bf735.js";import"./index-95ce654c.js";import"./index-b41cf2b4.js";const P=i("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%","@sm":{padding:"0 15px"}}),Q=i("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",h:"165px",w:"100%",zIndex:1,img:{zIndex:-1,position:"absolute",h:"165px",w:"100%",objectFit:"cover",inset:0}}),Y=i("h2",{d:"flex",align:"center",justify:"center",color:"$white500",fs:"40px",ff:"$heading",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.5)",w:"100%","@sm":{fs:"24px"}}),z=i("div",{d:"flex",align:"center",justify:"center",w:"100%",maxW:"1250px",mx:"auto",my:"20px",svg:{cursor:"pointer",mr:"auto"}}),G=i("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%",maxW:"1250px","@md":{d:"flex",flexWrap:"wrap"}}),N=i("h2",{color:"$white500",fs:"24px",ff:"$heading",mr:"auto"}),q=i("div",{d:"grid",gap:"5px",mt:"20px",w:"100%",maxW:"1250px"}),D=i("div",{d:"grid",gap:"5px",maxH:"555px",overflowY:"auto",w:"100%",maxW:"1250px"}),K=i("div",{d:"grid",gridTemplateColumns:"0.5fr repeat(4, 1fr) 3fr",gap:"10px",w:"100%",h:"37px",maxW:"1250px",bg:"rgba(0, 0, 0, 0.27)",px:"20px",span:{d:"flex",align:"center",justify:"flex-start",color:"#797979",fs:"16px",fw:"bold",ff:"$heading"},"@sm":{gridTemplateColumns:"0.5fr repeat(4, 1fr)",gap:"5x",pl:"10px",pr:"10px",span:{fs:"12px","&:last-child":{d:"none"}}}}),C=i("button",{d:"flex",align:"center",justify:"flex-start",color:"#797979",fs:"16px",fw:"bold",ff:"$heading","&:hover":{color:"$yellow500"},variants:{selected:{true:{color:"$yellow500"}}},"@sm":{fs:"12px","&:last-child":{d:"none"}}}),U=i("div",{d:"grid",alignItems:"center",justifyContent:"center",gridTemplateColumns:"0.5fr repeat(4, 1fr) 3fr",gap:"10px",minH:"55px",w:"100%",maxW:"1250px",bg:"rgba(72, 150, 222, 0.27)",pl:"20px",pr:"10px",mb:"15px",span:{d:"flex",align:"center",justify:"flex-start",color:"white",fs:"16px",fw:"bold",ff:"$heading"},"@sm":{h:"unset",gridTemplateColumns:"0.5fr repeat(4, 1fr)",gridTemplateRows:"0.8fr 2fr",gap:"5px",pl:"10px",pr:"10px",span:{fs:"12px"}}}),J=i("div",{d:"grid",gridTemplateColumns:"0.5fr repeat(4, 1fr) 3fr",gap:"10px",w:"100%",maxW:"1250px",bg:"rgba(0, 0, 0, 0.27)",pl:"20px",span:{d:"flex",align:"center",justify:"flex-start",color:"#797979",fs:"16px",fw:"bold",ff:"$heading"},"@sm":{h:"unset",gridTemplateColumns:"0.5fr repeat(4, 1fr)",gridTemplateRows:"0.8fr 2fr",gap:"5px",pl:"10px",pr:"10px",span:{fs:"12px"}}}),E=i("div",{d:"flex",flexWrap:"wrap",gap:"5px",py:"5px",">span":{d:"flex",gap:"5px"},"@sm":{gridColumnStart:1,gridColumnEnd:5,align:"center",justify:"center"}}),h=i("div",{d:"flex",align:"center",justify:"center",direction:"column",img:{objectFit:"cover",br:"10px",w:"37px",h:"37px"},span:{d:"flex",align:"center",justify:"flex-start",mt:"-10px",textShadow:"-1px 0 white, 0 1px white, 1px 0 white, 0 -1px white",color:"black !important",fs:"16px",fw:"bold",ff:"$heading"}}),V=async r=>await y({options:{code:M.GAME_MC,index_position:r,key_type:"i64",limit:"100",scope:M.GAME_MC,table:A.PLAYERS,reverse:!0}}),X=r=>I({queryKey:[L.LeaderBoard,r],queryFn:()=>Z(r),staleTime:1e3*60*60});async function Z(r){try{const l=await V(r);return l?ee(l):null}catch(l){return console.log(l),null}}async function ee(r){return r==null?void 0:r.map(l=>{var c,b,u;(c=l.buildings)==null||c.sort((s,g)=>j.findIndex(a=>a.label===s.buildingid)-j.findIndex(a=>a.label===g.buildingid));const o=(b=l.buildings)==null?void 0:b.filter(s=>s.building_type==="production"),d=(u=l.buildings)==null?void 0:u.filter(s=>s.building_type!=="production");return{...l,buildings:{production:o,special:d}}})}const de=()=>{var T,S,$,k;W(n=>n.user);const{data:r,isLoading:l}=O(),[o,d]=F.useState(3),{data:c,isLoading:b}=X(o);function u(){H.setState(n=>({...n,selectedProduction:null}))}const s=_.useMemo(()=>{var x,f,t;if(!r)return;(x=r==null?void 0:r.buildings)==null||x.sort((m,R)=>j.findIndex(v=>v.label===m.buildingid)-j.findIndex(v=>v.label===R.buildingid));const n=(f=r.buildings)==null?void 0:f.filter(m=>m.building_type==="production"),w=(t=r.buildings)==null?void 0:t.filter(m=>m.building_type!=="production");return{...r,buildings:{production:n,special:w}}},[]),g=_.useMemo(()=>!c||!r?-1:c.findIndex(n=>n.wallet===r.wallet)+1,[c,r]),a=_.useCallback(n=>{switch(n){case"mcp":d(2);break;case"score":d(3);break;case"rMin":d(4);break;default:d(3)}},[]);return e.jsxs(P,{children:[e.jsxs(Q,{children:[e.jsx(Y,{children:"Outpost Builder"}),e.jsx("img",{src:"/assets/background/bg-mcp-builder.jpeg",alt:""})]}),e.jsx(z,{children:e.jsx(B,{onClick:u,color:"white",size:30})}),e.jsxs(G,{children:[e.jsx(N,{children:"SEASON LEADERBOARD"}),e.jsxs(q,{children:[e.jsxs(K,{children:[e.jsx("span",{children:"Rank"}),e.jsx("span",{children:"Gamertag"}),e.jsx(C,{selected:o===3,onClick:()=>a("score"),children:"ScoreðŸ†"}),e.jsx(C,{selected:o===4,onClick:()=>a("rMin"),children:"Ð¯ / min"}),e.jsx(C,{selected:o===2,onClick:()=>a("mcp"),children:"MCP earned"}),e.jsx("span",{children:"Buildings"})]}),e.jsxs(U,{children:[e.jsx("span",{children:g===0?"> 100":g}),e.jsx("span",{children:s==null?void 0:s.gamertag}),e.jsx("span",{children:p((s==null?void 0:s.score_building)||0,3)}),e.jsx("span",{children:p((s==null?void 0:s.gamecurrency_per_minute)||0,3)}),e.jsx("span",{children:p((s==null?void 0:s.score_mcp)||0,3)}),e.jsxs(E,{children:[(S=(T=s==null?void 0:s.buildings)==null?void 0:T.production)==null?void 0:S.map(n=>e.jsxs(h,{children:[e.jsx("img",{src:`/assets/mcp/${n==null?void 0:n.buildingid}.png`,alt:""}),e.jsx("span",{children:n.building_level===0?"-":n.building_level})]},n.buildingid)),e.jsx("span",{children:(k=($=s==null?void 0:s.buildings)==null?void 0:$.special)==null?void 0:k.map(n=>e.jsxs(h,{children:[e.jsx("img",{src:`/assets/mcp/${n==null?void 0:n.buildingid}.png`,alt:""}),e.jsx("span",{children:n.building_level===0?"-":n.building_level})]},n.buildingid))})]})]}),e.jsx(D,{children:c==null?void 0:c.map((n,w)=>{var x,f;return e.jsxs(J,{children:[e.jsx("span",{children:w+1}),e.jsx("span",{children:n.gamertag}),e.jsx("span",{children:p(n.score_building,3)}),e.jsx("span",{children:p((n==null?void 0:n.gamecurrency_per_minute)||0,3)}),e.jsx("span",{children:p((n==null?void 0:n.score_mcp)||0,3)}),e.jsxs(E,{children:[(x=n.buildings.production)==null?void 0:x.map(t=>e.jsxs(h,{children:[e.jsx("img",{src:`/assets/mcp/${t==null?void 0:t.buildingid}.png`,alt:""}),e.jsx("span",{children:t.building_level===0?"-":t.building_level})]},t.buildingid)),e.jsx("span",{children:(f=n.buildings.special)==null?void 0:f.map(t=>e.jsxs(h,{children:[e.jsx("img",{src:`/assets/mcp/${t==null?void 0:t.buildingid}.png`,alt:""}),e.jsx("span",{children:t.building_level===0?"-":t.building_level})]},t.buildingid))})]})]},n.wallet)})})]})]})]})};export{de as default};
