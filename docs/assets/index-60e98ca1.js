import{s,j as t,e as re,f as o,E as ce,b as L,P as $,U as oe,V as le,W as de,X as xe,Y as V,m as S,q as pe,Q as ue,n as T,Z as fe,$ as ge,a0 as me,a1 as he,a2 as F,a3 as we,a4 as ye,a5 as E,d as je,a6 as be,B as U,a7 as ve}from"./index-8534e1f4.js";import{S as p}from"./styles-54acbab3.js";const $e=s("div",{d:"flex",align:"center",justify:"center",position:"relative",direction:"column",h:"400px",nt:"25px",gap:"20px",".recomended":{w:"280px",h:"40px",mt:"50px",br:"$full"},".recomended-2":{w:"480px",h:"40px",br:"$full"}}),Te=s("div",{d:"flex",align:"center",justify:"center",position:"relative",gap:"20px",".nfts":{w:"130px",h:"130px",br:"$full"}}),Ce=()=>t.jsxs($e,{children:[t.jsxs(Te,{children:[t.jsx(p,{className:"nfts"}),t.jsx(p,{className:"nfts"}),t.jsx(p,{className:"nfts"}),t.jsx(p,{className:"nfts"}),t.jsx(p,{className:"nfts"}),t.jsx(p,{className:"nfts"})]}),t.jsx(p,{className:"recomended"}),t.jsx(p,{className:"recomended-2"})]}),Me=re({"0%":{transform:"rotate(360deg)"},"100%":{transform:" rotate(0deg)"}}),Le=s("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",w:"100%",px:"40px","@sm":{px:"0px"}}),Se=s("div",{d:"flex",align:"center",justify:"center",mt:"10px",mb:"30px",">button":{d:"flex",align:"center",justify:"center",direction:"column",ml:"10px",mt:"10px",w:"45px",h:"45px",svg:{color:"$white500",ml:"20px",w:"40px",h:"40px"}},variants:{isLoading:{true:{svg:{animationName:`${Me}`,animationDuration:"1s",animationTimingFunction:"ease",animationIterationCount:"infinite"}}}},"@sm":{gap:"15px",m:"0px",">button":{ml:"0px",svg:{w:"30px",h:"30px"}}}}),Ee=s("div",{d:"flex",align:"center",justify:"center",gap:"15px",flexWrap:"wrap",w:"100%",maxW:"1300px",padding:"40px",background:"linear-gradient(90deg, rgba(3, 16, 32, 0.08) 0%, rgba(3, 16, 32, 0.46) 3.13%, rgba(3, 16, 32, 0.46) 92.71%, rgba(3, 16, 32, 0.00) 100%)","@sm":{display:"none"}}),De=s("div",{d:"flex",align:"center",justify:"center",gap:"6px"}),Ne=s("div",{d:"flex",align:"center",justify:"center",border:"5px solid $black500",br:"18px",overflow:"hidden",w:"80px",h:"80px",position:"relative",">img":{position:"absolute",objectFit:"contain",top:"-30px",w:"190px",h:"190px"},variants:{rarity:{Abundant:{borderColor:"#4c4c4c"},Common:{borderColor:"#000000"},Rare:{borderColor:"#3d74e9"},Epic:{borderColor:"#8719f0"},Legendary:{borderColor:"#da992e"},Mythical:{borderColor:"#d20066"}}}}),Re=s("div",{d:"flex",align:"flex-start",justify:"center",direction:"column"}),_e=s("span",{d:"flex",align:"center",justify:"center",color:"$white500",ff:"$heading",fs:"24px","@sm":{fs:"18px"}}),Ie=s("span",{d:"flex",align:"center",justify:"center",ff:"$heading",fs:"22px",fw:"$bold",textShadow:"0 0 1px #fff",variants:{rarity:{Abundant:{color:"#4c4c4c"},Common:{color:"#000000"},Rare:{color:"#3d74e9"},Epic:{color:"#8719f0"},Legendary:{color:"#da992e"},Mythical:{color:"#d20066"}}},"@sm":{fs:"18px"}}),Ae=s("h2",{d:"flex",align:"center",justify:"center",color:"$white500",fs:"40px",ff:"$heading",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.5)",w:"100%","@sm":{fs:"20px"}}),ke=s("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%",mt:"30px",gap:"50px","@sm":{mt:"0px",gap:"8px",justify:"flex-start",overflow:"auto",direction:"column"}}),Qe=s("div",{d:"flex",align:"center",justify:"center",w:"100%",maxW:"1300px",gap:"10px","@sm":{justify:"flex-start",direction:"column",gap:"15px",mt:"10px",overflow:"auto",maxW:"100%"}}),We=s("div",{d:"flex",align:"center",justify:"center",direction:"column",gap:"10px",w:"100%",padding:"20px 10px",br:"18px",bg:"rgba(3, 16, 32, 0.65)",border:"3px solid $black500",img:{mt:"20px",br:"50%",w:"100px",h:"100px"},"@sm":{w:"90%",direction:"row",padding:"10px 10px",img:{order:-1,my:"0px",w:"35px",h:"35px"}},variants:{selected:{true:{position:"relative",border:"3px solid $yellow500",">div:nth-child(2) >div:nth-child(1)":{color:"$yellow500"},">div:nth-child(3) >div:nth-child(2)":{color:"$yellow500"}}}}});s("div",{d:"flex",align:"center",justify:"center",w:"100%",ff:"$heading",fs:"20px",fw:"$bold",textShadow:"0px 4px 4px rgba(0, 0, 0, 1)",color:"$white500","@sm":{fs:"18px"}});const B=s("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%","@sm":{fs:"16px"}}),q=s("div",{d:"flex",align:"center",justify:"center",w:"100%",mt:"5px",ff:"$heading",fs:"12px",textAlign:"center",textShadow:"0px 4px 4px rgba(0, 0, 0, 1)",color:"$white500","@sm":{fs:"16px",d:"none"}}),H=s("div",{d:"flex",align:"center",justify:"center",w:"100%",ff:"$heading",fs:"16px",fw:"$bold",textAlign:"center",textShadow:"0px 4px 4px rgba(0, 0, 0, 1)",color:"$white500","@sm":{fs:"16px"}});s("div",{d:"flex",align:"center",justify:"center",direction:"column",mt:"60px",color:"$white500","@sm":{mt:"10px"}});s("span",{w:"100%",textAlign:"center",fw:"$bold",ff:"$heading",fs:"26px",color:"$white500","@sm":{fs:"18px"}});s("span",{w:"100%",textAlign:"center",textTransform:"capitalize",fs:"30px",color:"$white500","@sm":{fs:"18px"}});const Pe=s("div",{d:"flex",align:"center",justify:"center",gap:"20px",flexWrap:"wrap",">button":{fs:"20px",mt:"40px",h:"40px",w:"300px"},"@sm":{gap:"8px",mt:"20px",">button":{mt:"0px"}}}),Ue=()=>{var I,A;const Y=o.useContext(ce.UALContext),i=L(e=>e.user),z=L(e=>e.updateAuth),l=$(e=>e.nonce),G=$(e=>e.updateHashExpire),y=$(e=>e.isCalculating),K=$(e=>e.updateIsCalculating);oe();const{data:c}=le(),{data:n}=de(),{data:j,isLoading:X}=xe(),[Z,C]=o.useState(new Date),[D,b]=o.useState(!1),[r,J]=o.useState(void 0),[O,N]=o.useState(!1),ee=o.useCallback(async()=>{var e;b(!0);try{await V(),await S(500);const[[a,f]]=pe.getQueriesData(ue.LANDS),d=(e=f.highestValue)==null?void 0:e.asset_id;if(!i||!d)return null;if((c==null?void 0:c.current_land)===d){T.success("Best land already set"),await R();return}if(!await fe(i,d))throw new Error("Change land error from contract");T.success("Land changed successfully"),await R(),await _()}catch(a){console.log(a)}finally{b(!1)}},[i,c,l==null?void 0:l.rand_str,y]),R=o.useCallback(async()=>{var e,a,f;if(!i)return null;b(!0);try{if(!(l!=null&&l.rand_str)&&!y){K(!0),await ge();const x=new Date;G(x.setMinutes(x.getMinutes()+1))}if(!await me(i))throw new Error("MINE error from contract");await S(6e3);const u=await he(i==null?void 0:i.name),g=await(await fetch(`https://wax.eosdac.io/v2/history/get_transaction?id=${u==null?void 0:u.last_mine_tx}`)).json(),m=(f=(a=(e=g==null?void 0:g.actions.find(({act:x})=>{var h;return!!((h=x==null?void 0:x.data)!=null&&h.bounty)}))==null?void 0:e.act)==null?void 0:a.data)==null?void 0:f.bounty;m?T.success(`Mine ${m}`):T.success("Mine successful")}catch(d){console.log(d)}finally{await S(800),await _(),await z(Y),b(!1)}},[i]);async function te(){L.setState(e=>({...e,user:e.user?{...e.user,miningType:"blue"}:null})),localStorage.setItem("miningType","blue")}async function _(){await F(),await we()}async function ne(){N(!0),await F(),await ve(),await V(),N(!1)}const v=o.useMemo(()=>ye(r),[r]);o.useEffect(()=>{var d,u,M,g,m,x,h,k,Q,W,P;if(((d=n==null?void 0:n.userTools)==null?void 0:d.length)===1){const w=1.5*(((M=(u=n==null?void 0:n.userTools)==null?void 0:u[0])==null?void 0:M.delay)??0);E(w,n,c,C);return}if(((g=n==null?void 0:n.userTools)==null?void 0:g.length)===2){const w=1.5*((((x=(m=n==null?void 0:n.userTools)==null?void 0:m[0])==null?void 0:x.delay)??0)+(((k=(h=n==null?void 0:n.userTools)==null?void 0:h[1])==null?void 0:k.delay)??0)/2);E(w,n,c,C);return}const a=(Q=n==null?void 0:n.userTools)==null?void 0:Q.sort((w,ie)=>ie.delay-w.delay),f=1.5*((((W=a==null?void 0:a[0])==null?void 0:W.delay)??0)+(((P=a==null?void 0:a[1])==null?void 0:P.delay)??0));E(f,n,c,C)},[n==null?void 0:n.userTools,c==null?void 0:c.delay,i==null?void 0:i.miningType,c,n]),o.useEffect(()=>{const e=setTimeout(()=>{J(je(Z))},1e3);return()=>clearTimeout(e)});const se=()=>y&&v==="MINE"?"Calculating hash...":l!=null&&l.rand_str?"Submit":v==="MINE"?"Set Land & Mine":`Mine Cooldown ${v}`,ae=!r||(r==null?void 0:r.seconds)<0&&(r==null?void 0:r.minutes)<0&&(r==null?void 0:r.hours)<0;return t.jsxs(Le,{children:[t.jsxs(Se,{isLoading:O,children:[t.jsx(Ae,{children:"Mine Maximizer"}),t.jsx("button",{onClick:ne,children:t.jsx(be,{})})]}),t.jsx(Ee,{children:(I=n==null?void 0:n.userTools)==null?void 0:I.map(e=>t.jsxs(De,{children:[t.jsx(Ne,{rarity:e.rarity,children:t.jsx("img",{src:`https://ipfs.alienworlds.io/ipfs/${e.img}`,alt:""})}),t.jsxs(Re,{children:[t.jsx(_e,{children:e.toolname}),t.jsx(Ie,{rarity:e.rarity,children:e.rarity})]})]},e.asset_id))}),X?t.jsx(Ce,{}):t.jsx(t.Fragment,{children:t.jsx(ke,{children:t.jsx(Qe,{children:(A=j==null?void 0:j.list)==null?void 0:A.map(e=>{var a;return t.jsxs(We,{selected:((a=j.highestValue)==null?void 0:a.title)===e.title,children:[t.jsx("img",{src:e.img,alt:e.title}),t.jsxs(B,{children:[t.jsx(H,{children:e.title}),t.jsxs(q,{children:[e==null?void 0:e.land_name,t.jsx("br",{}),e==null?void 0:e.location]})]}),t.jsxs(B,{children:[t.jsx(q,{children:"Estimated Mine"}),t.jsxs(H,{children:[e.value_formatted.toFixed(4)??0," TLM"]})]})]},e.title)})})})}),t.jsxs(Pe,{children:[t.jsx(U,{isLoading:D,disabled:ae||v!=="MINE"||y||D,color:"quarterly",onClick:ee,children:se()}),t.jsx(U,{color:"tertiary",onClick:te,children:"Use as Mining Button"})]})]})};export{Ue as default};
