import{e as y,s as i,k as v,S as p,T as j,l as E,Q as T,r as m,b as S,R as W,j as r,m as d,n as M}from"./index-89d4724b.js";import{o as x,u as $}from"./news-members-6cb17dc0.js";import{d as b}from"./use-transaction-203875d1.js";import{s as u}from"./sleep-da79c358.js";import{T as k}from"./index-d58ff12b.js";import{S as A}from"./index-9ca0ce0b.js";import{i as _}from"./index-8642e6ae.js";import"./user-miners-query-307a5653.js";import"./axios-43b00e28.js";import"./index.esm-337cae26.js";import"./index-61adf3f0.js";import"./index-53e21840.js";import"./index-a87da05a.js";import"./iconBase-6aac7060.js";const R=y({"0%":{backgroundPosition:"0% 0%"},"100%":{backgroundPosition:"-135% 0%"}}),B=i("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",w:"100%",">button:last-child":{mt:"40px",h:"40px",w:"220px",".button":{fs:"24px",h:"40px",w:"100%"}},"@md":{py:"40px"},"@sm":{px:"0px"}}),z=i("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",h:"165px",w:"100%",zIndex:1,img:{zIndex:-1,position:"absolute",h:"165px",w:"100%",objectFit:"cover",inset:0}}),N=i("h2",{d:"flex",align:"center",justify:"center",color:"$white500",fs:"40px",ff:"$heading",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.5)",w:"100%","@sm":{fs:"24px"}}),D=i("div",{d:"flex",align:"flex-start",justify:"center",flexWrap:"wrap",padding:"40px 160px",gap:"20px 50px",w:"100%","@sm":{padding:"40px"},"@xsm":{padding:"10px"}});i("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%",maxW:"640px",gap:"10px",padding:"40px",br:"11px",border:"1px solid #F4F4F4",background:"rgba(0, 0, 0, 0.75)","@sm":{my:"10px",direction:"column",padding:"10px 20px",">button":{order:-1}}});i("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%",gap:"10px",">div":{w:"100%",label:{w:"100%",ml:"20px",justify:"flex-start"},">div":{br:"10px",bg:"rgba(255, 255, 255, 0.54)",borderWidth:"3px",borderColor:"#FFCE1F","&:hover":{borderColor:"#FFCE1F"},"&:not(:has(input:placeholder-shown))":{borderColor:"#FFCE1F"}},textarea:{br:"10px",bg:"rgba(255, 255, 255, 0.54)",borderWidth:"3px",borderColor:"#FFCE1F","&:hover":{borderColor:"#FFCE1F"},"&:not(:has(input:placeholder-shown))":{borderColor:"#FFCE1F"}}},".select":{w:"550px",position:"relative",">button":{w:"100%"},"[data-radix-popper-content-wrapper]":{width:"inherit"}},".textarea":{br:"10px",minH:"200px",maxW:"100%",minW:"100%",bg:"rgba(255, 255, 255, 0.54)",borderWidth:"3px",borderColor:"#FFCE1F"},"@md":{">div":{maxW:"100%",minW:"100%"}},"@sm":{".select":{w:"100%",position:"relative",">button":{maxW:"100%"},"[data-radix-popper-content-wrapper]":{width:"320px"}}}});i("div",{d:"flex",justify:"flex-start",align:"center",gap:"10px",w:"100%",p:{ff:"$heading",fs:"32px",color:"$white500"},"@sm":{img:{w:"40px"},p:{fs:"20px"}}});i("div",{d:"flex",align:"center",justify:"center",gap:"10px",width:"100%",">button":{width:"100%",minW:"unset",height:"50px",bg:"linear-gradient(170deg, #00BAFF -32.19%, #358CAC 116.49%)",br:"10px",color:"$white500",fs:"18px",fw:"$bold",ff:"$body"},"@sm":{}});const P=i("div",{d:"flex",align:"center",justify:"center",w:"100%",mt:"20px",gap:"20px",padding:"40px 20px",br:"11px",border:"1px solid #F4F4F4",background:"rgba(0, 0, 0, 0.75)",color:"$white500",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.9)",ff:"$heading",fs:"40px","@sm":{fs:"26px"}}),Q=i("div",{mt:"10px",w:"100%",height:"200px",background:"linear-gradient( -90deg, rgba(3, 16, 32, 0.40), rgba(3, 16, 32, 0.75) ,rgba(3, 16, 32, 0.40))",br:"10px",backgroundSize:"400% 400%",animation:`${R} 1.2s ease-in-out infinite`}),L=i("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%",maxW:"640px",gap:"10px",padding:"40px",br:"11px",border:"1px solid #F4F4F4",background:"rgba(0, 0, 0, 0.75)","@sm":{my:"10px",direction:"column",padding:"10px 20px",">button":{order:-1}}}),H=i("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%",gap:"10px",">div":{w:"100%",label:{w:"100%",ml:"20px",justify:"flex-start"},">div":{br:"10px",bg:"rgba(255, 255, 255, 0.54)",borderWidth:"3px",borderColor:"#FFCE1F","&:hover":{borderColor:"#FFCE1F"},"&:not(:has(input:placeholder-shown))":{borderColor:"#FFCE1F"}},textarea:{br:"10px",bg:"rgba(255, 255, 255, 0.54)",borderWidth:"3px",borderColor:"#FFCE1F","&:hover":{borderColor:"#FFCE1F"},"&:not(:has(input:placeholder-shown))":{borderColor:"#FFCE1F"}}},".select":{w:"550px",position:"relative",">button":{w:"100%"},"[data-radix-popper-content-wrapper]":{width:"inherit"}},".textarea":{br:"10px",minH:"200px",maxW:"100%",minW:"100%",bg:"rgba(255, 255, 255, 0.54)",borderWidth:"3px",borderColor:"#FFCE1F"},"@md":{">div":{maxW:"100%",minW:"100%"}},"@sm":{".select":{w:"100%",position:"relative",">button":{maxW:"100%"},"[data-radix-popper-content-wrapper]":{width:"320px"}}}}),J=i("div",{d:"flex",justify:"flex-start",align:"center",gap:"10px",w:"100%",p:{ff:"$heading",fs:"32px",color:"$white500"},"@sm":{img:{w:"40px"},p:{fs:"20px"}}}),O=i("div",{d:"flex",align:"center",justify:"center",gap:"10px",width:"100%",">button":{width:"100%",minW:"unset",height:"50px",bg:"linear-gradient(170deg, #00BAFF -32.19%, #358CAC 116.49%)",br:"10px",color:"$white500",fs:"18px",fw:"$bold",ff:"$body"},"@sm":{}}),U=async()=>await v({options:{code:p.MEMBERS_MC,index_position:1,limit:"10000",scope:p.MEMBERS_MC,table:j.REASONS}}),q=()=>E({queryKey:[T.REASONS],queryFn:()=>I(),staleTime:1e3*60*60});async function I(){try{const e=await U();if(!e)return null;const t=K(e);return[{label:"Custom",value:"custom",index:-1,title:"",flag_reason:""},...t]}catch(e){return console.log(e),null}}function K(e){return e.map(t=>({...t,label:t.title,value:t.flag_reason}))}async function Y(e,t){const{executeTransaction:a}=b(),n=G(e,t);return!!await a(n)}function G(e,t){return{actions:[{account:p.MEMBERS_MC,name:"trialupg",authorization:[{actor:e.name,permission:e.authorization.permission}],data:{wallet:e.name,member:t}}]}}async function V(e,t){const{executeTransaction:a}=b(),n=X(e,t);return!!await a(n)}function X(e,t){return{actions:[{account:p.MEMBERS_MC,name:"trialdelay",authorization:[{actor:e.name,permission:e.authorization.permission}],data:{wallet:e.name,member:t,days:30}}]}}async function Z(e,t,a){const{executeTransaction:n}=b(),s=ee(e,t,a);return!!await n(s)}function ee(e,t,a){return{actions:[{account:p.MEMBERS_MC,name:"memberflag",authorization:[{actor:e.name,permission:e.authorization.permission}],data:{wallet:e.name,member:t,reason:a}}]}}const te=e=>{const{data:t,isLoading:a}=q(),n=m.useRef(null),s=S(o=>o.user),[l,g]=W.useState(t==null?void 0:t[0]);m.useEffect(()=>{g(t==null?void 0:t[0])},[t]);function f(o){if(!o)return;const c=n==null?void 0:n.current;((o==null?void 0:o.index)??-1)>=0?c.value=o==null?void 0:o.flag_reason:c.value="",g(o)}async function h(o){if(!s)return;await Y(s,o)&&(await u(1e3),await x(),d.success("Approved"))}async function w(o){if(!s)return;await V(s,o)&&(await u(1e3),await x(),d.success("Delayed"))}async function F(o){if(!s)return;const c=n==null?void 0:n.current;if(!c||!c.value){d.warn("Please enter a reason");return}const C=c.value;await Z(s,o,C)&&(await u(1e3),await x(),d.success("Flagged"))}return r.jsxs(L,{children:[r.jsxs(H,{children:[r.jsxs(J,{children:[r.jsx("p",{children:e.wallet}),r.jsx("a",{href:`https://atomichub.io/profile/wax-mainnet/${e.wallet}`,target:"_blank",rel:"noreferrer",children:r.jsx("img",{src:"./assets/icons/atomic.png",alt:""})}),r.jsx("a",{href:`https://waxblock.io/account/${e.wallet}`,target:"_blank",rel:"noreferrer",children:r.jsx("img",{src:"./assets/icons/cube.png",alt:""})})]}),r.jsx(A,{borderColor1:"#FFB31F",borderColor2:"#FFB800",label:"",className:"select",title:"",isLoading:a,selected:l,options:t,onSelected:o=>f(o)}),r.jsx(k,{className:"textarea",label:"",ref:n,disabled:((l==null?void 0:l.index)??-1)>=0})]}),r.jsxs(O,{children:[r.jsx("button",{color:"gradientPink",onClick:()=>h(e.wallet),children:"Approve"}),r.jsx("button",{color:"gradientPink",onClick:()=>w(e.wallet),children:"Delay"}),r.jsx("button",{color:"gradientPink",onClick:()=>F(e.wallet),children:"Flag"})]})]},e.wallet)},fe=()=>{const{data:e,isLoading:t}=$(),a=e==null?void 0:e.filter(n=>n.trial&&!n.flagged&&_(M,new Date(n.next_review)));return r.jsxs(B,{children:[r.jsxs(z,{children:[r.jsx(N,{children:"Applications"}),r.jsx("img",{src:"/assets/background/bg-applications.jpeg",alt:""})]}),r.jsx(D,{children:t?r.jsx(Q,{}):a&&a.length>0?a==null?void 0:a.map(n=>m.createElement(te,{...n,key:n.wallet})):r.jsx(P,{children:"No applications"})})]})};export{fe as default};
