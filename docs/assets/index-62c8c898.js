import{s as r,e as y,u as b,m as v,aE as S,b as T,R as x,ax as m,aH as g,j as e,B as k,aK as C,az as L,k as _}from"./index-a74e6323.js";import{C as O}from"./index-91546547.js";import{P as E}from"./index.esm-46702c48.js";const M=r("div",{d:"flex",align:"flex-start",justify:"center",direction:"column",mt:"35px",w:"100%"}),N=r("h2",{d:"flex",align:"center",justify:"center",fs:"20px",color:"$white500"}),R=r("p",{d:"flex",align:"center",justify:"flex-start",gap:"30px",mb:"15px",w:"100%",mt:"25px",color:"$white500",bg:"rgba(255, 255, 255, 0.05)",padding:"20px",br:"10px",ff:"$heading",span:{d:"flex",align:"center",justify:"center",w:"100%",textAlign:"center",fw:"400",fs:"20px"},"@sm":{justify:"center",flexWrap:"wrap",gap:"0px",padding:"0px 10px 20px",svg:{w:"80px"},span:{fs:"16px"}}}),B=r("div",{d:"flex",align:"center",justify:"flex-start",flexWrap:"wrap",gap:"25px",mt:"15px",w:"100%","@sm":{justify:"center"}}),I=r("div",{d:"flex",align:"center",justify:"center",direction:"column",gap:"5px",mt:"auto",w:"100%",button:{w:"100%",maxW:"160px",h:"25px",minW:"unset",">div":{border:"none"}}}),P=r("div",{d:"flex",align:"center",justify:"center",direction:"column",gap:"5px",m:"5px 0 10px",w:"100%"}),p=r("div",{d:"flex",align:"center",justify:"space-between",gap:"10px",px:"20px",w:"100%",svg:{w:"20px",h:"20px"}}),c=r("p",{d:"flex",align:"center",justify:"center",color:"$white500",textShadow:"2px 1px 4px rgba(0, 0, 0)",fs:"14px",ff:"$heading",fw:"400"}),W=y({"0%":{backgroundPosition:"0% 0%"},"100%":{backgroundPosition:"-135% 0%"}}),A=r("div",{width:"174px",height:"259px",background:"linear-gradient( -90deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.25) ,rgba(255, 255, 255, 0.15))",br:"10px",backgroundSize:"400% 400%",animation:`${W} 1.2s ease-in-out infinite`,"@sm":{width:"70px",height:"100px"}});async function $(s,l){const{executeTransaction:n}=b(),d=U(s,l);return!!await n(d)}function U(s,l){return{actions:[{account:"atomicassets",name:"transfer",authorization:[{actor:s.name,permission:s.requestPermission}],data:{from:s.name,memo:"staking",to:"tools.mc",asset_ids:l}}]}}const Y=()=>{const{data:s,isLoading:l}=v("tool.worlds",!0),{data:n}=S(),d=T(t=>t.user),[u,w]=x.useState([]),[f,h]=x.useState(!1);async function j(t){if(d){h(!0);try{await $(d,[Number(t.asset_id)])&&(await C(),await L("tool.worlds"),_.success("Tool staked"))}catch(a){console.error("Error staking tool",a)}finally{h(!1)}}}return x.useEffect(()=>{var t;if(s){const a=(t=s.filter(i=>n==null?void 0:n.some(o=>o.template_id===Number(i.template.template_id))).map(i=>({asset_id:i.asset_id,...i.data,...n==null?void 0:n.find(o=>o.template_id===Number(i.template.template_id))})))==null?void 0:t.sort((i,o)=>m[i.rarity]-m[o.rarity]||g[i.shine]-g[o.shine]);w(a)}},[n,s]),e.jsxs(M,{children:[e.jsx(N,{children:"EARN PASSIVE TLM FROM STAKING YOUR TOOLS WHILE YOU DO NOT USE THEM"}),e.jsxs(R,{children:[e.jsx(E,{color:"#fff",size:100}),e.jsx("span",{children:"Going to bed? Not there for a weekend or even on vacation? Stake your tools to Mission Control where other players can mine with them and you gain TLM passively. The mined TLM is split between you (the lender), the miner (the loaner) and Mission Control (facilitator and CPU provider)."})]}),e.jsx(B,{children:l?new Array(6).fill(0).map((t,a)=>e.jsx(A,{},a)):u.map((t,a)=>e.jsx(O,{showNumberBracket:!0,tool:t,children:e.jsxs(I,{children:[e.jsx(k,{disabled:f,isLoading:f,onClick:()=>j(t),rounded:!1,color:"solidBlue",children:"Stake"}),e.jsxs(P,{children:[e.jsxs(p,{children:[e.jsx(c,{children:"You"}),e.jsxs(c,{children:[t.owner_share/10,"%"]})]}),e.jsxs(p,{children:[e.jsx(c,{children:"Miner"}),e.jsxs(c,{children:[t.renter_share/10,"%"]})]}),e.jsxs(p,{children:[e.jsx(c,{children:"MC"}),e.jsxs(c,{children:[t.mc_share/10,"%"]})]})]})]})},a))})]})};export{Y as default};
