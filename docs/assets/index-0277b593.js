import{e as A,s as r,c as C,r as D,S as p,T as L,a as P,Q as k,u as S,af as I,n as E,b as g,f as x,j as e,I as M,B as h,ah as j,k as z}from"./index-acdde9c5.js";import{I as R}from"./info-builder-1eaeb245.js";import{S as W}from"./index-ecd18b9e.js";import"./index.esm-34220b0d.js";import"./index-6da53bd2.js";import"./index-3f669acb.js";import"./index-7a1571dd.js";import"./gradient-border-7dc49660.js";const N=A({"0%":{backgroundPosition:"0% 0%"},"100%":{backgroundPosition:"-135% 0%"}}),B=r("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%","@sm":{padding:"0 15px"}}),F=r("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",h:"165px",w:"100%",zIndex:1,img:{zIndex:-1,position:"absolute",h:"165px",w:"100%",objectFit:"cover",inset:0}}),q=r("h2",{d:"flex",align:"center",justify:"center",color:"$white500",fs:"40px",ff:"$heading",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.5)",w:"100%","@sm":{fs:"24px"}}),U=r("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%",maxW:"1302px",">button":{mt:"40px",h:"50px",w:"240px",div:{fs:"15px",border:"none"}},"@md":{d:"flex",flexWrap:"wrap"}}),Q=r("div",{d:"flex",align:"center",justify:"center",gap:"10px",mt:"30px",w:"100%",padding:"20px",br:"8px",bg:"rgba(255, 255, 255, 0.09)",svg:{color:"$white500",w:"50px",h:"50px",mr:"auto"},"@sm":{d:"none"}}),O=r("span",{w:"100%",color:"$white500",fs:"16px",ff:"$heading",a:{color:"$yellow500",textDecoration:"underline"},"@lg":{fs:"12px"},"@md":{fs:"10px"},"@sm":{}}),V=r("div",{d:"flex",align:"center",justify:"center",direction:"column"}),Y=r("h2",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",w:"100%",mt:"30px",mb:"10px",color:"$white500",fs:"20px",ff:"$body",fw:"$thin"}),G=r("div",{d:"flex",align:"flex-start",justify:"flex-start",gap:"20px","@xsm":{flexWrap:"wrap"}}),K=r("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",w:"30%",gap:"20px",img:{w:"100%",objectFit:"contain",br:"10px"},"@xsm":{w:"100%"}}),H=r("div",{d:"flex",align:"center",justify:"center",direction:"column",gap:"2px",w:"100%"}),w=r("div",{d:"flex",align:"center",justify:"center",w:"100%",gap:"2px",span:{bg:"rgba(255, 255, 255, 0.02)",w:"100%",color:"$white500",fs:"16px",ff:"$body",fw:"$thin",textAlign:"center"}}),J=r("div",{d:"flex",align:"center",justify:"space-between",direction:"column",gap:"20px",w:"70%",minH:"312px",padding:"40px 20px 15px 20px",bg:"rgba(255, 255, 255, 0.02)","@xsm":{w:"100%"}}),X=r("p",{d:"flex",align:"center",justify:"center",direction:"column",color:"$white500",fs:"16px",ff:"$heading",textAlign:"center"}),Z=r("div",{d:"flex",align:"center",justify:"space-between",w:"100%",">button":{h:"50px",w:"240px",div:{fs:"15px",border:"none"}},"@md":{justify:"center",flexWrap:"wrap"}}),ee=r("div",{d:"flex",align:"center",justify:"center",gap:"5px",">button":{h:"50px",w:"240px",div:{fs:"15px",border:"none"}},">div>button":{minWidth:"170px"},"@md":{flexWrap:"wrap"}});r("div",{mt:"10px",w:"100%",height:"200px",background:"linear-gradient( -90deg, rgba(3, 16, 32, 0.40), rgba(3, 16, 32, 0.75) ,rgba(3, 16, 32, 0.40))",br:"10px",backgroundSize:"400% 400%",animation:`${N} 1.2s ease-in-out infinite`});const f=[{label:"Eyeke",value:"eyeke"},{label:"Kavian",value:"kavian"},{label:"Magor",value:"magor"},{label:"Naron",value:"naron"},{label:"Neri",value:"nerix"},{label:"Veles",value:"veles"}];C((n,o)=>({sponsorFilters:f,setSponsorFilters:s=>{n({sponsorFilters:s})}}));const ne=async()=>await D.get_table_rows({code:p.ADVENTURE_MC,index_position:1,limit:"10000",scope:p.ADVENTURE_MC,table:L.predefs}),te=()=>P({queryKey:[k.SponsorAdv],queryFn:se,staleTime:1e3*60*60});async function se(){try{const n=await ne();return n!=null&&n.rows?n.rows.sort((s,i)=>((s==null?void 0:s.point_cost)||0)<((i==null?void 0:i.point_cost)||0)||(s.predefid||0)<(i.predefid||0)?1:-1):[]}catch(n){return console.log(n),[]}}async function oe(n,o){const{executeTransaction:s}=S(),i=re(n,o);return!!await s(i)}function re(n,o){return{actions:[{account:p.ALIEN_WORLDS,name:"transfer",authorization:[{actor:o.name,permission:o.requestPermission}],data:{from:o.name,to:"adventure.mc",memo:`adventure,${n}`,quantity:"5000 TLM"}}]}}async function ie(n){const{executeTransaction:o,serializeActions:s}=S(),i=await s([{account:p.ALIEN_WORLDS,name:"transfer",authorization:[{actor:`${n.selectedPlanet}.dac`,permission:"active"}],data:{from:`${n.selectedPlanet}.dac`,to:"adventure.mc",memo:`adventure,${n.preDef.predefid}`,quantity:"5000.0000 TLM"}}]),l=ae(n,i);return!!await o(l)}function ae(n,o){return{actions:[{account:p.MSIG_WORLDS,name:"propose",authorization:[{actor:n.user.name,permission:n.user.requestPermission}],data:{proposer:n.user.name,proposal_name:Math.random().toString(36).replace(/[^a-z1-5]+/g,"").substring(0,12),requested:[{actor:`${n.selectedPlanet}.dac`,permission:"active"}],dac_id:n.selectedPlanet,metadata:[{key:"title",value:"Sponsoring Mission Control adventure"},{key:"description",value:`Sponsoring adventure ${n.preDef.title} for Mission Control. Play Mission Control on https://waxmissioncontrol.io`}],trx:{expiration:I(E,7),ref_block_num:0,ref_block_prefix:0,max_net_usage_words:0,max_cpu_usage_ms:0,delay_sec:0,context_free_actions:[],actions:o,transaction_extensions:[]}}}]}}const ge=()=>{const{data:n}=te(),o=g(t=>t.user),[s,i]=x.useState(void 0),[l,d]=x.useState(!1),[b,y]=x.useState(1);function _(t,c){const a={...s,[t]:c};i(a)}async function T(t){var c;if(o)try{d(!0);const a={user:o,preDef:t,selectedPlanet:((c=s==null?void 0:s[t.predefid])==null?void 0:c.value)||f[0].value};if(console.log(a),await ie(a)){const $=await j(o.name);g.setState(m=>({...m,user:m.user?{...m.user,userTlm:$}:null}))}}catch(a){console.log(a)}finally{d(!1)}}async function v(t){if(o)try{if(d(!0),await oe(t,o)){const a=await j(o.name);g.setState(u=>({...u,user:u.user?{...u.user,userTlm:a}:null})),z.success("Adventure sponsored. Thank you!")}}catch(c){console.log(c)}finally{d(!1)}}return e.jsx(x.Suspense,{children:e.jsxs(B,{children:[e.jsxs(F,{children:[e.jsx(q,{children:"Sponsor an adventure"}),e.jsx("img",{src:"/assets/background/bg-sponsor-adventures.jpeg",alt:""})]}),e.jsxs(U,{children:[e.jsxs(Q,{children:[e.jsx(R,{}),e.jsxs(O,{children:["- Sponsoring an adventure increases the prize pool over the coming weeks ",e.jsx("br",{})," - You will be shown in the “latest sponsors” section ",e.jsx("br",{})," - Sponsoring an adventure is non-refundable ",e.jsx("br",{})," - You can contribute to the prize pool directly by sending TLM to pool.mc",e.jsx("br",{}),"- If you want a customized adventure, please contact the team in Discord"]})]}),n==null?void 0:n.map((t,c)=>c+1>b*10?null:e.jsxs(V,{children:[e.jsx(Y,{children:t.title}),e.jsxs(G,{children:[e.jsxs(K,{children:[e.jsx("img",{src:`${M}/ipfs/${t==null?void 0:t.image}`,alt:t.title}),e.jsxs(H,{children:[e.jsxs(w,{children:[e.jsx("span",{children:"Duration"}),e.jsxs("span",{children:[t.duration_hours/24," Days"]})]}),e.jsxs(w,{children:[e.jsx("span",{children:"MC Point Entry Cost"}),e.jsx("span",{children:t.point_cost.toLocaleString("en-US")})]}),e.jsxs(w,{children:[e.jsx("span",{children:"Total Reward Points"}),e.jsx("span",{children:t.reward_qp.toLocaleString("en-US")})]})]})]}),e.jsxs(J,{children:[e.jsx(X,{children:t.flavor}),e.jsxs(Z,{children:[e.jsx(h,{disabled:l,isLoading:l,onClick:()=>v(t.predefid),rounded:!1,color:"solidBlue",children:"Sponsor for 5,000 TLM"}),e.jsxs(ee,{children:[e.jsx(h,{disabled:l,isLoading:l,onClick:()=>T(t),rounded:!1,color:"solidBlue",children:"Create Proposal"}),e.jsx(W,{borderColor1:"#D9D9D9",borderColor2:"#D9D9D9",className:"select",title:"",selected:(s==null?void 0:s[t==null?void 0:t.predefid])||f[0],options:f,onSelected:a=>_(t.predefid,a)})]})]})]})]})]},t.predefid)),b<=((n==null?void 0:n.length)??0)/10&&e.jsx(h,{rounded:!1,color:"solidBlue",onClick:()=>y(t=>t+1),children:"Load More"})]})]})})};export{ge as default};
