import{s as c,S as v,R as f,_ as k,b as h,j as i,f as t,B as T,m as g}from"./index-d7e59bbb.js";import{d as D,u as I,a as w}from"./use-transaction-4bec9fef.js";import{I as j}from"./index-392369b2.js";import{s as b}from"./sleep-da79c358.js";import"./user-miners-query-204cffef.js";import"./axios-45629df5.js";import"./index.esm-c9dc87d1.js";import"./iconBase-e91f5b6e.js";const S=c("div",{d:"flex",align:"flex-start",justify:"center",direction:"column",mt:"35px",w:"100%"}),A=c("h2",{d:"flex",align:"center",justify:"center",fs:"20px",mb:"15px",color:"$white500"}),y=c("p",{d:"flex",align:"center",justify:"flex-start",gap:"5px",mb:"5px",w:"100%",color:"$white500",ff:"$heading",fs:"20px","@sm":{flexWrap:"wrap"}}),L=c("span",{ff:"$heading",fw:"$bold",fs:"20px",variants:{color:{red:{color:"#E52251"},green:{color:"#00FF00"}}},"@sm":{fs:"16px"}}),B=c("div",{d:"flex",align:"center",justify:"flex-start",flexWrap:"wrap",gap:"25px",mt:"15px",w:"100%","@sm":{justify:"center"}}),M=c("div",{d:"flex",align:"flex-end",justify:"center",gap:"10px",w:"100%",">div":{w:"100%",label:{w:"100%",justifyContent:"left",mb:"5px"}},button:{align:"flex-end",w:"160px",minW:"unset",maxW:"90%",padding:"0",">div":{minH:"40px",border:"none"}},"@md":{fs:"10px",">div":{maxW:"100%"}}}),E=c("div",{d:"flex",align:"center",gap:"10px",br:"10px",bg:"rgba(255,255,255,0.03)",padding:"20px 20px ",mt:"20px",w:"100%",svg:{color:"$white500",w:"35px",h:"35px"}}),N=c("span",{color:"$white500",textAlign:"center",fs:"14px",ff:"$heading","@lg":{fs:"12px"},"@md":{fs:"10px"}});async function z(e,r){const{executeTransaction:a}=D(),o=F(e,r);return!!await a(o)}function F(e,r){return{actions:[{account:v.ALIEN_WORLDS,name:"transfer",authorization:[{actor:e.name,permission:e.authorization.permission}],data:{from:e.name,memo:"deposit",to:"tools.mc",quantity:`${r.toFixed(4)} TLM`}}]}}async function O(e,r){const{executeTransaction:a}=D(),o=P(e,r);return!!await a(o)}function P(e,r){return{actions:[{account:v.TOOLS_MC,name:"claim",authorization:[{actor:e.name,permission:e.authorization.permission}],data:{wallet:e.name,tokens:`${r.toFixed(4)} TLM`}}]}}const Q=f.lazy(()=>k(()=>import("./info-builder-aa03d95e.js"),["assets/info-builder-aa03d95e.js","assets/index-d7e59bbb.js","assets/index-55fec1ff.css"])),Y=()=>{var x,m;const{data:e}=I(),r=h(n=>n.user),a=h(n=>n.updateTLM),o=f.useRef(null),s=f.useRef(null),[u,p]=f.useState(!1);async function l(){var n;if(r){p(!0);try{await z(r,Number((n=o.current)==null?void 0:n.value))&&(await b(2e3),await w(),await a(),g.success("Deposit successful"))}catch(d){console.error("Error staking tool",d)}finally{p(!1)}}}async function $(){var n;if(r){p(!0);try{await O(r,Number((n=s.current)==null?void 0:n.value))&&(await b(2e3),await w(),await a(),g.success("Withdraw successful"))}catch(d){console.error("Error staking tool",d)}finally{p(!1)}}}function R(){s.current.value=t(e==null?void 0:e.deposit).toFixed(4)}const _=n=>{if(t(n==null?void 0:n.deposit)===0&&t(n==null?void 0:n.trialtlm)>0)return"red";if(t(n==null?void 0:n.deposit)>=0)return"green"},C=n=>{if(t(n==null?void 0:n.deposit)===0&&t(n==null?void 0:n.trialtlm)>0)return`- ${t(n==null?void 0:n.trialtlm)}`;if(t(n==null?void 0:n.deposit)>=0)return t(n==null?void 0:n.deposit)};return i.jsxs(S,{children:[i.jsx(A,{children:"Deposited TLM"}),i.jsxs(y,{children:["Deposited TLM:"," ",i.jsxs(L,{style:{cursor:"pointer"},onClick:R,color:_(e),children:[C(e)," TLM"," ",t(e==null?void 0:e.deposit)<0&&t(e==null?void 0:e.trialtlm)>0&&"(Deposit more TLM)"]})]}),i.jsxs(y,{children:["Available TLM:"," ",i.jsx(L,{color:(Number((x=r==null?void 0:r.userTlm)==null?void 0:x.balance)??0)>=0?"green":"red",children:`${(m=r==null?void 0:r.userTlm)==null?void 0:m.balance} TLM`})]}),i.jsxs(B,{children:[i.jsxs(M,{children:[i.jsx(j,{ref:o,label:"Deposit TLM"}),i.jsx(T,{isLoading:u,disabled:u,onClick:l,rounded:!1,color:"solidBlue",children:"Deposit"})]}),i.jsxs(M,{children:[i.jsx(j,{ref:s,label:"Withdraw TLM"}),i.jsx(T,{isLoading:u,disabled:u,onClick:$,rounded:!1,color:"solidBlue",children:"Withdraw"})]})]}),i.jsxs(E,{children:[i.jsx("a",{href:"https://medium.com/p/3cea7a66ce77",target:"_blank",rel:"noreferrer",children:i.jsx(Q,{})}),i.jsx(N,{children:"The Trilium you earn from your referrals using Tool Loaning is automatically added to your deposit."})]})]})};export{Y as default};
