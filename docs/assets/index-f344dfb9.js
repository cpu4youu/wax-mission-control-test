import{e as S,a as r,g as $,S as _,T as y,u as A,Q as E,z as j,f as L,i as W,j as e,I as k,A as m}from"./index-eb60d4d1.js";import{c as I}from"./index-a820c2d4.js";S({"0%":{backgroundPosition:"0% 0%"},"100%":{backgroundPosition:"-135% 0%"}});const M=r("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%","@sm":{padding:"0 15px"}}),R=r("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",h:"165px",w:"100%",zIndex:1,img:{zIndex:-1,position:"absolute",h:"165px",w:"100%",objectFit:"cover",inset:0}}),B=r("h2",{d:"flex",align:"center",justify:"center",color:"$white500",fs:"40px",ff:"$heading",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.5)",w:"100%","@sm":{fs:"24px"}}),O=r("div",{d:"flex",align:"center",justify:"center",w:"100%",maxW:"1250px",mx:"auto",my:"20px",svg:{cursor:"pointer",mr:"auto"}}),P=r("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%",maxW:"1250px","@md":{d:"flex",flexWrap:"wrap"}}),Q=r("h2",{color:"$white500",fs:"24px",ff:"$heading",mr:"auto"}),Y=r("div",{d:"grid",gap:"5px",mt:"20px",w:"100%",maxW:"1250px"}),z=r("div",{d:"grid",gap:"5px",maxH:"9%",overflowY:"auto",w:"100%",maxW:"1250px"}),F=r("div",{d:"grid",gridTemplateColumns:"repeat(4, 1fr) 3fr",w:"100%",h:"37px",maxW:"1250px",bg:"rgba(0, 0, 0, 0.27)",px:"20px",span:{d:"flex",align:"center",justify:"flex-start",color:"#797979",fs:"16px",fw:"bold",ff:"$heading"},"@sm":{gridTemplateColumns:"repeat(4, 1fr)",gap:"10px",span:{fs:"12px","&:last-child":{d:"none"}}}}),H=r("div",{d:"grid",gridTemplateColumns:"repeat(4, 1fr) 3fr",h:"55px",w:"100%",maxW:"1250px",bg:"rgba(72, 150, 222, 0.27)",px:"20px",mb:"15px",span:{d:"flex",align:"center",justify:"flex-start",color:"white",fs:"16px",fw:"bold",ff:"$heading"},"@sm":{gridTemplateColumns:"repeat(4, 1fr)",gap:"10px",span:{fs:"12px","&:last-child":{d:"none"}}}}),N=r("div",{d:"grid",gridTemplateColumns:"repeat(4, 1fr) 3fr",h:"55px",w:"100%",maxW:"1250px",bg:"rgba(0, 0, 0, 0.27)",px:"20px",span:{d:"flex",align:"center",justify:"flex-start",color:"#797979",fs:"16px",fw:"bold",ff:"$heading"},"@sm":{gridTemplateColumns:"repeat(4, 1fr)",gap:"10px",span:{fs:"12px","&:last-child":{d:"none"}}}}),T=r("div",{d:"flex",gap:"5px","@sm":{d:"none"}}),h=r("div",{d:"flex",align:"center",justify:"center",direction:"column",img:{objectFit:"cover",br:"10px",w:"37px",h:"37px"},span:{d:"flex",align:"center",justify:"flex-start",mt:"-10px",textShadow:"-1px 0 white, 0 1px white, 1px 0 white, 0 -1px white",color:"black",fs:"16px",fw:"bold",ff:"$heading"}}),q=async()=>await $({options:{code:_.GAME_MC,index_position:3,key_type:"i64",limit:"100",scope:_.GAME_MC,table:y.PLAYERS,reverse:!0}}),D=()=>A({queryKey:[E.LeaderBoard],queryFn:()=>G(),staleTime:1e3*60*60});async function G(){try{const t=await q();return t?K(t):null}catch(t){return console.log(t),null}}async function K(t){return t==null?void 0:t.map(o=>{var f,s,a;(f=o.buildings)==null||f.sort((l,g)=>j.findIndex(c=>c.label===l.buildingid)-j.findIndex(c=>c.label===g.buildingid));const d=(s=o.buildings)==null?void 0:s.filter(l=>l.building_type==="production"),v=(a=o.buildings)==null?void 0:a.filter(l=>l.building_type!=="production");return{...o,buildings:{production:d,special:v}}})}const V=()=>{var a,l,g,c;const{data:t,isLoading:o}=D(),{data:d,isLoading:v}=L();function f(){I.setState(n=>({...n,selectedProduction:null}))}const s=W.useMemo(()=>{var x,p,i;if(!d)return;(x=d==null?void 0:d.buildings)==null||x.sort((u,C)=>j.findIndex(w=>w.label===u.buildingid)-j.findIndex(w=>w.label===C.buildingid));const n=(p=d.buildings)==null?void 0:p.filter(u=>u.building_type==="production"),b=(i=d.buildings)==null?void 0:i.filter(u=>u.building_type!=="production");return{...d,buildings:{production:n,special:b}}},[]);return e.jsxs(M,{children:[e.jsxs(R,{children:[e.jsx(B,{children:"Outpost Builder"}),e.jsx("img",{src:"/assets/background/bg-mcp-builder.jpeg",alt:""})]}),e.jsx(O,{children:e.jsx(k,{onClick:f,color:"white",size:30})}),e.jsxs(P,{children:[e.jsx(Q,{children:"SEASON LEADERBOARD"}),e.jsxs(Y,{children:[e.jsxs(F,{children:[e.jsx("span",{children:"Rank"}),e.jsx("span",{children:"Wallet"}),e.jsx("span",{children:"Building Score"}),e.jsx("span",{children:"Ð¯ / min"}),e.jsx("span",{children:"Buildings"})]}),e.jsxs(H,{children:[e.jsx("span",{children:"Your Score"}),e.jsx("span",{children:s==null?void 0:s.wallet}),e.jsx("span",{children:m((s==null?void 0:s.score_building)||0)}),e.jsx("span",{children:m((s==null?void 0:s.gamecurrency_per_minute)||0,3)}),e.jsxs(T,{children:[(l=(a=s==null?void 0:s.buildings)==null?void 0:a.production)==null?void 0:l.map(n=>e.jsxs(h,{children:[e.jsx("img",{src:`/assets/mcp/${n==null?void 0:n.buildingid}.png`,alt:""}),e.jsx("span",{children:n.building_level===0?"-":n.building_level})]},n.buildingid)),(c=(g=s==null?void 0:s.buildings)==null?void 0:g.special)==null?void 0:c.map(n=>e.jsxs(h,{children:[e.jsx("img",{src:`/assets/mcp/${n==null?void 0:n.buildingid}.png`,alt:""}),e.jsx("span",{children:n.building_level===0?"-":n.building_level})]},n.buildingid))]})]}),e.jsx(z,{children:t==null?void 0:t.map((n,b)=>{var x,p;return e.jsxs(N,{children:[e.jsx("span",{children:b+1}),e.jsx("span",{children:n.wallet}),e.jsx("span",{children:m(n.score_building)}),e.jsx("span",{children:m((n==null?void 0:n.gamecurrency_per_minute)||0,3)}),e.jsxs(T,{children:[(x=n.buildings.production)==null?void 0:x.map(i=>e.jsxs(h,{children:[e.jsx("img",{src:`/assets/mcp/${i==null?void 0:i.buildingid}.png`,alt:""}),e.jsx("span",{children:i.building_level===0?"-":i.building_level})]},i.buildingid)),(p=n.buildings.special)==null?void 0:p.map(i=>e.jsxs(h,{children:[e.jsx("img",{src:`/assets/mcp/${i==null?void 0:i.buildingid}.png`,alt:""}),e.jsx("span",{children:i.building_level===0?"-":i.building_level})]},i.buildingid))]})]},n.wallet)})})]})]})]})};export{V as default};
