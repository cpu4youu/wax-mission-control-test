import{S as r}from"./index-32f1a13a.js";import{u as c,g as u}from"./showTlmValueFromMine-3ff75534.js";import{s as m}from"./sleep-da79c358.js";import{u as f}from"./use-transaction-dab29f08.js";async function l(a){const{executeTransaction:n}=f(),t=c.getState().nonce;if(!(t!=null&&t.rand_str))return await u(),!1;const e=t.rand_str,i=await d(a,e);if(!await n(i,!0))return!1;await m(500);const o=c.getState().updateNonce;return o(void 0),!0}async function d(a,n){return{actions:[{account:"cpu.mc",name:"paycpu",authorization:[{actor:a.name,permission:"active"}],data:{wallet:a.name,type:0}},{account:r.M__FEDERATION,name:"mine",authorization:[{actor:a.name,permission:"active"}],data:{miner:a.name,nonce:n,notify:"notify.mc"}}]}}async function g(a,n){if(!n)return l(a);const{executeTransaction:t}=f(),e=c.getState().nonce;if(!(e!=null&&e.rand_str))return await u(),!1;const i=e.rand_str,s=await _(a,i,n),o=await t(s,!0);if(!o)return!1;await m(500);const p=c.getState().updateNonce;return p(void 0),!!o}async function _(a,n,t){return{max_net_usage_words:5e3,actions:[{account:"cpu.mc",name:"paycpu",authorization:[{actor:a.name,permission:"active"}],data:{wallet:a.name,type:1}},{account:r.M__FEDERATION,name:"setland",authorization:[{actor:a.name,permission:"active"}],data:{account:a.name,land_id:t}},{account:r.M__FEDERATION,name:"mine",authorization:[{actor:a.name,permission:"active"}],data:{miner:a.name,nonce:n,notify:"notify.mc"}}]}}export{g as a,l as e};
