import{s as r,e as ue,a as Z,Q as F,V as ee,R as l,_ as S,W as xe,aL as pe,h as _,b as C,j as t,aK as le,aG as fe,B as k,k as R,a1 as we,l as A,O as Y,aI as H}from"./index-d2d73873.js";import{B as he}from"./bolt-1b9b6e22.js";import{u as ge}from"./index-8642a671.js";import{a as je}from"./index.esm-11aa4727.js";import{e as ye,a as be}from"./execute-remove-favorites-land-contract-8e384504.js";import{e as ve}from"./execute-add-favorites-land-contract copy-8675cad2.js";import{u as _e}from"./get-planet-config-cd19fd08.js";import"./info-builder-3eef536c.js";const Se=["Rocky Desert","Grassland","Dormant Volcano","Icy Mountains","Rocky Crater","Sandy Desert","Mountains","Icy Desert","Rocky Coastline","Plains","Methane Swampland","Small Island","Dunes","Tree Forest","Geothermal Springs","Active Volcano","Mushroom Forest","Inland River","Grass Coastline","Sandy Coastline"],Le=r("div",{d:"flex",align:"center",justify:"flex-start",direction:"column",w:"100%",maxW:"1190px",padding:"0 10px",">svg":{mr:"auto",mt:"20px",cursor:"pointer"}}),I=r("h3",{d:"flex",mr:"auto",mt:"25px",gap:"10px",w:"100%",fs:"29px",fw:"$bold",ff:"$heading",color:"$white500","@sm":{fs:"18px",flexWrap:"wrap",span:{w:"100%"}}}),$e=r("div",{d:"flex",align:"center",justify:"flex-start",flexWrap:"wrap",gap:"20px",mt:"30px",mb:"30px",w:"100%","@sm":{justify:"center"}}),Ce=r("button",{d:"flex",align:"center",justify:"flex-start",direction:"column",variants:{isSelected:{true:{filter:"drop-shadow(0 0 0.75rem rgb(0, 186, 255))"}}}}),ke=r("p",{fs:"18px",fw:"$bold",ff:"$heading",color:"$white500",textTransform:"uppercase",mb:"10px"}),Re=r("img",{w:"75px",h:"75px"}),X=r("div",{d:"flex",align:"flex-start",justify:"center",direction:"column",margin:"auto",w:"100%","@md":{d:"flex",padding:"0 20px",flexWrap:"wrap"},"@sm":{align:"center",padding:"0px"}}),Ae=r("div",{d:"flex",align:"center",justify:"flex-start",flexWrap:"wrap",gap:"5px",mt:"15px",w:"100%",maxW:"900px","@md":{d:"flex",padding:"0 20px",flexWrap:"wrap"},"@sm":{justify:"center",padding:"0px"}}),Ie=r("button",{w:"82px",h:"82px",img:{objectFit:"cover",w:"82px",h:"82px"},"&:disabled":{cursor:"not-allowed",opacity:.5,filter:"grayscale(100%)"},variants:{isSelected:{true:{img:{border:"3px solid #00BAFF"}}}}}),T=r("div",{d:"flex",align:"center",justify:"center",gap:"5px",fs:"20px",ff:"$heading",fw:"$bold",color:"$white500",svg:{w:"30px",h:"30px"},"@sm":{}}),Te=r("button",{d:"flex",align:"center",justify:"center",ml:"auto",svg:{w:"30px",h:"30px"},"@sm":{}}),Ve=r("div",{d:"flex",align:"center",justify:"flex-start",gap:"15px",my:"25px",svg:{w:"30px",h:"30px"},"@sm":{flexWrap:"wrap"}}),J=r("div",{d:"flex",align:"center",justify:"center",gap:"5px",fs:"18px",ff:"$heading",fw:"$medium",color:"$white500",input:{padding:"5px",border:"2px solid $white500",br:"5px",h:"40px",w:"55px",maxW:"150px",fs:"18px",ff:"$heading",fw:"$medium","&.owner":{w:"150px"}},"@sm":{}}),We=r("button",{d:"flex",align:"center",justify:"center",ml:"auto",svg:{w:"30px",h:"30px"},"@sm":{}});r("p",{maxW:"900px",mr:"auto",fs:"18px",ff:"$body",fw:"$medium",color:"$white500","@sm":{fs:"18px"}});const Ee=r("div",{d:"flex",align:"center",justify:"flex-start",flexWrap:"wrap",gap:"25px",mt:"15px",w:"100%","@md":{d:"flex",justify:"center",padding:"0 20px"},"@sm":{padding:"0 10px"}}),Ge=r("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",position:"relative",span:{fs:"16px",ff:"$body",color:"$white500"},"@sm":{w:"100%",img:{objectFit:"cover",h:"140px",w:"100%"}}}),Ne=r("div",{d:"flex",align:"flex-start",justify:"flex-start",position:"absolute",fs:"16px",ff:"$heading",fw:"$bold",textShadow:"0px 2px 2px #000",color:"$white500",left:"5px",top:"5px","@sm":{w:"100%"}}),De=r("div",{d:"flex",align:"flex-start",justify:"flex-start",gap:"5px",w:"100%",">button":{h:"45px",w:"100%",maxW:"unset",minW:"unset",padding:"0",br:"10px","&:last-child":{w:"60px"},div:{br:"10px",fs:"16px",border:"none"}},"@sm":{w:"100%",">button":{"&:last-child":{w:"100%"}}}}),V=ue({"0%":{backgroundPosition:"0% 0%"},"100%":{backgroundPosition:"-135% 0%"}}),Oe=r("div",{d:"flex",w:"50%",h:"50px",mt:"10px",background:"linear-gradient( -90deg, rgba(255,255,255, .05), rgba(255,255,255, 0.07) ,rgba(255,255,255, .05))",br:"10px",backgroundSize:"400% 400%",animation:`${V} 1.2s ease-in-out infinite`,"@sm":{h:"60px",w:"100%"}}),ze=r("div",{d:"flex",w:"85%",h:"50px",mt:"10px",background:"linear-gradient( -90deg, rgba(255,255,255, .05), rgba(255,255,255, 0.07) ,rgba(255,255,255, .05))",br:"10px",backgroundSize:"400% 400%",animation:`${V} 1.2s ease-in-out infinite`,"@sm":{h:"120px",w:"100%"}}),Qe=r("div",{d:"flex",w:"240px",h:"220px",background:"linear-gradient( -90deg, rgba(255,255,255, .05), rgba(255,255,255, 0.07) ,rgba(255,255,255, .05))",br:"10px",backgroundSize:"400% 400%",animation:`${V} 1.2s ease-in-out infinite`,"@sm":{w:"100%",h:"240px"}}),Me=n=>Z({queryKey:[n,F.AvailableLands],queryFn:()=>Ue(n),staleTime:1e3*60*60});async function Ue(n){if(!n)return[];try{const{getTemplates:s}=ee;return(await s({collection_name:"alien.worlds",schema_name:"land.worlds",match:n,page:1,limit:100,order:"desc"})).map(h=>{const w=h.immutable_data.name.split(" on ");return{...h.immutable_data,planetName:w[1]||"",landName:w[0]||""}})}catch(s){return console.log(s),[]}}const qe=(n,s)=>Z({queryKey:[n,F.AvailableLands,s],queryFn:()=>Pe(n,s),staleTime:1e3*60*60});async function Pe(n,s){var f,h,w,m;if(!n)return[];try{const{getAssets:j}=ee;let d={collection_name:"alien.worlds",schema_name:"land.worlds",match:n,page:1,limit:1e3};return s!=null&&s.owner&&(d={collection_name:"alien.worlds",schema_name:"land.worlds",owner:s.owner,match:n,page:1,limit:1e3}),(f=s==null?void 0:s.coordinates)!=null&&f.x&&(d={collection_name:"alien.worlds",schema_name:"land.worlds",owner:s==null?void 0:s.owner,"immutable_data:number.x":s.coordinates.x,match:n.split(" on ")[1],page:1,limit:1e3}),(h=s==null?void 0:s.coordinates)!=null&&h.y&&(d={collection_name:"alien.worlds",schema_name:"land.worlds",owner:s==null?void 0:s.owner,"immutable_data:number.y":s.coordinates.y,match:n.split(" on ")[1],page:1,limit:1e3}),(w=s==null?void 0:s.coordinates)!=null&&w.x&&((m=s==null?void 0:s.coordinates)!=null&&m.y)&&(d={collection_name:"alien.worlds",schema_name:"land.worlds",owner:s==null?void 0:s.owner,"immutable_data:number.x":s.coordinates.x,"immutable_data:number.y":s.coordinates.y,match:n.split(" on ")[1],page:1,limit:1e3}),s!=null&&s.template_whitelist&&(d={collection_name:"alien.worlds",schema_name:"land.worlds",template_whitelist:s==null?void 0:s.template_whitelist.join(","),owner:s.owner,match:n,page:1,limit:1e3}),(await j(d)).map(u=>{const p=u.data.name.split(" on ");return{...u.data,assetId:u.asset_id,owner:u.owner,planetName:p[1]||"",landName:p[0]||""}})}catch(j){return console.log(j),[]}}const Be=l.lazy(()=>S(()=>import("./filter-4aa8a8a9.js"),["assets/filter-4aa8a8a9.js","assets/index-d2d73873.js","assets/index-55fec1ff.css"])),Ke=l.lazy(()=>S(()=>import("./search-e14195b0.js"),["assets/search-e14195b0.js","assets/index-d2d73873.js","assets/index-55fec1ff.css"])),Ye=l.lazy(()=>S(()=>import("./hearth-72a2be92.js"),["assets/hearth-72a2be92.js","assets/index-d2d73873.js","assets/index-55fec1ff.css"])),He=l.lazy(()=>S(()=>import("./hearth-broken-987da32d.js"),["assets/hearth-broken-987da32d.js","assets/index-d2d73873.js","assets/index-55fec1ff.css"])),Xe=l.lazy(()=>S(()=>import("./pickaxe-a1fd8b8c.js"),["assets/pickaxe-a1fd8b8c.js","assets/index-d2d73873.js","assets/index-55fec1ff.css"])),rt=()=>{var N,D,O,z,Q;const{data:n}=xe(),{data:s}=_e(),{data:f,isLoading:h}=pe(),w={template_whitelist:(n==null?void 0:n.landName)==="Mountains"?["19546","19530","19510","19496","19478","19463"]:[],owner:"",coordinates:{x:void 0,y:void 0}},[m,j]=_.useState(n==null?void 0:n.planetName),[d,W]=_.useState(n==null?void 0:n.landName),[u,p]=_.useState(!1),[E,te]=_.useState(!1),[L,y]=_.useState(w),c=C(e=>e.user),b=l.useRef(null),v=l.useRef(null),g=l.useRef(null);function se(){ge.setState({selectedPage:"main"})}function oe(e){j(e),y(o=>{var i;return{...o,owner:((i=g.current)==null?void 0:i.value)??""}})}function ne(e){var o,i;W(e),y(e==="Mountains"?{template_whitelist:["19546","19530","19510","19496","19478","19463"],owner:((o=g.current)==null?void 0:o.value)??"",coordinates:{x:void 0,y:void 0}}:{template_whitelist:[],owner:((i=g.current)==null?void 0:i.value)??"",coordinates:{x:void 0,y:void 0}})}function re(){var e,o,i,x,M,U,q,P,B,K;if(d==="Mountains"){y({template_whitelist:["19546","19530","19510","19496","19478","19463"],owner:((e=g.current)==null?void 0:e.value)??"",coordinates:{x:(o=b.current)!=null&&o.value?Number((i=b.current)==null?void 0:i.value):void 0,y:(x=v.current)!=null&&x.value?Number((M=v.current)==null?void 0:M.value):void 0}});return}console.log({selectedLand:d}),y({owner:((U=g.current)==null?void 0:U.value)??"",coordinates:{x:(q=b.current)!=null&&q.value?Number((P=b.current)==null?void 0:P.value):void 0,y:(B=v.current)!=null&&B.value?Number((K=v.current)==null?void 0:K.value):void 0}})}async function ae(e){if(c){p(!0);try{await ye(c,e)&&(await R(1e3),await we(),A.success("Land added to current setup"))}catch(o){console.error(o)}finally{p(!1)}}}async function ie(e){if(c){p(!0);try{if(await ve(c,e)){await R(1e3);const i=await Y(c==null?void 0:c.name);C.setState(x=>({...x,user:x.user?{...x.user,...i}:null})),await H(),A.success("Current Land added to favorites")}}catch(o){console.error(o)}finally{p(!1)}}}async function ce(e){if(c){p(!0);try{if(await be(c,e)){await R(1e3);const i=await Y(c==null?void 0:c.name);C.setState(x=>({...x,user:x.user?{...x.user,...i}:null})),await H(),A.success("Land removed from favorites")}}catch(o){console.error(o)}finally{p(!1)}}}const me=e=>f==null?void 0:f.favoriteLands.some(o=>o.map(({assetId:i})=>i).join(",")===e),{data:$}=Me(m),{data:a,isLoading:G}=qe(`${d} on ${m}`,L),de=e=>{var i;const o=(((i=s==null?void 0:s[(m==null?void 0:m.toLowerCase())||""])==null?void 0:i[1])??0)/100;return e<o?o:e};return t.jsxs(Le,{children:[t.jsx(je,{size:30,color:"#fff",onClick:se}),t.jsx(I,{children:"Planet"}),t.jsx($e,{children:le.map(e=>t.jsxs(Ce,{onClick:()=>oe(e),isSelected:(m==null?void 0:m.toLowerCase())===e,children:[t.jsx(ke,{children:e}),t.jsx(Re,{src:`/assets/planets/${e}.png`,alt:e,title:e})]},e))}),t.jsxs(X,{children:[t.jsx(I,{children:"Land Type"}),t.jsx(Ae,{children:Se.map(e=>t.jsx(Ie,{onClick:()=>ne(e),disabled:!($!=null&&$.some(o=>o.landName===e)),isSelected:d===e,children:t.jsx("img",{src:`/assets/lands/${e}.webp`,alt:e,title:e})},e))})]}),t.jsxs(X,{children:[G?t.jsxs(t.Fragment,{children:[t.jsx(Oe,{}),t.jsx(ze,{})]}):t.jsxs(t.Fragment,{children:[t.jsxs(I,{children:[a!=null&&a[0]?t.jsxs(t.Fragment,{children:[t.jsx("span",{children:(N=a==null?void 0:a[0])==null?void 0:N.landName}),t.jsxs(T,{children:[t.jsx(fe,{}),(((D=a==null?void 0:a[0])==null?void 0:D.luck)/10).toLocaleString("US-en")]}),t.jsxs(T,{children:[t.jsx(Xe,{}),(((O=a==null?void 0:a[0])==null?void 0:O.ease)/10).toLocaleString("US-en")]}),t.jsxs(T,{children:[t.jsx(he,{fill:!0,color:"white"}),(((z=a==null?void 0:a[0])==null?void 0:z.delay)/10).toLocaleString("US-en")]})]}):t.jsx("span",{children:"No lands found"}),t.jsx(Te,{onClick:()=>te(!E),children:t.jsx(Be,{})})]}),E&&t.jsxs(Ve,{children:[t.jsxs(J,{children:["Coordinates",t.jsx("input",{ref:b,type:"text",defaultValue:L.coordinates.x}),":",t.jsx("input",{ref:v,type:"text",defaultValue:L.coordinates.y})]}),t.jsxs(J,{children:["Owner",t.jsx("input",{ref:g,className:"owner",type:"text",defaultValue:L.owner})]}),t.jsx(We,{onClick:re,children:t.jsx(Ke,{})})]})]}),t.jsx(Ee,{children:G?Array.from({length:8}).map((e,o)=>t.jsx(Qe,{},o)):(Q=a==null?void 0:a.sort((e,o)=>e.commission-o.commission))==null?void 0:Q.map(e=>t.jsxs(Ge,{children:[t.jsxs(Ne,{children:[e==null?void 0:e.x,":",e==null?void 0:e.y]}),t.jsx("img",{src:`/assets/lands/${e.landName}.webp`,alt:e.landName,title:e.landName}),t.jsxs("span",{children:["Commission: ",de((e==null?void 0:e.commission)/100)," %"]}),t.jsxs("span",{children:["Owner: ",e==null?void 0:e.owner]}),t.jsxs(De,{children:[t.jsx(k,{isLoading:u,disabled:u,onClick:()=>ae(e.assetId),color:"solidBlue",children:"Select"}),me(e.assetId)?t.jsx(k,{isLoading:u,disabled:u,onClick:()=>ce(e.assetId),children:t.jsx(He,{})}):t.jsx(k,{isLoading:u,disabled:u,onClick:()=>ie(e.assetId),color:"gradientYellow",children:t.jsx(Ye,{})})]})]},e.assetId))})]})]})};export{rt as default};
