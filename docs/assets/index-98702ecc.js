import{e as y,s as i,g as v,S as p,T as j,a as E,Q as T,u as b,f as g,b as S,R as W,j as r,h as x,k as d,i as M,n as $}from"./index-b65e0159.js";import{o as u,u as k}from"./news-members-70c51dca.js";import{T as A}from"./index-fb846b46.js";import{S as _}from"./index-2f08d0df.js";import"./index.esm-d6222390.js";import"./index-6f525eea.js";import"./index-1c4ab2ac.js";import"./index-6dd13b40.js";import"./gradient-border-791cdf20.js";const R=y({"0%":{backgroundPosition:"0% 0%"},"100%":{backgroundPosition:"-135% 0%"}}),B=i("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",w:"100%",">button:last-child":{mt:"40px",h:"40px",w:"220px",".button":{fs:"24px",h:"40px",w:"100%"}},"@md":{py:"40px"},"@sm":{px:"0px"}}),P=i("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",h:"165px",w:"100%",zIndex:1,img:{zIndex:-1,position:"absolute",h:"165px",w:"100%",objectFit:"cover",inset:0}}),N=i("h2",{d:"flex",align:"center",justify:"center",color:"$white500",fs:"40px",ff:"$heading",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.5)",w:"100%","@sm":{fs:"24px"}}),z=i("div",{d:"flex",align:"flex-start",justify:"center",flexWrap:"wrap",padding:"40px 160px",gap:"20px 50px",w:"100%","@sm":{padding:"40px"},"@xsm":{padding:"10px"}});i("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%",maxW:"640px",gap:"10px",padding:"40px",br:"11px",border:"1px solid #F4F4F4",background:"rgba(0, 0, 0, 0.75)","@sm":{my:"10px",direction:"column",padding:"10px 20px",">button":{order:-1}}});i("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%",gap:"10px",">div":{w:"100%",label:{w:"100%",ml:"20px",justify:"flex-start"},">div":{br:"10px",bg:"rgba(255, 255, 255, 0.54)",borderWidth:"3px",borderColor:"#FFCE1F","&:hover":{borderColor:"#FFCE1F"},"&:not(:has(input:placeholder-shown))":{borderColor:"#FFCE1F"}},textarea:{br:"10px",bg:"rgba(255, 255, 255, 0.54)",borderWidth:"3px",borderColor:"#FFCE1F","&:hover":{borderColor:"#FFCE1F"},"&:not(:has(input:placeholder-shown))":{borderColor:"#FFCE1F"}}},".select":{w:"550px",position:"relative",">button":{w:"100%"},"[data-radix-popper-content-wrapper]":{width:"inherit"}},".textarea":{br:"10px",minH:"200px",maxW:"100%",minW:"100%",bg:"rgba(255, 255, 255, 0.54)",borderWidth:"3px",borderColor:"#FFCE1F"},"@md":{">div":{maxW:"100%",minW:"100%"}},"@sm":{".select":{w:"100%",position:"relative",">button":{maxW:"100%"},"[data-radix-popper-content-wrapper]":{width:"320px"}}}});i("div",{d:"flex",justify:"flex-start",align:"center",gap:"10px",w:"100%",p:{ff:"$heading",fs:"32px",color:"$white500"},"@sm":{img:{w:"40px"},p:{fs:"20px"}}});i("div",{d:"flex",align:"center",justify:"center",gap:"10px",width:"100%",">button":{width:"100%",minW:"unset",height:"50px",bg:"linear-gradient(170deg, #00BAFF -32.19%, #358CAC 116.49%)",br:"10px",color:"$white500",fs:"18px",fw:"$bold",ff:"$body"},"@sm":{}});const D=i("div",{d:"flex",align:"center",justify:"center",w:"100%",mt:"20px",gap:"20px",padding:"40px 20px",br:"11px",border:"1px solid #F4F4F4",background:"rgba(0, 0, 0, 0.75)",color:"$white500",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.9)",ff:"$heading",fs:"40px","@sm":{fs:"26px"}}),Q=i("div",{mt:"10px",w:"100%",height:"200px",background:"linear-gradient( -90deg, rgba(3, 16, 32, 0.40), rgba(3, 16, 32, 0.75) ,rgba(3, 16, 32, 0.40))",br:"10px",backgroundSize:"400% 400%",animation:`${R} 1.2s ease-in-out infinite`}),q=i("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%",maxW:"640px",gap:"10px",padding:"40px",br:"11px",border:"1px solid #F4F4F4",background:"rgba(0, 0, 0, 0.75)","@sm":{my:"10px",direction:"column",padding:"10px 20px",">button":{order:-1}}}),L=i("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%",gap:"10px",">div":{w:"100%",label:{w:"100%",ml:"20px",justify:"flex-start"},">div":{br:"10px",bg:"rgba(255, 255, 255, 0.54)",borderWidth:"3px",borderColor:"#FFCE1F","&:hover":{borderColor:"#FFCE1F"},"&:not(:has(input:placeholder-shown))":{borderColor:"#FFCE1F"}},textarea:{br:"10px",bg:"rgba(255, 255, 255, 0.54)",borderWidth:"3px",borderColor:"#FFCE1F","&:hover":{borderColor:"#FFCE1F"},"&:not(:has(input:placeholder-shown))":{borderColor:"#FFCE1F"}}},".select":{w:"550px",position:"relative",">button":{w:"100%"},"[data-radix-popper-content-wrapper]":{width:"inherit"}},".textarea":{br:"10px",minH:"200px",maxW:"100%",minW:"100%",bg:"rgba(255, 255, 255, 0.54)",borderWidth:"3px",borderColor:"#FFCE1F"},"@md":{">div":{maxW:"100%",minW:"100%"}},"@sm":{".select":{w:"100%",position:"relative",">button":{maxW:"100%"},"[data-radix-popper-content-wrapper]":{width:"320px"}}}}),H=i("div",{d:"flex",justify:"flex-start",align:"center",gap:"10px",w:"100%",p:{ff:"$heading",fs:"32px",color:"$white500"},"@sm":{img:{w:"40px"},p:{fs:"20px"}}}),J=i("div",{d:"flex",align:"center",justify:"center",gap:"10px",width:"100%",">button":{width:"100%",minW:"unset",height:"50px",bg:"linear-gradient(170deg, #00BAFF -32.19%, #358CAC 116.49%)",br:"10px",color:"$white500",fs:"18px",fw:"$bold",ff:"$body"},"@sm":{}}),O=async()=>await v({options:{code:p.MEMBERS_MC,index_position:1,limit:"10000",scope:p.MEMBERS_MC,table:j.REASONS}}),U=()=>E({queryKey:[T.REASONS],queryFn:()=>I(),staleTime:1e3*60*60});async function I(){try{const e=await O();if(!e)return null;const t=K(e);return[{label:"Custom",value:"custom",index:-1,title:"",flag_reason:""},...t]}catch(e){return console.log(e),null}}function K(e){return e.map(t=>({...t,label:t.title,value:t.flag_reason}))}async function Y(e,t){const{executeTransaction:o}=b(),n=G(e,t);return!!await o(n)}function G(e,t){return{actions:[{account:p.MEMBERS_MC,name:"trialupg",authorization:[{actor:e.name,permission:e.requestPermission}],data:{wallet:e.name,member:t}}]}}async function V(e,t){const{executeTransaction:o}=b(),n=X(e,t);return!!await o(n)}function X(e,t){return{actions:[{account:p.MEMBERS_MC,name:"trialdelay",authorization:[{actor:e.name,permission:e.requestPermission}],data:{wallet:e.name,member:t,days:30}}]}}async function Z(e,t,o){const{executeTransaction:n}=b(),s=ee(e,t,o);return!!await n(s)}function ee(e,t,o){return{actions:[{account:p.MEMBERS_MC,name:"memberflag",authorization:[{actor:e.name,permission:e.requestPermission}],data:{wallet:e.name,member:t,reason:o}}]}}const te=e=>{const{data:t,isLoading:o}=U(),n=g.useRef(null),s=S(a=>a.user),[l,m]=W.useState(t==null?void 0:t[0]);g.useEffect(()=>{m(t==null?void 0:t[0])},[t]);function f(a){if(!a)return;const c=n==null?void 0:n.current;((a==null?void 0:a.index)??-1)>=0?c.value=a==null?void 0:a.flag_reason:c.value="",m(a)}async function h(a){if(!s)return;await Y(s,a)&&(await x(1e3),await u(),d.success("Approved"))}async function w(a){if(!s)return;await V(s,a)&&(await x(1e3),await u(),d.success("Delayed"))}async function F(a){if(!s)return;const c=n==null?void 0:n.current;if(!c||!c.value){d.warn("Please enter a reason");return}const C=c.value;await Z(s,a,C)&&(await x(1e3),await u(),d.success("Flagged"))}return r.jsxs(q,{children:[r.jsxs(L,{children:[r.jsxs(H,{children:[r.jsx("p",{children:e.wallet}),r.jsx("a",{href:`https://atomichub.io/profile/wax-mainnet/${e.wallet}`,target:"_blank",rel:"noreferrer",children:r.jsx("img",{src:"./assets/icons/atomic.png",alt:""})}),r.jsx("a",{href:`https://waxblock.io/account/${e.wallet}`,target:"_blank",rel:"noreferrer",children:r.jsx("img",{src:"./assets/icons/cube.png",alt:""})})]}),r.jsx(_,{borderColor1:"#FFB31F",borderColor2:"#FFB800",label:"",className:"select",title:"",isLoading:o,selected:l,options:t,onSelected:a=>f(a)}),r.jsx(A,{className:"textarea",label:"",ref:n,disabled:((l==null?void 0:l.index)??-1)>=0})]}),r.jsxs(J,{children:[r.jsx("button",{color:"gradientPink",onClick:()=>h(e.wallet),children:"Approve"}),r.jsx("button",{color:"gradientPink",onClick:()=>w(e.wallet),children:"Delay"}),r.jsx("button",{color:"gradientPink",onClick:()=>F(e.wallet),children:"Flag"})]})]},e.wallet)},xe=()=>{const{data:e,isLoading:t}=k(),o=e==null?void 0:e.filter(n=>n.trial&&!n.flagged&&M($,new Date(n.next_review)));return r.jsxs(B,{children:[r.jsxs(P,{children:[r.jsx(N,{children:"Applications"}),r.jsx("img",{src:"/assets/background/bg-applications.jpeg",alt:""})]}),r.jsx(z,{children:t?r.jsx(Q,{}):o&&o.length>0?o==null?void 0:o.map(n=>g.createElement(te,{...n,key:n.wallet})):r.jsx(D,{children:"No applications"})})]})};export{xe as default};
