import{e as Oe,s as c,k as Ke,S as z,T as Ye,l as Je,Q as Re,q as Ze,R as G,_ as K,b as ee,r as u,j as e,B,m as H,d as Pe}from"./index-baa9c320.js";import{o as Ce,u as en,a as nn,b as tn,c as P,e as sn,d as an,f as on}from"./index-86ef9eb3.js";import{o as V,u as rn}from"./index-18d2aaec.js";import{b as ln,c as Se}from"./index.esm-042a9abc.js";import{u as cn}from"./inventory-query-80b51967.js";import{m as W}from"./mcpFormatNumber-1b3dda04.js";import{s as U}from"./sleep-da79c358.js";import{d as Y}from"./use-transaction-dc9a5b45.js";import{N as ke}from"./index-fe0a3692.js";import{D as dn,a as pn,b as un}from"./index-e671de26.js";import{G as xn}from"./iconBase-574fbd41.js";import{a as X}from"./mineCooldown-f9d8a9df.js";import"./index-0dbad24c.js";import"./index-93a5b34c.js";import"./index-81edd724.js";import"./use-media-184b6495.js";import"./index-98712ab6.js";import"./user-miners-query-20ebcc34.js";import"./axios-45629df5.js";import"./index-699abe7a.js";import"./index-c19da194.js";import"./index.esm-8c9ddf56.js";import"./index-d9f2be27.js";import"./index-e99e37ef.js";const Fe=Oe({"0%":{backgroundPosition:"0% 0%"},"100%":{backgroundPosition:"-135% 0%"}}),Ve=Oe({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),fn=c("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%","@sm":{padding:"0 15px"}}),mn=c("div",{d:"flex",align:"center",justify:"center",w:"100%",maxW:"1250px",mx:"auto",my:"20px",svg:{cursor:"pointer",mr:"auto"}}),gn=c("div",{d:"flex",align:"flex-start",justify:"center",gap:"30px",w:"100%",maxW:"1250px","@md":{d:"flex",flexWrap:"wrap"}}),hn=c("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"51%",">button":{w:"100%",h:"40px",fs:"16px",mt:"20px",div:{border:"none"}},"@md":{w:"100%",">button":{maxW:"100%"}}}),Be=c("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%"}),Ee=c("div",{d:"flex",align:"flex-end",justify:"center",w:"100%",gap:"10px",span:{fw:"bold",fs:"16px",ff:"$heading",color:"#BCBCBC","&:first-child":{fs:"24px",color:"$white500"},"&:last-child":{ml:"auto",fs:"16px",color:"#72C630"}}}),$e=c("span",{mt:"10px",mr:"auto",fs:"16px",ff:"$heading",fw:"bold",color:"#BCBCBC"}),jn=c("div",{d:"flex",align:"center",justify:"space-between",mt:"30px",w:"100%",img:{br:"20px",width:"100px"}}),_n=c("div",{d:"flex",align:"flex-start",justify:"center",direction:"column",gap:"10px",button:{padding:"0",minW:"unset",w:"120px",h:"40px",fs:"16px",div:{border:"none"}},span:{fw:"bold",fs:"16px",ff:"$heading",color:"$white500"}}),bn=c("div",{d:"flex",align:"center",justify:"center",gap:"20px",mt:"40px"}),Te=c("button",{d:"flex",align:"center",justify:"center",direction:"column",img:{w:"100%",maxW:"160px",h:"244px"},span:{fs:"16px",ff:"$heading",fw:"bold",color:"#BCBCBC"},"&:disabled":{cursor:"not-allowed",opacity:"0.5"}}),wn=c("span",{mt:"10px",textAlign:"center",fs:"26px",ff:"$heading",fw:"bold",color:"$white500"}),Le=c("span",{d:"flex",align:"center",justify:"center",gap:"10px",textAlign:"center",mr:"auto",mb:"10px",fs:"26px",ff:"$heading",fw:"bold",color:"$white500",span:{color:"#EBB309"},"> svg":{h:"25px",w:"25px"},variants:{isLoading:{true:{">button >svg":{animation:`${Ve} 0.5s ease-in-out infinite`}}}},"@sm":{flexWrap:"wrap"}}),Me=c("div",{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",width:"100%",mt:"20px",bg:"rgba(0,0,0,0.46)",br:"10px ",padding:"20px",".input":{width:"100%",alignItems:"flex-start",justifyContent:"flex-start",label:{w:"max-content",fs:"16px",ff:"$heading",fw:"bold",color:"#BCBCBC"},">div":{br:"10px",border:"3px solid #697078",bg:"#D9D9D9",input:{color:"$black500"}}},">button":{w:"100%",h:"40px",fs:"16px",mt:"20px",div:{border:"none"}},"@md":{">button":{maxW:"100%"},".input":{maxW:"100%"}}}),De=c("div",{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",flexDirection:"column",width:"100%",mt:"20px",fs:"16px",ff:"$heading",fw:"bold",color:"#BCBCBC",">span:first-child":{display:"flex",alignItems:"center",justifyContent:"center",gap:"5px"}}),Ie=c("div",{display:"flex",alignItems:"center",justifyContent:"center",fs:"16px",ff:"$heading",fw:"bold",color:"#00BAFF",span:{ff:"math",mr:"5px"}}),We=c("div",{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",width:"100%",mt:"20px",bg:"rgba(0,0,0,0.46)",br:"10px ",padding:"20px"}),Ae=c("span",{d:"flex",align:"center",justify:"center",gap:"10px",textAlign:"center",mr:"auto",mb:"10px",fs:"26px",ff:"$heading",fw:"bold",color:"$white500",span:{color:"#EBB309"},"> svg":{h:"25px",w:"25px"},variants:{isLoading:{true:{">button >svg":{animation:`${Ve} 0.5s ease-in-out infinite`}}}},"@sm":{flexWrap:"wrap"}}),Ne=c("div",{display:"flex",alignItems:"center",justifyContent:"center",gap:"20px",width:"100%","@sm":{flexWrap:"wrap"}}),q=c("div",{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",width:"100%",">button":{w:"100%",minW:"150px",h:"75px",fs:"16px",div:{border:"none"},svg:{w:"20px",h:"20px"}},"@md":{">button":{maxW:"100%"},".input":{maxW:"100%"}}}),O=c("div",{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",width:"100%",span:{fs:"16px",ff:"$heading",fw:"bold",color:"#BCBCBC","&:last-child":{color:"#00BAFF"}}}),qe=c("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",w:"65%","@md":{w:"100%"}}),yn=c("div",{d:"flex",align:"flex-start",justify:"flex-start",gap:"5px",w:"100%",mt:"20px"}),vn=c("button",{d:"flex",align:"center",justify:"center",fs:"16px",ff:"$heading",fw:"bold",color:"#BCBCBC",variants:{selected:{true:{color:"#00BAFF"}}}}),Cn=c("div",{d:"flex",align:"flex-start",justify:"flex-start",flexWrap:"wrap",gap:"10px",mt:"20px"});c("div",{mt:"10px",w:"100%",height:"200px",background:"linear-gradient( -90deg, rgba(3, 16, 32, 0.40), rgba(3, 16, 32, 0.75) ,rgba(3, 16, 32, 0.40))",br:"10px",backgroundSize:"400% 400%",animation:`${Fe} 1.2s ease-in-out infinite`});const Sn=c("div",{w:"160px",height:"224px",background:"linear-gradient( -90deg, rgba(255, 255, 255, 0.20), rgba(3, 16, 32, 0.75) ,rgba(255, 255, 255, 0.20))",br:"10px",backgroundSize:"400% 400%",animation:`${Fe} 1.2s ease-in-out infinite`}),kn=async()=>await Ke({options:{code:z.GAME_MC,index_position:1,limit:"10000",scope:z.GAME_MC,table:Ye.BONUSES}}),Bn=()=>Je({queryKey:[Re.BONUSES],queryFn:()=>$n(),staleTime:1e3*60*60});async function En(){return await Ze.invalidateQueries(Re.BONUSES)}async function $n(){try{const a=await kn();return a||null}catch(a){return console.log(a),null}}async function Tn(a,x,r){const{executeTransaction:f}=Y(),C=Ln(a,x,r);return!!await f(C)}function Ln(a,x,r){const f={actions:[{account:"atomicassets",name:"transfer",authorization:[{actor:a.name,permission:a.authorization.permission}],data:{from:a.name,to:"game.mc",memo:`nftstake,${x}`,asset_ids:r}}]};return console.log(f),f}async function Mn(a,x){const{executeTransaction:r}=Y(),f=Dn(a,x);return!!await r(f)}function Dn(a,x){return{actions:[{account:z.GAME_MC,name:"gctomcp",authorization:[{actor:a.name,permission:a.authorization.permission}],data:{wallet:a.name,gamecurrency:x}}]}}const In=c("div",{d:"flex",align:"center",justify:"center",direction:"column",bg:"$dark_blue500",w:"80vw",maxW:"300px",">button":{mt:"20px",w:"100%",minW:"150px",h:"30px",fs:"16px",div:{border:"none"},svg:{w:"20px",h:"20px"}}}),Wn=c("span",{d:"flex",align:"center",justify:"center",mr:"auto",ff:"$heading",fs:"22px",fw:"$bold",color:"$light_blue500"}),An=c("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",w:"100%"}),Nn=c("div",{d:"flex",align:"center",justify:"center",gap:"10px",ff:"$heading",fs:"26px",fw:"$bold",mt:"15px",ml:"0px",textAlign:"center",color:"$white500",svg:{w:"30px",h:"30px"}}),qn=c("span",{d:"flex",align:"center",justify:"center",gap:"10px",ff:"$heading",fs:"26px",fw:"$bold",mt:"15px",ml:"10px",textAlign:"center",color:"$white500",span:{color:"#EBB309"}}),On=c("span",{bg:"rgba(0,0,0,0.5)",padding:"10px",w:"100%",ff:"$heading",fs:"16px",fw:"$normal",mt:"15px",textAlign:"center",color:"$white500",span:{fw:"$bold"}});function Rn(a){return xn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"M112 268l144 144 144-144M256 392V100"}}]})(a)}async function Fn(a,x,r){const{executeTransaction:f}=Y(),C=Vn(a,x,r);return!!await f(C)}function Vn(a,x,r){return{actions:[{account:z.GAME_MC,name:"qptogc",authorization:[{actor:a.name,permission:a.authorization.permission}],data:{wallet:a.name,qp:x,expected_resources:r}}]}}async function Un(a,x){const{executeTransaction:r}=Y(),f=zn(a,x);return!!await r(f)}function zn(a,x){return{actions:[{account:z.GAME_MC,name:"qptogcfill",authorization:[{actor:a.name,permission:a.authorization.permission}],data:{wallet:a.name,qp:x}}]}}const Gn=G.lazy(()=>K(()=>import("./quest-e509a604.js"),["assets/quest-e509a604.js","assets/index-baa9c320.js","assets/index-55fec1ff.css"])),R=({children:a,rValue:x=0,qpValue:r=0,isFillStorage:f,disabled:C})=>{const b=ee(h=>h.user),[j,T]=u.useState(!1),[d,L]=u.useState(X(new Date(new Date(new Date().toUTCString().substring(0,25)).getTime()+15*1e3))),[n,s]=u.useState(!1);function J(h){s(h)}async function o(h,S){if(b){T(!0);try{await Fn(b,h,Math.floor(S))&&(await U(1500),await V(),await Ce(),H.success("Purchase successful"),s(!1))}catch(p){console.log(p)}finally{T(!1)}}}async function m(h){if(b){T(!0);try{await Un(b,h)&&(await U(1500),await V(),await Ce(),H.success("Storage used successfully"))}catch(S){console.log(S)}finally{T(!1)}}}const M=u.useMemo(()=>d.seconds>9?d.seconds:`0${d.seconds}`,[d]);return u.useEffect(()=>{if(n){const h=new Date(new Date().toUTCString().substring(0,25)).getTime()+15e3,S=setInterval(()=>{const p=X(new Date(h));L(p)},1e3);return()=>{L({days:0,hours:0,minutes:0,seconds:15,difference:0}),clearInterval(S)}}},[n]),u.useEffect(()=>{d.minutes===0&&d.seconds===0&&s(!1)},[d]),e.jsxs(dn,{onOpenChange:J,open:n,children:[e.jsx(pn,{disabled:C,children:a}),e.jsx(un,{closeType:"primary",closePosition:"inside",children:e.jsxs(In,{children:[e.jsx(Wn,{children:"Confirm"}),e.jsxs(An,{children:[e.jsxs(Nn,{children:[e.jsx(Gn,{})," ",r]}),e.jsx(Rn,{color:"white",size:35}),e.jsxs(qn,{children:[" ",e.jsx("span",{children:"Я"}),` > ${W(x*.95,3)}`]})]}),e.jsxs(On,{children:["If the transaction would result ",e.jsx("br",{})," in less ",e.jsx("span",{children:"Я"}),", it is aborted."]}),e.jsxs(B,{isLoading:j,disabled:j,onClick:()=>f?m(r):o(r,x*.95),color:"solidBlue",rounded:!1,children:["Confirm (",M,"s)"]})]})})]})},Qn=G.lazy(()=>K(()=>import("./index-0416d6aa.js"),["assets/index-0416d6aa.js","assets/index-baa9c320.js","assets/index-55fec1ff.css"])),Q=G.lazy(()=>K(()=>import("./star-a42c5751.js"),["assets/star-a42c5751.js","assets/index-baa9c320.js","assets/index-55fec1ff.css"])),I=G.lazy(()=>K(()=>import("./quest-e509a604.js"),["assets/quest-e509a604.js","assets/index-baa9c320.js","assets/index-55fec1ff.css"])),Hn={days:0,hours:0,minutes:0,seconds:0},Xn=({gamecurecy:a})=>{var re,le,ce,de,pe,ue,xe,fe,me,ge,he,je,_e,be,we,ye;const x=u.useContext(Pe.UALContext),{data:r,isLoading:f}=rn(),{data:C}=en(),{data:b}=Bn(),{data:j,isLoading:T}=nn(),{data:d,isLoading:L}=tn(),n=P(t=>t.selectedProduction),s=ee(t=>t.user),J=ee(t=>t.updateAuth),o=u.useMemo(()=>C==null?void 0:C.find(t=>t.buildingid===(n==null?void 0:n.buildingid)),[C,n==null?void 0:n.buildingid]),[m,M]=u.useState(!1),[h,S]=u.useState(0),[p,Ue]=u.useState(Hn),[ne,ze]=u.useState((re=o==null?void 0:o.allowed_schemas)==null?void 0:re[0]),A=u.useMemo(()=>Array.from({length:(o==null?void 0:o.slot_unlock_levels.length)||0},(t,l)=>{var E;const i=(E=n==null?void 0:n.staked_asset_ids)==null?void 0:E[l];if(!i)return;const g=b==null?void 0:b.find(w=>{var $;return w.schema===i.schema.schema_name&&w.rarity===i.data.rarity&&w.shine===((($=i==null?void 0:i.data)==null?void 0:$.shine)||"Stone")});return{...i,bonus:(g==null?void 0:g.bonus_percent)||0}}),[b,o==null?void 0:o.slot_unlock_levels.length,n==null?void 0:n.staked_asset_ids]),[_,te]=u.useState(A),{data:Z,isLoading:Ge}=cn(ne??((le=o==null?void 0:o.allowed_schemas)==null?void 0:le[0]));async function Qe(){if(!(!s||!(n!=null&&n.buildingid))){M(!0);try{await sn(s,n==null?void 0:n.buildingid)&&(await U(3e3),V())}catch(t){console.log(t)}finally{M(!1)}}}async function se(){await an()}async function ie(){if(s){M(!0);try{if(!h)return;await Mn(s,h)&&(await U(3e3),V(),H.success("Delivery successful"),S(0),await J(x))}catch(t){console.log(t)}finally{M(!1)}}}async function He(){if(s){M(!0);try{const t=_.filter(i=>!!(i!=null&&i.asset_id)&&!A.includes(i)).map(i=>Number(i==null?void 0:i.asset_id));if(!(n!=null&&n.buildingid))return;await Tn(s,n==null?void 0:n.buildingid,t)&&(await U(3e3),await V(),await on(),await En(),H.success("Stake successfully"))}catch(t){console.log(t)}finally{M(!1)}}}function Xe(){P.setState(t=>({...t,selectedProduction:null}))}function ae(t,l){const i=_==null?void 0:_.map((g,E)=>E===t?l:g);te(i)}const oe=u.useMemo(()=>{const t=p.hours>9?p.hours:`0${p.hours}`,l=p.minutes>0?`${p.minutes>9?p.minutes:`0${p.minutes}`}`:"00",i=p.seconds>9?p.seconds:`0${p.seconds}`;return t==="00"?`${l}:${i}`:`${t}:${l}:${i}`},[p]),v=u.useMemo(()=>{if(!(j!=null&&j[0])||!d)return 0;const t=j==null?void 0:j[0],l=a,i=Number(t==null?void 0:t.mcp),g=(t==null?void 0:t.gamecurrency)||0,E=i*g,w=((r==null?void 0:r.max_gamecurrency)??0)-l,$=g-w,y=E/$-i;return Math.round(y/d.mcpperqp)<1?1:Math.round(y/d.mcpperqp)},[r==null?void 0:r.max_gamecurrency,d,a,j]),N=u.useMemo(()=>{if(!j||!n)return;const t=j[0],l=h+h*n.building_level/100+h*n.nft_bonuspercent/100,i=Number(t.mcp),g=Number(t.gamecurrency),w=i*g/(g+l);return Math.floor(i-w)<0?0:Math.floor(i-w)},[j,h,n]),k=u.useCallback(t=>{if(!j||!(d!=null&&d.mcpperqp)||!(r!=null&&r.max_gamecurrency))return 0;const l=j[0],i=Number(l.mcp),g=l.gamecurrency,w=i*g/(i+t*(d==null?void 0:d.mcpperqp)),$=Math.floor(g-w);return $<0?0:$>r.max_gamecurrency?r.max_gamecurrency:g-w},[j,d==null?void 0:d.mcpperqp,r==null?void 0:r.max_gamecurrency]),F=u.useMemo(()=>{const t=(o==null?void 0:o.slot_unlock_levels.findLastIndex(l=>((n==null?void 0:n.building_level)??0)>=l))??0;return t===-1?!0:A[t]===void 0?!1:A[t]!==void 0},[n,A,o==null?void 0:o.slot_unlock_levels]),D=u.useMemo(()=>{var t,l;return Math.floor(v/2)>(((t=s==null?void 0:s.userWeekly)==null?void 0:t.total_quest_points)??0)?((l=s==null?void 0:s.userWeekly)==null?void 0:l.total_quest_points)??0:Math.floor(v/2)},[v,(ce=s==null?void 0:s.userWeekly)==null?void 0:ce.total_quest_points]);return u.useEffect(()=>{te(A)},[A]),u.useEffect(()=>{if(!r||!n)return;const t=r==null?void 0:r.buildings.find(l=>l.buildingid===n.buildingid);P.setState(l=>({...l,selectedProduction:t}))},[r]),u.useEffect(()=>{const t=X(new Date(new Date((n==null?void 0:n.last_interaction)||"").getTime()+((d==null?void 0:d.seconds_market_cd)??0)*1e3));if(t.minutes!==0&&t.seconds!==0){const l=setInterval(()=>{const i=X(new Date(new Date((n==null?void 0:n.last_interaction)||"").getTime()+((d==null?void 0:d.seconds_market_cd)??0)*1e3));Ue(i)},1e3);return()=>{clearInterval(l)}}},[n==null?void 0:n.last_interaction,d==null?void 0:d.seconds_market_cd]),e.jsxs(fn,{children:[e.jsx(Qn,{}),e.jsx(mn,{children:e.jsx(ln,{onClick:Xe,color:"white",size:30})}),e.jsxs(gn,{children:[e.jsxs(hn,{children:[e.jsxs(Be,{children:[e.jsxs(Ee,{children:[e.jsx("span",{children:n==null?void 0:n.building_name}),e.jsxs("span",{children:["Level ",n==null?void 0:n.building_level]}),(o==null?void 0:o.building_type)==="production"?e.jsxs("span",{children:["Я ",n==null?void 0:n.gamecurrency_per_minute_boosted,"/min"]}):e.jsx("span",{})]}),e.jsx($e,{children:o==null?void 0:o.building_description})]}),e.jsxs(jn,{children:[e.jsxs(_n,{children:[e.jsxs("span",{children:["Я ",W((n==null?void 0:n.gamecurrency_upgrade_cost)||0,3)]}),e.jsx(B,{isLoading:m,rounded:!1,color:"solidBlue",disabled:m||a<((n==null?void 0:n.gamecurrency_upgrade_cost)||0),onClick:Qe,children:"UPGRADE"})]}),e.jsx("img",{src:`/assets/mcp/${n==null?void 0:n.buildingid}.png`,alt:""})]}),e.jsx(bn,{children:_==null?void 0:_.map((t,l)=>{const i=(o==null?void 0:o.slot_unlock_levels.findLastIndex(g=>((n==null?void 0:n.building_level)??0)>=g))??0;return e.jsxs(Te,{disabled:F||l>i,onClick:()=>ae(l,void 0),children:[e.jsxs("span",{children:["Level ",o==null?void 0:o.slot_unlock_levels[l]]}),e.jsx("img",{src:t?`/assets/aw-nft-images/${t==null?void 0:t.template.template_id}.webp`:"/assets/default-card.png",alt:""})]},(t==null?void 0:t.asset_id)||l)})}),e.jsx(wn,{children:`${_.reduce((t,l)=>t+=(l==null?void 0:l.bonus)||0,0)}% ${(n==null?void 0:n.buildingid)==="market"?"ADDITIONAL BONUS DELIVERY":(n==null?void 0:n.buildingid)==="storage"?"BONUS STORAGE":"BONUS PRODUCTION"}`}),e.jsx(B,{isLoading:m,disabled:m||F,rounded:!1,color:"solidBlue",onClick:He,children:"STAKE UNTIL END OF SEASON"}),(n==null?void 0:n.buildingid)==="market"&&!F&&e.jsxs(e.Fragment,{children:[e.jsxs(Me,{children:[e.jsxs(Le,{isLoading:T,children:["EXCHANGE ",e.jsx("span",{children:"Я"})," FOR ",e.jsx(Q,{}),e.jsx("button",{disabled:T,onClick:se,children:e.jsx(Se,{color:"white",size:40})})]}),e.jsx(ke,{onChange:t=>S(Number((t==null?void 0:t.target.value)||0)),value:h,maxButton:!0,onClickMaxButton:()=>S(a),type:"number",borderColor1:"transparent",borderColor2:"transparent",className:"input",label:"Я to deliver to Mission Control"}),e.jsxs(De,{children:[e.jsxs("span",{children:["Estimated ",e.jsx(Q,{})]}),e.jsxs(Ie,{children:[e.jsx("span",{children:"~"})," ",N==null?void 0:N.toLocaleString("en-US")]})]}),e.jsx(B,{disabled:m||p.minutes!==0||p.seconds!==0,rounded:!1,color:"solidBlue",onClick:ie,children:p.minutes!==0||p.seconds!==0?oe:"DELIVER NOW"})]}),e.jsxs(We,{children:[e.jsxs(Ae,{children:["EXCHANGE ",e.jsx(I,{})," FOR ",e.jsx("span",{children:"Я"})]}),e.jsxs(Ne,{children:[e.jsx(R,{disabled:(((de=s==null?void 0:s.userWeekly)==null?void 0:de.total_quest_points)??0)<1||n.building_level<1,qpValue:1,rValue:k(1),children:e.jsxs(q,{children:[e.jsx(B,{isLoading:m||f||L,disabled:m||(((pe=s==null?void 0:s.userWeekly)==null?void 0:pe.total_quest_points)??0)<1||n.building_level<1,color:"solidBlue",rounded:!1,children:e.jsxs("span",{children:["Spend ",e.jsx("br",{})," ( 1 ",e.jsx(I,{})," )"]})}),e.jsxs(O,{children:[e.jsx("span",{children:"Estimated Я"}),e.jsxs("span",{children:["~ ",W(k(1),3)]})]})]})}),e.jsx(R,{disabled:(((ue=s==null?void 0:s.userWeekly)==null?void 0:ue.total_quest_points)??0)<1||n.building_level<1,qpValue:D,rValue:k(D),children:e.jsxs(q,{children:[e.jsx(B,{isLoading:m||f||L,disabled:m||(((xe=s==null?void 0:s.userWeekly)==null?void 0:xe.total_quest_points)??0)<1||n.building_level<1,color:"solidBlue",rounded:!1,children:e.jsxs("span",{children:["Spend ",e.jsx("br",{})," ( ",D," ",e.jsx(I,{})," )"]})}),e.jsxs(O,{children:[e.jsx("span",{children:"Estimated Я"}),e.jsxs("span",{children:["~ ",W(k(D),3)]})]})]})}),e.jsx(R,{isFillStorage:!0,disabled:(((fe=s==null?void 0:s.userWeekly)==null?void 0:fe.total_quest_points)??0)<1||n.building_level<1,qpValue:v,rValue:k(v),children:e.jsxs(q,{children:[e.jsx(B,{isLoading:m||f||L,disabled:m||(((me=s==null?void 0:s.userWeekly)==null?void 0:me.total_quest_points)??0)<v||n.building_level<1,color:"solidBlue",rounded:!1,children:e.jsxs("span",{children:["Fill Storage ",e.jsx("br",{})," ( ",v," ",e.jsx(I,{})," )"]})}),e.jsxs(O,{children:[e.jsx("span",{children:"Estimated Я"}),e.jsxs("span",{children:["~ ",W(k(v),3)]})]})]})})]})]})]})]}),(n==null?void 0:n.buildingid)==="market"&&F&&e.jsxs(qe,{children:[e.jsxs(Me,{children:[e.jsxs(Le,{isLoading:T,children:["EXCHANGE ",e.jsx("span",{children:"Я"})," FOR ",e.jsx(Q,{}),e.jsx("button",{disabled:T,onClick:se,children:e.jsx(Se,{color:"white",size:40})})]}),e.jsx(ke,{onChange:t=>S(Number((t==null?void 0:t.target.value)||0)),value:h,maxButton:!0,onClickMaxButton:()=>S(Math.floor(a)),type:"number",borderColor1:"transparent",borderColor2:"transparent",className:"input",label:"Я to deliver to Mission Control"}),e.jsxs(De,{children:[e.jsxs("span",{children:["Estimated ",e.jsx(Q,{})]}),e.jsxs(Ie,{children:[e.jsx("span",{children:"~"})," ",N==null?void 0:N.toLocaleString("en-US")]})]}),e.jsx(B,{disabled:m||n.building_level<1||p.minutes!==0||p.seconds!==0,rounded:!1,color:"solidBlue",onClick:ie,children:p.minutes!==0||p.seconds!==0?oe:"DELIVER NOW"})]}),e.jsxs(We,{children:[e.jsxs(Ae,{children:["EXCHANGE ",e.jsx(I,{})," FOR ",e.jsx("span",{children:"Я"})]}),e.jsxs(Ne,{children:[e.jsx(R,{disabled:(((ge=s==null?void 0:s.userWeekly)==null?void 0:ge.total_quest_points)??0)<1||n.building_level<1,qpValue:1,rValue:k(1),children:e.jsxs(q,{children:[e.jsx(B,{isLoading:m||f||L,disabled:m||(((he=s==null?void 0:s.userWeekly)==null?void 0:he.total_quest_points)??0)<1||n.building_level<1,color:"solidBlue",rounded:!1,children:e.jsxs("span",{children:["Spend ",e.jsx("br",{})," ( 1 ",e.jsx(I,{})," )"]})}),e.jsxs(O,{children:[e.jsx("span",{children:"Estimated Я"}),e.jsxs("span",{children:["~ ",W(k(1),3)]})]})]})}),e.jsx(R,{disabled:(((je=s==null?void 0:s.userWeekly)==null?void 0:je.total_quest_points)??0)<1||n.building_level<1,qpValue:D,rValue:k(D),children:e.jsxs(q,{children:[e.jsx(B,{isLoading:m||f||L,disabled:m||(((_e=s==null?void 0:s.userWeekly)==null?void 0:_e.total_quest_points)??0)<1||n.building_level<1,color:"solidBlue",rounded:!1,children:e.jsxs("span",{children:["Spend ",e.jsx("br",{})," ( ",D," ",e.jsx(I,{})," )"]})}),e.jsxs(O,{children:[e.jsx("span",{children:"Estimated Я"}),e.jsxs("span",{children:["~ ",W(k(D),3)]})]})]})}),e.jsx(R,{isFillStorage:!0,disabled:(((be=s==null?void 0:s.userWeekly)==null?void 0:be.total_quest_points)??0)<1||n.building_level<1,qpValue:v,rValue:k(v),children:e.jsxs(q,{children:[e.jsx(B,{isLoading:m||f||L,disabled:m||(((we=s==null?void 0:s.userWeekly)==null?void 0:we.total_quest_points)??0)<v||n.building_level<1,color:"solidBlue",rounded:!1,children:e.jsxs("span",{children:["Fill Storage ",e.jsx("br",{})," ( ",v," ",e.jsx(I,{})," )"]})}),e.jsxs(O,{children:[e.jsx("span",{children:"Estimated Я"}),e.jsxs("span",{children:["~ ",W(k(v),3)]})]})]})})]})]})]}),!F&&e.jsxs(qe,{children:[e.jsxs(Be,{children:[e.jsxs(Ee,{children:[e.jsx("span",{children:"NFT SELECTION"}),e.jsx("span",{})]}),e.jsx($e,{children:"Each building allows different schemas for staking. The rarity of the NFT determines the efficiency bonus."})]}),e.jsx(yn,{children:(ye=o==null?void 0:o.allowed_schemas)==null?void 0:ye.map(t=>e.jsx(vn,{onClick:()=>ze(t),selected:ne===t,children:t},t))}),e.jsx(Cn,{children:Ge?Array.from({length:20}).map((t,l)=>e.jsx(Sn,{},l)):Z==null?void 0:Z.map((t,l)=>{var $;const i=b==null?void 0:b.find(y=>{var ve;return y.schema===t.schema.schema_name&&y.rarity===t.data.rarity&&y.shine===(((ve=t==null?void 0:t.data)==null?void 0:ve.shine)||"Stone")}),g=_==null?void 0:_.findIndex(y=>y===void 0),E=_==null?void 0:_.some(y=>(t==null?void 0:t.asset_id)===(y==null?void 0:y.asset_id)),w=(o==null?void 0:o.slot_unlock_levels.findLastIndex(y=>((n==null?void 0:n.building_level)??0)>=y))??0;return e.jsxs(Te,{disabled:E||_[w]!==void 0||w===-1,onClick:()=>ae(g,{...t,bonus:(i==null?void 0:i.bonus_percent)||0}),children:[e.jsx("img",{src:`/assets/aw-nft-images/${t==null?void 0:t.template.template_id}.webp`,alt:($=t==null?void 0:t.data)==null?void 0:$.name}),e.jsxs("span",{children:[(i==null?void 0:i.bonus_percent)||0,"%"]})]},t.asset_id)})})]})]})]})},_t=G.memo(Xn);export{_t as default};
