import{e as $,s as o,c as A,r as D,S as p,T as L,a as I,Q as P,u as S,ag as k,p as E,b as g,f as x,j as e,I as M,B as h,ai as b}from"./index-1189e32e.js";import{I as z}from"./info-builder-9e10488c.js";import{S as R}from"./index-15d42958.js";import"./index.esm-61a0be8c.js";import"./index-fdb9515a.js";import"./Combination-53c32008.js";import"./gradient-border-42533f66.js";const W=$({"0%":{backgroundPosition:"0% 0%"},"100%":{backgroundPosition:"-135% 0%"}}),N=o("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%","@sm":{padding:"0 15px"}}),q=o("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",h:"165px",w:"100%",zIndex:1,img:{zIndex:-1,position:"absolute",h:"165px",w:"100%",objectFit:"cover",inset:0}}),F=o("h2",{d:"flex",align:"center",justify:"center",color:"$white500",fs:"40px",ff:"$heading",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.5)",w:"100%","@sm":{fs:"24px"}}),U=o("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%",maxW:"1302px",">button":{mt:"40px",h:"50px",w:"240px",div:{fs:"15px",border:"none"}},"@md":{d:"flex",flexWrap:"wrap"}}),B=o("div",{d:"flex",align:"center",justify:"center",gap:"10px",mt:"30px",padding:"20px",br:"8px",bg:"rgba(255, 255, 255, 0.09)",svg:{color:"$white500",w:"50px",h:"50px",mr:"auto"},"@sm":{d:"none"}}),O=o("span",{w:"100%",color:"$white500",fs:"16px",ff:"$heading",a:{color:"$yellow500",textDecoration:"underline"},"@lg":{fs:"12px"},"@md":{fs:"10px"},"@sm":{}}),Q=o("div",{d:"flex",align:"center",justify:"center",direction:"column"}),V=o("h2",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",w:"100%",mt:"30px",mb:"10px",color:"$white500",fs:"20px",ff:"$body",fw:"$thin"}),Y=o("div",{d:"flex",align:"flex-start",justify:"flex-start",gap:"20px","@xsm":{flexWrap:"wrap"}}),G=o("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",w:"30%",gap:"20px",img:{w:"100%",objectFit:"contain",br:"10px"},"@xsm":{w:"100%"}}),K=o("div",{d:"flex",align:"center",justify:"center",direction:"column",gap:"2px",w:"100%"}),w=o("div",{d:"flex",align:"center",justify:"center",w:"100%",gap:"2px",span:{bg:"rgba(255, 255, 255, 0.02)",w:"100%",color:"$white500",fs:"16px",ff:"$body",fw:"$thin",textAlign:"center"}}),H=o("div",{d:"flex",align:"center",justify:"space-between",direction:"column",gap:"20px",w:"70%",minH:"312px",padding:"40px 20px 15px 20px",bg:"rgba(255, 255, 255, 0.02)","@xsm":{w:"100%"}}),J=o("p",{d:"flex",align:"center",justify:"center",direction:"column",color:"$white500",fs:"16px",ff:"$heading",textAlign:"center"}),X=o("div",{d:"flex",align:"center",justify:"space-between",w:"100%",">button":{h:"50px",w:"240px",div:{fs:"15px",border:"none"}},"@md":{justify:"center",flexWrap:"wrap"}}),Z=o("div",{d:"flex",align:"center",justify:"center",gap:"5px",">button":{h:"50px",w:"240px",div:{fs:"15px",border:"none"}},">div>button":{minWidth:"170px"},"@md":{flexWrap:"wrap"}});o("div",{mt:"10px",w:"100%",height:"200px",background:"linear-gradient( -90deg, rgba(3, 16, 32, 0.40), rgba(3, 16, 32, 0.75) ,rgba(3, 16, 32, 0.40))",br:"10px",backgroundSize:"400% 400%",animation:`${W} 1.2s ease-in-out infinite`});const f=[{label:"Eyeke",value:"eyeke"},{label:"Kavian",value:"kavian"},{label:"Magor",value:"magor"},{label:"Naron",value:"naron"},{label:"Neri",value:"nerix"},{label:"Veles",value:"veles"}];A((n,r)=>({sponsorFilters:f,setSponsorFilters:s=>{n({sponsorFilters:s})}}));const ee=async()=>await D.get_table_rows({code:p.ADVENTURE_MC,index_position:1,limit:"10000",scope:p.ADVENTURE_MC,table:L.predefs}),ne=()=>I({queryKey:[P.SponsorAdv],queryFn:te,staleTime:1e3*60*60});async function te(){try{const n=await ee();return n!=null&&n.rows?n.rows.sort((s,i)=>((s==null?void 0:s.point_cost)||0)<((i==null?void 0:i.point_cost)||0)||(s.predefid||0)<(i.predefid||0)?1:-1):[]}catch(n){return console.log(n),[]}}async function se(n,r){const{executeTransaction:s}=S(),i=re(n,r);return!!await s(i)}function re(n,r){return{actions:[{account:p.ALIEN_WORLDS,name:"transfer",authorization:[{actor:r.name,permission:r.requestPermission}],data:{from:r.name,to:"adventure.mc",memo:`mcadventure,${n}`,quantity:"5000 TLM"}}]}}async function oe(n){const{executeTransaction:r,serializeActions:s}=S(),i=await s([{account:p.ALIEN_WORLDS,name:"transfer",authorization:[{actor:n.user.name,permission:n.user.requestPermission}],data:{from:n.user.name,to:"adventure.mc",memo:`adventure,${n.preDef.predefid}`,quantity:"5000.0000 TLM"}}]),l=ie(n,i);return!!await r(l)}function ie(n,r){return{actions:[{account:p.MSIG_WORLDS,name:"propose",authorization:[{actor:n.user.name,permission:n.user.requestPermission}],data:{proposer:n.user.name,proposal_name:Math.random().toString(36).replace(/[^a-z1-5]+/g,"").substring(0,12),requested:[{actor:`${n.selectedPlanet}.dac`,permission:"active"}],dac_id:n.selectedPlanet,metadata:[{key:"title",value:"Sponsoring Mission Control adventure"},{key:"description",value:`Sponsoring adventure ${n.preDef.title} for Mission Control. Play Mission Control on https://waxmissioncontrol.io`}],trx:{expiration:k(E,7),ref_block_num:0,ref_block_prefix:0,max_net_usage_words:0,max_cpu_usage_ms:0,delay_sec:0,context_free_actions:[],actions:r,transaction_extensions:[]}}}]}}const fe=()=>{const{data:n}=ne(),r=g(t=>t.user),[s,i]=x.useState(void 0),[l,d]=x.useState(!1),[j,y]=x.useState(1);function _(t,c){const a={...s,[t]:c};i(a)}async function v(t){var c;if(r)try{d(!0);const a={user:r,preDef:t,selectedPlanet:((c=s==null?void 0:s[t.predefid])==null?void 0:c.value)||f[0].value};if(console.log(a),await oe(a)){const C=await b(r.name);g.setState(m=>({...m,user:m.user?{...m.user,userTlm:C}:null}))}}catch(a){console.log(a)}finally{d(!1)}}async function T(t){if(r)try{if(d(!0),await se(t,r)){const a=await b(r.name);g.setState(u=>({...u,user:u.user?{...u.user,userTlm:a}:null}))}}catch(c){console.log(c)}finally{d(!1)}}return e.jsx(x.Suspense,{children:e.jsxs(N,{children:[e.jsxs(q,{children:[e.jsx(F,{children:"Sponsor an adventure"}),e.jsx("img",{src:"/assets/background/bg-sponsor-adventures.jpeg",alt:""})]}),e.jsxs(U,{children:[e.jsxs(B,{children:[e.jsx(z,{}),e.jsxs(O,{children:["- Sponsoring an adventure increases the prize pool over the coming weeks ",e.jsx("br",{})," - You will be shown in the “latest sponsors” section ",e.jsx("br",{})," - Sponsoring an adventure is non-refundable ",e.jsx("br",{})," - You can contribute to the prize pool directly by sending TLM to"," ",e.jsx("a",{href:"https://pool.mc/",target:"_blank",rel:"noreferrer",children:"pool.mc"})," ",e.jsx("br",{}),"- If you want a customized adventure, please contact the team in Discord"]})]}),n==null?void 0:n.map((t,c)=>c+1>j*10?null:e.jsxs(Q,{children:[e.jsx(V,{children:t.title}),e.jsxs(Y,{children:[e.jsxs(G,{children:[e.jsx("img",{src:`${M}/ipfs/${t==null?void 0:t.image}`,alt:t.title}),e.jsxs(K,{children:[e.jsxs(w,{children:[e.jsx("span",{children:"Duration"}),e.jsxs("span",{children:[t.duration_hours/24," Days"]})]}),e.jsxs(w,{children:[e.jsx("span",{children:"MC Point Entry Cost"}),e.jsx("span",{children:t.point_cost.toLocaleString("en-US")})]}),e.jsxs(w,{children:[e.jsx("span",{children:"Total Reward Points"}),e.jsx("span",{children:t.reward_qp.toLocaleString("en-US")})]})]})]}),e.jsxs(H,{children:[e.jsx(J,{children:t.flavor}),e.jsxs(X,{children:[e.jsx(h,{disabled:l,isLoading:l,onClick:()=>T(t.predefid),rounded:!1,color:"eleventh",children:"Sponsor for 5,000 TLM"}),e.jsxs(Z,{children:[e.jsx(h,{onClick:()=>v(t),rounded:!1,color:"eleventh",children:"Create Proposal"}),e.jsx(R,{borderColor1:"#D9D9D9",borderColor2:"#D9D9D9",className:"select",title:"",selected:(s==null?void 0:s[t==null?void 0:t.predefid])||f[0],options:f,onSelected:a=>_(t.predefid,a)})]})]})]})]})]},t.predefid)),j<=((n==null?void 0:n.length)??0)/10&&e.jsx(h,{rounded:!1,color:"eleventh",onClick:()=>y(t=>t+1),children:"Load More"})]})]})})};export{fe as default};
