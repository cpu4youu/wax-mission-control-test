import{e as se,s as d,j as e,R as oe,_ as re,X as ye,W as Te,a7 as ve,h as a,ak as y}from"./index-4436f4a7.js";import{R as Se,T as _e,P as Me,C as Ce,a as Fe,b as $e,I as Pe,c as Ae,d as De}from"./index.esm-b4b34d94.js";import{G as ee}from"./gradient-border-389ea91c.js";import{u as ke}from"./mine-query-98db146f.js";import"./index-263d1bbc.js";import"./index-37221e07.js";import"./index-5e6397f1.js";const Ie=se({"0%":{backgroundPosition:"0% 0%"},"100%":{backgroundPosition:"-135% 0%"}}),Re=se({"0%":{opacity:0,transform:"translateY(2px)"},"100%":{opacity:1,transform:"translateY(0)"}}),We=d(Se,{}),Ge=d(_e,{h:"50px","&[disabled]":{borderColor:"rgba(255,255,255,0.5)",opacity:"0.5"},variants:{isLoading:{true:{border:"none",background:"linear-gradient( -90deg, rgba(255,255,255,0.5),rgba(255,255,255,0.1),rgba(255,255,255,0.5))",animation:`${Ie} 1.2s ease-in-out infinite`,backgroundSize:"400% 400%"}}}}),Le=d(Me,{zIndex:99}),ze=d(Ce,{minWidth:220,bg:"rgba(121, 121, 121, 0.3)",border:"1px solid #fff",borderRadius:20,color:"$white500",padding:5,boxShadow:"0px 10px 38px -10px rgba(22, 23, 24, 0.35), 0px 10px 20px -15px rgba(22, 23, 24, 0.2)",animationDuration:"400ms",animationTimingFunction:"cubic-bezier(0.16, 1, 0.3, 1)",willChange:"transform, opacity",svg:{transition:"all .3s cubic-bezier(0.16, 1, 0.3, 1)","&:first-of-type":{position:"absolute",inset:"-1px 0 0 -1px",w:"calc(100% + 3px)",h:"calc(100% + 3px)",zIndex:-1}},'&[data-state="open"]':{bg:"linear-gradient(90deg, rgba(255, 255, 255,0.85) 0%, rgba(217, 217, 217,0.85) 105.75%)",br:"15px",zIndex:999,'&[data-side="bottom"]':{animationName:Re}},"@sm":{minW:"initial"}}),Ee=d(Fe,{maxH:"250px",overflowY:"auto","&::-webkit-scrollbar-thumb":{bg:"rgba(33, 33, 33, 0.7)",opacity:.1,borderRadius:"10px",border:"2px solid $black300"}}),Ve=d($e,{all:"unset",lineHeight:1,ff:"$body",fw:"$normal",fs:"16px",color:"$black500",textShadow:"1px 1px 3px rgba(0, 0, 0, 0.25)",cursor:"pointer",borderRadius:3,display:"flex",alignItems:"center",height:25,padding:"0 5px",paddingLeft:25,position:"relative",userSelect:"none",variants:{rarity:{Abundant:{color:"#4c4c4c"},Common:{color:"#000000"},Rare:{color:"#3d74e9"},Epic:{color:"#8719f0"},Legendary:{color:"#da992e"},Mythical:{color:"#d20066"}}},"@sm":{fs:"12px"}}),He=d(Pe,{position:"absolute",left:0,width:25,display:"inline-flex",alignItems:"center",justifyContent:"center"}),Ne=d("button",{display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:1,position:"relative",br:"20px",bg:"linear-gradient(90deg, rgba(255, 255, 255, 0.54) 0%, rgba(217, 217, 217, 0.3834) 105.75%)",color:"$black500",fw:"$bold",fs:"16px",ff:"$heading",h:"50px",minWidth:220,padding:"0 20px",svg:{transition:"all .3s cubic-bezier(0.16, 1, 0.3, 1)","&:first-of-type":{position:"absolute",inset:"0",w:"100%",h:"100%"}},'&[data-state="open"]':{zIndex:999,"svg:last-of-type":{transform:"rotate(180deg)"}},"@sm":{maxWidth:220,minWidth:"auto",width:"50%",fs:"12px","svg:last-of-type":{ml:"10px"}}});function S({title:s,options:x,disabled:g,selected:j,onSelected:h,colorize:T,notClearable:R,isLoading:o}){var r;function M(f){const t=x==null?void 0:x.find(C=>C.value===f&&C.value!=="none");h(t)}return e.jsxs(We,{children:[e.jsx(Ge,{disabled:o||g,asChild:!0,isLoading:o,children:e.jsx(Ne,{"aria-label":"Customise options",children:o?"":e.jsxs(e.Fragment,{children:[e.jsx(ee,{color1:"#FFB31F",color2:"#FFB31F"}),(j==null?void 0:j.label)||s,e.jsx(Ae,{size:15})]})})}),e.jsx(Le,{children:e.jsxs(ze,{align:"start",sideOffset:5,children:[e.jsx(ee,{color1:"#FFB31F",color2:"#FFB31F"}),e.jsx(Ee,{value:j!=null&&j.value?j.value:"none",onValueChange:M,children:(r=x==null?void 0:x.filter(f=>!R||f.value!=="none"))==null?void 0:r.map(f=>e.jsxs(Ve,{rarity:T?f==null?void 0:f.rarity:"Common",value:f.value,children:[e.jsx(He,{children:e.jsx(De,{})}),f.label]},f.value))})]})})]})}const Oe=d("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",w:"100%"}),Be=d("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",h:"165px",w:"100%",zIndex:1,img:{zIndex:-1,position:"absolute",h:"165px",w:"100%",objectFit:"cover",inset:0}}),Qe=d("h2",{d:"flex",align:"center",justify:"center",color:"$white500",fs:"40px",ff:"$heading",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.5)",w:"100%","@sm":{fs:"24px"}}),Ue=d("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%",maxW:"1000px",mt:"20px",gap:"4px","@md":{mb:"10px"},"@sm":{mt:"0px",pt:"40px",px:"10px",justify:"flex-start",overflow:"auto",direction:"column"}}),Ye=d("div",{d:"grid",gridTemplateRows:"1fr 1fr",gridTemplateColumns:"1fr 1fr 1fr 1fr",gridGap:"15px",w:"100%","@md":{padding:"0",gridTemplateAreas:`
    'tool1 tool1 shine1 shine1'
    'tool2 tool2 shine2 shine2'
    'tool3 tool3 shine3 shine3'
    'land land land land'
    'button button button button'`,mt:"40px",">div":{w:"100%",maxW:"100%",h:"50px","&:nth-child(1)":{gridArea:"tool1"},"&:nth-child(2)":{gridArea:"tool2"},"&:nth-child(3)":{gridArea:"tool3"},"&:nth-child(5)":{gridArea:"shine1"},"&:nth-child(6)":{gridArea:"shine2"},"&:nth-child(7)":{gridArea:"shine3"},"&:nth-child(4)":{mt:"10px",gridArea:"land",position:"relative"}},">button":{gridArea:"button"}},"@sm":{mt:"0px",maxW:"400px"}}),_=d("div",{d:"grid",gridTemplateRows:"1fr ",gridTemplateColumns:"1fr ",w:"100%",maxW:"100%",h:"40px",">p":{textAlign:"center",color:"$white500",fs:"18px",ff:"$heading",fw:"$bold"},"@md":{">p":{fs:"12px"},">button":{w:"100%",maxW:"100%",h:"40px"}}}),Ke=d("button",{w:"100%",maxW:"360px",h:"50px",br:"10px",border:"3px solid #D9D9D9",background:"#008FC3",color:"$white500",fs:"20px",fw:"$bold",ff:"$body","&[disabled]":{opacity:"0.5"},"@sm":{maxW:"100%"}});d("p",{textAlign:"center",w:"100%",fs:"12px",ff:"$heading"});const L=d("div",{d:"grid",gridTemplateColumns:"1fr 1fr",gridGap:"20px",mt:"40px",w:"100%","@sm":{gridTemplateColumns:"1fr"}}),I=d("div",{d:"flex",align:"center",justify:"flex-start",direction:"column",gap:"5px",w:"100%","@md":{maxW:"100%","&.basic-values":{maxW:"100%",">span":{"&:first-of-type":{mb:"10px"},"& >span:last-of-type":{w:"auto",textAlign:"right"}}}}}),P=d("h3",{w:"100%",color:"$white500",textShadow:"0px 4px 4px rgba(0, 0, 0, 1)",textTransform:"uppercase",mb:"10px",fs:"20px",fw:"$bold",ff:"$heading","@sm":{fs:"16px"}}),m=d("span",{d:"flex",align:"center",justify:"space-between",gap:"5px",w:"100%",">span":{d:"flex",align:"center",justify:"flex-start",gap:"5px",px:"10px",h:"40px",w:"100%",textShadow:"0px 4px 4px rgba(0, 0, 0, 1)",bg:"rgba(255, 255, 255, 0.03)",color:"$white500",fs:"18px",ff:"$body","&:last-child":{justify:"flex-end",textAlign:"right"}},"&.rarities":{"span:first-child::first-letter":{fs:"18px",fw:"bold",textAlign:"left"}},"&.rarity-mining":{"span:last-child":{fs:"16px",fw:"bold",textAlign:"left"}},"@sm":{">span":{minH:"20px",fs:"12px"},"&.rarities":{"span:first-child::first-letter":{fs:"14px"}},"&.rarity-mining":{">span:last-child":{fs:"12px",">span":{fs:"12px"}}}}}),k=d("div",{d:"flex",align:"center",justify:"space-between",gap:"5px",bg:"rgba(255, 255, 255, 0.03)",h:"40px",w:"100%",px:"10px",span:{d:"flex",align:"center",justify:"flex-end",gap:"5px",w:"100%",textShadow:"0px 4px 4px rgba(0, 0, 0, 1)",color:"$white500",fs:"18px",ff:"$body"},div:{d:"flex",align:"center",justify:"center",minW:"30px",h:"30px"},"@sm":{span:{minH:"20px",fs:"12px"}}}),Xe=d("div",{d:"flex",align:"center",justify:"flex-start",direction:"column",gap:"4px",w:"100%"}),qe=d("div",{d:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gridGap:"4px",h:"40px",w:"100%",span:{d:"flex",align:"center",justify:"center",w:"100%",color:"$white500",textShadow:"0px 4px 4px rgba(0, 0, 0, 1)",textAlign:"center",bg:"rgba(255, 255, 255, 0.16)",fs:"22px",fw:"$bold",ff:"$body"},"@md":{span:{fs:"16px"}},"@sm":{gridTemplateColumns:"2.3fr 0.8fr 0.7fr 1.1fr",gridGap:"5px",span:{fs:"12px"}}}),Je=d("div",{d:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gridGap:"4px",h:"40px",w:"100%",span:{d:"flex",align:"center",justify:"center",h:"40px",textShadow:"0px 4px 4px rgba(0, 0, 0, 1)",bg:"rgba(255, 255, 255, 0.03)",textAlign:"center",color:"$white500",fs:"20px",ff:"$body"},"@md":{span:{fs:"14px"}},"@sm":{gridTemplateColumns:"2.3fr 0.8fr 0.7fr 1.1fr",gridGap:"5px"}}),z=oe.lazy(()=>re(()=>import("./tlm-73c0fdff.js"),["assets/tlm-73c0fdff.js","assets/index-4436f4a7.js","assets/index-55fec1ff.css"])),ne=oe.lazy(()=>re(()=>import("./shards-33b812be.js"),["assets/shards-33b812be.js","assets/index-4436f4a7.js","assets/index-55fec1ff.css"])),ln=()=>{const{data:s,isLoading:x}=ye(),{data:g}=ke(),{data:j}=Te(),{data:h}=ve(),[T,R]=a.useState("general"),[o,M]=a.useState(void 0),[r,f]=a.useState(void 0),[t,C]=a.useState(void 0),[u,W]=a.useState(void 0),E=a.useMemo(()=>y((s==null?void 0:s.allData.filter(n=>n.toolname===(o==null?void 0:o.toolname)))??[],"shine","shine"),[s==null?void 0:s.allData,o]),V=a.useMemo(()=>y((s==null?void 0:s.allData.filter(n=>n.toolname===(r==null?void 0:r.toolname)))??[],"shine","shine"),[s==null?void 0:s.allData,r]),H=a.useMemo(()=>y((s==null?void 0:s.allData.filter(n=>n.toolname===(t==null?void 0:t.toolname)))??[],"shine","shine"),[s==null?void 0:s.allData,t]),te=a.useMemo(()=>o?y([o],"shine","shine")[0]:void 0,[o]),ie=a.useMemo(()=>o?y([o],"toolname","toolname")[0]:void 0,[o]),le=a.useMemo(()=>r?y([r],"shine","shine")[0]:void 0,[r]),ae=a.useMemo(()=>r?y([r],"toolname","toolname")[0]:void 0,[r]),de=a.useMemo(()=>t?y([t],"shine","shine")[0]:void 0,[t]),ce=a.useMemo(()=>t?y([t],"toolname","toolname")[0]:void 0,[t]),N=a.useCallback(()=>{var l;const n=(l=s==null?void 0:s.allData)==null?void 0:l.find(i=>i.toolname==="Standard Shovel"&&i.shine==="Stone");n&&M({...n,value:String((n==null?void 0:n.template_id)??""),label:(n==null?void 0:n.toolname)??""}),W(h==null?void 0:h.find(i=>i.landname==="Geothermal Springs"))},[s,h]),O=a.useCallback(()=>{var l,i,p,w,b,F,U,Y;const n=[];for(let $=0;$<(((l=s==null?void 0:s.userTools)==null?void 0:l.length)??0);$++){const we=(i=s==null?void 0:s.allData)==null?void 0:i.find(K=>{var X,q,J,Z;return K.toolname===((q=(X=s==null?void 0:s.userTools)==null?void 0:X[$])==null?void 0:q.name)&&K.shine===((Z=(J=s==null?void 0:s.userTools)==null?void 0:J[$])==null?void 0:Z.shine)});n.push(we)}n[0]&&M({...n[0],value:String(((p=n[0])==null?void 0:p.template_id)??""),label:((w=n[0])==null?void 0:w.toolname)??""}),n[1]&&f({...n[1],value:String(((b=n[1])==null?void 0:b.template_id)??""),label:((F=n[1])==null?void 0:F.toolname)??""}),n[2]&&C({...n[2],value:String(((U=n[2])==null?void 0:U.template_id)??""),label:((Y=n[2])==null?void 0:Y.toolname)??""}),W(h==null?void 0:h.find($=>$.landtype_id===(j==null?void 0:j.cardid)))},[s,h]);a.useEffect(()=>{!(s!=null&&s.userTools)||(s==null?void 0:s.userTools.length)===0?N():O()},[N,O,s]);const B=a.useMemo(()=>[(o==null?void 0:o.cooldown_seconds)??0,(r==null?void 0:r.cooldown_seconds)??0,(t==null?void 0:t.cooldown_seconds)??0].sort((n,l)=>l-n),[o==null?void 0:o.cooldown_seconds,r==null?void 0:r.cooldown_seconds,t==null?void 0:t.cooldown_seconds]),c=a.useCallback(n=>{const l=n??u,[i,p,w]=B,b=(l==null?void 0:l.cooldown_mod)??0;return!p&&!w?i*(b/10):w?(i+p)*(b/10):(i+p/2)*(b/10)},[B,u]),G=a.useMemo(()=>[o,r,t].reduce((l,i)=>{const p=i==null?void 0:i.rarity;return l[p]?{...l,[p]:l[p]+(Number(i==null?void 0:i.mining_power)??0)}:{...l,[p]:(i==null?void 0:i.mining_power)??0}},{}),[o,r,t]),A=a.useCallback(n=>{const l=n??u;return Object.keys(G).map(i=>{const p=G[i]*((l==null?void 0:l.mining_power_mod)??0)/1e4;return{rarity:i,percentage:(p>=.8?.8:p)*100}}).filter(i=>i.percentage>0)},[G,u]),v=a.useCallback(n=>A(n).reduce((i,p)=>{var b;const w=p.percentage/100*(((b=g==null?void 0:g.pool_buckets.find(F=>(F==null?void 0:F.key)===p.rarity))==null?void 0:b.formattedValue)??0);return i+w},0),[A,g==null?void 0:g.pool_buckets]),D=a.useCallback(n=>{if(v()===0)return 0;const l=n??u;return(((o==null?void 0:o.nft_power)??0)+((r==null?void 0:r.nft_power)??0)+((t==null?void 0:t.nft_power)??0))*((l==null?void 0:l.nft_power_mod)??0)/100},[u,o==null?void 0:o.nft_power,r==null?void 0:r.nft_power,t==null?void 0:t.nft_power]),Q=a.useMemo(()=>c()/60,[c]),pe=a.useMemo(()=>v()===0?0:v()/(c()>=0?c():1)*3600,[v,c]),xe=a.useMemo(()=>D()/(c()>=0?c():1)*3600,[D,c]),he=a.useMemo(()=>3600/(c()>=0?c():1),[c]),fe=a.useMemo(()=>{const n=(o==null?void 0:o.nft_power)??0,l=(r==null?void 0:r.nft_power)??0,i=(t==null?void 0:t.nft_power)??0;return(n+l+i)*((u==null?void 0:u.nft_power_mod)??0)/100},[o==null?void 0:o.nft_power,r==null?void 0:r.nft_power,t==null?void 0:t.nft_power,u==null?void 0:u.nft_power_mod]),ue=a.useMemo(()=>((o==null?void 0:o.pow)??0)+((r==null?void 0:r.pow)??0)+((t==null?void 0:t.pow)??0),[o==null?void 0:o.pow,r==null?void 0:r.pow,t==null?void 0:t.pow]),me=a.useMemo(()=>A().reduce((n,l)=>n+l.percentage,0),[A]),ge=a.useCallback(n=>v(n)/(c(n)>=0?c(n):1)*3600,[v,c]),je=a.useCallback(n=>D(n)/(c(n)>=0?c(n):1)*3600,[D,c]),be=a.useCallback(n=>{const l=c(n),i={hours:Math.floor(l/3600),minutes:Math.floor(l%3600/60),seconds:Math.floor(l%3600%60)},p=i.hours>0?`${i.hours}h `:"",w=i.minutes>0?`${i.minutes}m `:"",b=i.seconds>0?`${i.seconds}s `:"";return`${p}${w}${b}`},[c]);return e.jsxs(Oe,{children:[e.jsxs(Be,{children:[e.jsx(Qe,{children:"Tool Tactician"}),e.jsx("img",{src:"/assets/background/bg-tool-tactician.jpeg",alt:""})]}),e.jsxs(Ue,{children:[e.jsx(P,{children:"PICK A TOOL SETUP AND LAND TYPE"}),e.jsxs(Ye,{children:[e.jsx(_,{children:e.jsx(S,{colorize:!0,notClearable:!0,isLoading:x,selected:ie,onSelected:M,title:"Tool 1",options:s==null?void 0:s.tools})}),e.jsx(_,{children:e.jsx(S,{colorize:!0,isLoading:x,selected:ae,onSelected:f,title:"Tool 2",options:s==null?void 0:s.tools})}),e.jsx(_,{children:e.jsx(S,{colorize:!0,isLoading:x,selected:ce,onSelected:C,title:"Tool 3",options:s==null?void 0:s.tools})}),e.jsx(_,{children:e.jsx(S,{disabled:T==="land",isLoading:x,selected:T==="land"?void 0:u,onSelected:W,title:"Land Type",options:h})}),e.jsx(_,{children:e.jsx(S,{notClearable:!0,isLoading:x,selected:te||E[0],onSelected:M,title:"Shine 1",disabled:!o,options:E})}),e.jsx(_,{children:e.jsx(S,{isLoading:x,selected:le||V[0],onSelected:f,title:"Shine 1",disabled:!r,options:V})}),e.jsx(_,{children:e.jsx(S,{isLoading:x,selected:de||H[0],onSelected:C,title:"Shine 1",disabled:!t,options:H})}),e.jsx(Ke,{onClick:()=>R(T==="land"?"general":"land"),children:T==="land"?"Tool Explorer":"Land Overview"})]}),T==="general"?e.jsxs(e.Fragment,{children:[e.jsxs(L,{children:[e.jsxs(I,{children:[e.jsx(P,{children:"Values per Mine"}),e.jsxs(m,{children:[e.jsx("span",{children:"TLM"}),e.jsxs(k,{children:[e.jsx("span",{children:v().toFixed(4)}),e.jsx("div",{children:e.jsx(z,{color:"#fff"})})]})]}),e.jsxs(m,{children:[e.jsx("span",{children:"Shards"}),e.jsxs(k,{children:[e.jsx("span",{children:D().toFixed(1)}),e.jsx("div",{children:e.jsx(ne,{color:"#fff"})})]})]}),e.jsxs(m,{children:[e.jsx("span",{children:"Cooldown"}),e.jsxs("span",{children:[Q.toFixed(0)," minutes"]})]})]}),e.jsxs(I,{children:[e.jsx(P,{children:"Values per Hour"}),e.jsxs(m,{children:[e.jsx("span",{style:{color:"#F6A800"},children:"TLM"}),e.jsxs(k,{children:[e.jsx("span",{style:{color:"#F6A800"},children:pe.toFixed(4)}),e.jsx("div",{children:e.jsx(z,{})})]})]}),e.jsxs(m,{children:[e.jsx("span",{style:{color:"#F6A800"},children:"Shards"}),e.jsxs(k,{children:[e.jsx("span",{style:{color:"#F6A800"},children:xe.toFixed(2)}),e.jsx("div",{children:e.jsx(ne,{})})]})]}),e.jsxs(m,{children:[e.jsx("span",{children:"Mines"}),e.jsx("span",{children:he.toFixed(2)})]})]})]}),e.jsxs(L,{children:[e.jsxs(I,{children:[e.jsx(P,{children:"TLM POOLS AVERAGE (LAST WEEK)"}),g==null?void 0:g.pool_buckets.map(n=>{var l;return e.jsxs(m,{className:"rarities",children:[e.jsx("span",{children:n.key}),e.jsxs(k,{children:[e.jsx("span",{children:(l=n.formattedValue)==null?void 0:l.toFixed(4)}),e.jsx("div",{children:e.jsx(z,{color:"#fff"})})]})]},n.key)})]}),e.jsxs(I,{children:[e.jsx(P,{children:"Basic Values"}),e.jsxs(m,{className:"rarity-mining",children:[e.jsx("span",{children:"Rarity Mining Power"}),e.jsx("span",{children:A().map(n=>e.jsxs("p",{children:["  ",n.rarity[0]," ",n.percentage.toFixed(0),"%"]},n.rarity))})]}),e.jsxs(m,{children:[e.jsx("span",{children:"Total Mining Power"}),e.jsxs("span",{children:[me.toFixed(0),"% "]})]}),e.jsxs(m,{children:[e.jsx("span",{children:"Shard Power"}),e.jsx("span",{children:fe.toFixed(1)})]}),e.jsxs(m,{children:[e.jsx("span",{children:"Proof of Work"}),e.jsx("span",{children:ue.toFixed(0)})]}),e.jsxs(m,{children:[e.jsx("span",{children:"Cooldown"}),e.jsxs("span",{children:[(Q*60).toFixed(0)," seconds"]})]})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(L,{children:e.jsx(P,{children:"LAND OVERVIEW"})}),e.jsxs(qe,{children:[e.jsx("span",{children:"Land Type"}),e.jsx("span",{children:"Shards / h"}),e.jsx("span",{children:"TLM / h"}),e.jsx("span",{children:"Cooldown"})]}),e.jsx(Xe,{children:h==null?void 0:h.map(n=>e.jsxs(Je,{children:[e.jsx("span",{children:n.landname}),e.jsx("span",{children:je(n).toFixed(2)}),e.jsx("span",{children:ge(n).toFixed(4)}),e.jsx("span",{children:be(n)})]},n.landtype_id))})]})]})]})};export{ln as default};
