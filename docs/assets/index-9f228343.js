import{h as X,e as F,s as o,i as I,S as h,T as O,l as M,Q as b,q as D,n as Z,R as T,_ as $,f as j,j as e,B as W,b as A,r as q,m as g}from"./index-debea275.js";import{A as E}from"./index.esm-556ad06b.js";import{S as ee}from"./index-54ce9b82.js";import{a as te}from"./mineCooldown-846f8649.js";import{i as ne}from"./index-cbfe821f.js";import{H as V,a as re,b as ie}from"./index.esm-62444202.js";import{N}from"./index-01e87bf5.js";import{d as H}from"./use-transaction-22012aa4.js";import{s as B}from"./sleep-da79c358.js";import{d as oe}from"./index-186eda5c.js";import"./iconBase-a4980e6c.js";import"./index.esm-ea368e30.js";import"./index-e61f3181.js";import"./index-bf87a39d.js";import"./index-32d7fc83.js";import"./index-380f9d86.js";import"./index.esm-6e45c125.js";import"./user-miners-query-ab05518a.js";import"./axios-43b00e28.js";import"./index-ea76b77d.js";import"./index-4beb291e.js";const p=X((t,r)=>({selectedCrowdfunding:void 0,updateSelectedCrowdfunding:s=>se(t,s),crowdfundingType:"list",updateCrowdfundingType:s=>ae(t,s),filterList:{value:"new",label:"Newest"}}));function se(t,r){t(s=>({...s,selectedCrowdfunding:r}))}function ae(t,r){t(s=>({...s,crowdfundingType:r}))}const de=F({"0%":{backgroundPosition:"0% 0%"},"100%":{backgroundPosition:"-135% 0%"}}),le=o("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%",maxW:"1190px",padding:"0 15px",".select":{m:"10px auto 10px 0"},"@sm":{".select":{w:"100%",button:{minW:"100%"}}}}),ce=o("h2",{d:"flex",align:"center",justify:"center",color:"$white500",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.9)",fs:"40px",w:"100%",mt:"60px","@sm":{mt:"0px",fs:"26px"}}),ue=o("div",{d:"flex",align:"center",justify:"center",gap:"20px",w:"100%",mt:"20px",padding:"20px",border:"1px solid rgba(0, 0, 0, 0.4)",br:"13px",bg:"$blue100",svg:{color:"$white500",w:"25px",h:"25px",mr:"auto"},"@sm":{d:"none"}}),pe=o("span",{w:"100%",color:"$white500",textAlign:"center",fs:"14px",fw:"$bold",ff:"$heading","@lg":{fs:"12px"},"@md":{fs:"10px"},"@sm":{}}),xe=o("div",{d:"flex",align:"center",justify:"center",gap:"10px",">button":{h:"50px",minW:"240px"},"@sm":{direction:"column",my:"10px",">button":{order:-1}}}),fe=o("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",gap:"20px",pr:"20px",overflowY:"auto",w:"100%","@sm":{pr:"5px"}}),ge=o("div",{d:"flex",align:"flex-start",justify:"space-between",gap:"30px",w:"100%",br:"10px",background:"rgba(3, 16, 32, 0.65)",padding:"20px","@sm":{align:"flex-start",justify:"flex-start"},"@xsm":{direction:"column"}}),me=o("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column"}),we=o("h3",{fs:"24px",color:"$white500",mb:"10px"}),he=o("p",{color:"$white500",ff:"$heading",fs:"20px",overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":6,whiteSpace:"pre-wrap","@sm":{fs:"16px",mb:"auto"}}),be=o("div",{d:"flex",align:"center",justify:"center",direction:"column",gap:"15px",minW:"230px",">button":{h:"50px",minW:"170px"},"@sm":{minW:"unset"},"@xsm":{w:"100%",">button":{w:"100%",minW:"100%"}}}),P=o("div",{d:"flex",align:"center",gap:"20px",w:"100%",color:"$white500",ff:"$heading",fs:"20px","@sm":{fs:"16px",gap:"10px",svg:{w:"35px",h:"35px"}}}),je=o("div",{mt:"30px",w:"100%",height:"450px",background:"linear-gradient( -90deg, rgba(3, 16, 32, 0.40), rgba(3, 16, 32, 0.75) ,rgba(3, 16, 32, 0.40))",br:"10px",backgroundSize:"400% 400%",animation:`${de} 1.2s ease-in-out infinite`}),_e=async()=>{let t=!1,r=[];for(;!t;){const s=await I.get_table_rows({code:h.HQ_MU,index_position:1,limit:"10000",scope:h.HQ_MU,table:O.CROWDFUNDING,show_payer:!1,reverse:!0,json:!0});t=!s.more,r=[...s.rows]}return r},ye=()=>M({queryKey:[b.CROWDFUNDING],queryFn:()=>ve(),staleTime:1e3*60*60});async function J(){return D.removeQueries(b.CROWDFUNDING),await D.invalidateQueries(b.CROWDFUNDING)}async function ve(){try{const t=await _e();return t?Ce(t):null}catch(t){return console.log(t),null}}function Ce(t){return t.map(r=>{const s=new Date(r.funding_date);return{...r,contribute:!1,create:!1,formatted_start_date:ne(Z,new Date(r.funding_date))?{days:-1,hours:-1,minutes:-1,seconds:-1}:te(s)}}).sort((r,s)=>{const d=new Date(r.creation_date).getTime(),l=new Date(s.creation_date).getTime();return d>l?-1:d<l?1:0})}const Te=T.lazy(()=>$(()=>import("./clock-a472fef0.js"),["assets/clock-a472fef0.js","assets/index-debea275.js","assets/index-55fec1ff.css"])),$e=T.lazy(()=>$(()=>import("./fire-faa6e750.js"),["assets/fire-faa6e750.js","assets/index-debea275.js","assets/index-55fec1ff.css"])),De=T.lazy(()=>$(()=>import("./tlm-progress-87eb080d.js"),["assets/tlm-progress-87eb080d.js","assets/index-debea275.js","assets/index-55fec1ff.css"])),Y=[{value:"new",label:"Newest"},{value:"high",label:"Highest Score"},{value:"low",label:"Lowest Score"}],Se=()=>{const{data:t,isLoading:r}=ye(),s=p(n=>n.updateSelectedCrowdfunding),d=p(n=>n.updateCrowdfundingType),l=p(n=>n.filterList);function i(n){t==null||t.sort((c,f)=>{const u=c.upvotes-c.downvotes,m=f.upvotes-f.downvotes,a=new Date(c.creation_date).getTime(),w=new Date(f.creation_date).getTime();if((n==null?void 0:n.value)==="new"){if(a>w)return-1;if(a<w)return 1}if((n==null?void 0:n.value)==="high"){if(u>m)return-1;if(u<m)return 1}if((n==null?void 0:n.value)==="low"){if(u<m)return-1;if(u>m)return 1}return 0}),p.setState(c=>({...c,filterList:n??Y[0]}))}const x=t==null?void 0:t.filter(n=>n.formatted_start_date.seconds>0||j(n.received_funding)>=j(n.requested_funding));return e.jsxs(le,{children:[e.jsx(ce,{children:"Crowdfunding"}),e.jsxs(ue,{children:[e.jsx(E,{}),e.jsxs(pe,{children:[" ","Members can vote on each campaign. TLM of unsuccessful campaigns will get refunded at the end of the funding period."]})]}),e.jsxs(xe,{children:[e.jsx(ee,{title:"",options:Y,selected:l,onSelected:i,className:"select"}),e.jsx(W,{onClick:()=>d("create"),color:"gradientPink",children:"Create Campaign"})]}),e.jsx(fe,{children:r?e.jsx(je,{}):x==null?void 0:x.map(n=>{const c=n.upvotes-n.downvotes;return e.jsxs(ge,{children:[e.jsxs(me,{children:[e.jsx(we,{children:n.title}),e.jsx(he,{children:n.description})]}),e.jsxs(be,{children:[e.jsxs(P,{children:[e.jsx(De,{}),(j(n.received_funding)/j(n.requested_funding)*100).toFixed(2),"%"]}),e.jsxs(P,{children:[e.jsx($e,{}),c>0?`+${c}`:c," (",n.upvotes+n.downvotes,")"]}),e.jsxs(P,{children:[e.jsx(Te,{}),n.formatted_start_date.minutes===-1?"Ended":`${n.formatted_start_date.days}d ${n.formatted_start_date.hours}h 
                    ${n.formatted_start_date.minutes}m`]}),e.jsx(W,{onClick:()=>{s(n),d("detail")},color:"gradientPink",children:"Details"})]})]},n.crowdfunding_id)})})]})},Le=F({"0%":{backgroundPosition:"0% 0%"},"100%":{backgroundPosition:"-135% 0%"}}),Ne=o("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%",maxW:"1190px",padding:"0 15px",position:"relative",">svg":{position:"absolute",top:"70px",left:"15px"},"@sm":{">svg":{top:"0px"}}}),We=o("h2",{d:"flex",align:"center",justify:"center",color:"$white500",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.9)",fs:"40px",w:"100%",mt:"60px","@sm":{mt:"0px",fs:"20px"}}),Ae=o("span",{d:"flex",align:"center",justify:"center",color:"$white500",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.9)",fs:"20px",ff:"$heading",w:"100%",mt:"5px","@sm":{mt:"0px",fs:"16px"}}),ke=o("div",{d:"flex",align:"center",justify:"center",gap:"20px",w:"100%",mt:"20px",padding:"20px",border:"1px solid rgba(0, 0, 0, 0.4)",br:"13px",bg:"$blue100",svg:{color:"$white500",w:"25px",h:"25px",mr:"auto"},"@sm":{d:"none"}}),Re=o("span",{w:"100%",color:"$white500",textAlign:"center",fs:"14px",fw:"$bold",ff:"$heading","@lg":{fs:"12px"},"@md":{fs:"10px"},"@sm":{}}),qe=o("div",{d:"grid",gridTemplateColumns:"1fr",pr:"20px",gap:"20px",overflowY:"auto",maxHeight:"calc(100vh - 650px)",w:"100%","@sm":{maxHeight:"calc(100vh - 440px)"},"@xsm":{gap:"5px",pr:"10px",maxHeight:"calc(100vh - 490px)"}}),Fe=o("div",{d:"grid",gridTemplateColumns:"repeat(3, 1fr) 2fr",pr:"20px",m:"30px 0 20px",overflowY:"auto",maxHeight:"calc(100vh - 650px)",w:"100%",span:{d:"flex",align:"center",justify:"center",color:"$white500",ff:"$heading",fw:"$bold",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.9)"},"@sm":{gridTemplateColumns:"repeat(3, 1fr) 1fr",maxHeight:"calc(100vh - 440px)"},"@xsm":{m:"20px 0 15px",pr:"10px",gridTemplateColumns:"repeat(3, 1fr)",maxHeight:"calc(100vh - 490px)"}}),Ie=o("h2",{d:"flex",align:"center",justify:"center",color:"$white500",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.9)",fs:"24px",w:"100%","@sm":{mt:"10px",fs:"22px"}}),Oe=o("div",{d:"grid",gridTemplateColumns:"repeat(3, 1fr) 2fr",w:"100%",br:"10px",background:"rgba(3, 16, 32, 0.65)",padding:"20px",span:{d:"flex",align:"center",justify:"center",color:"$white500",ff:"$heading",fw:"$bold",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.9)"},"@sm":{gridTemplateColumns:"repeat(3, 1fr) 1fr"},"@xsm":{padding:"20px 10px",span:{fs:"10px"},gridTemplateColumns:"repeat(3, 1fr)",direction:"column"}}),Me=o("div",{d:"flex",align:"center",justify:"center",direction:"column",gap:"5px",mb:"10px",w:"100%",">button":{width:"240px",height:"50px"},"@md":{">div":{maxW:"unset"}},"@sm":{mt:"10px",minW:"unset"},"@xsm":{w:"100%"}}),Ee=o("div",{d:"flex",align:"center",justify:"center",gap:"10px",color:"$white500",ff:"$heading",fw:"$bold",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.9)",w:"100%","@sm":{minW:"unset"},"@xsm":{w:"100%",gap:"5px",span:{fs:"10px"}}}),Ue=o("div",{mt:"30px",w:"100%",height:"450px",background:"linear-gradient( -90deg, rgba(3, 16, 32, 0.40), rgba(3, 16, 32, 0.75) ,rgba(3, 16, 32, 0.40))",br:"10px",backgroundSize:"400% 400%",animation:`${Le} 1.2s ease-in-out infinite`}),ze=async t=>{let r=!1,s=[];for(;!r;){const d=await I.get_table_rows({code:h.HQ_MU,index_position:2,key_type:"i64",limit:"10000",scope:h.HQ_MU,table:O.CROWDFUNDS,show_payer:!1,json:!0,upper_bound:t,lower_bound:t});r=!d.more,s=[...d.rows]}return s},Pe=t=>M({queryKey:[b.CROWDFUNDING_CONTRIBUTE,t],queryFn:()=>Ve(t),staleTime:1e3*60*60});async function Qe(){return D.removeQueries(b.CROWDFUNDING_CONTRIBUTE),await D.invalidateQueries(b.CROWDFUNDING_CONTRIBUTE)}async function Ve(t){try{const r=await ze(t);return r?r.sort((d,l)=>new Date(l.payout_date).getTime()-new Date(d.payout_date).getTime()):null}catch(r){return console.log(r),null}}async function He(t,r){const{executeTransaction:s}=H(),d=Be(t,r);return!!await s(d)}function Be(t,r){return{actions:[{account:h.ALIEN_WORLDS,name:"transfer",authorization:[{actor:t.name,permission:t.authorization.permission}],data:r}]}}const Ge=T.lazy(()=>$(()=>import("./tlm-cc7f5850.js"),["assets/tlm-cc7f5850.js","assets/index-debea275.js","assets/index-55fec1ff.css"])),Ye=()=>{const t=A(a=>a.user),r=p(a=>a.selectedCrowdfunding),s=p(a=>a.crowdfundingType),d=p(a=>a.updateCrowdfundingType),{data:l,isLoading:i}=Pe(`${r==null?void 0:r.crowdfunding_id}`),[x,n]=q.useState(0),[c,f]=q.useState(!1);if(!r)return null;function u(a){j(a.target.value)?n(j(a.target.value)):n(0)}async function m(){try{if(f(!0),x<=0||!t)return;const a={from:t.name,memo:`crowdfunding,${r==null?void 0:r.crowdfunding_id}`,quantity:`${x.toFixed(4)} TLM`,to:"hq.mu"};await He(t,a)&&(await B(500),await Qe(),g.success("Campaign contributed successfully"))}catch(a){console.log(a)}finally{f(!1)}}return e.jsxs(Ne,{children:[e.jsx(We,{children:r.title}),e.jsxs(Ae,{children:["by ",r.to]}),s!=="list"&&e.jsx(V,{color:"white",size:40,onClick:()=>d("detail")}),e.jsxs(ke,{children:[e.jsx(E,{}),e.jsxs(Re,{children:[" ","TLM of unsuccessful campaigns will get refunded at the end of the funding period."]})]}),e.jsxs(Me,{children:[e.jsx(N,{value:`${x} TLM`,onChange:u}),e.jsx(W,{disabled:c,isLoading:c,onClick:m,color:"gradientPink",children:"Contribute"})]}),e.jsx(Ie,{children:"Recent Contributions"}),e.jsxs(Fe,{children:[e.jsx("span",{children:"Wallet"}),e.jsx("span",{children:"Amount"})]}),e.jsx(qe,{children:i?e.jsx(Ue,{}):l==null?void 0:l.map(a=>e.jsxs(Oe,{children:[e.jsx("span",{children:a.sender}),e.jsxs(Ee,{children:[j(a.funds).toFixed(4)," ",e.jsx(Ge,{})]})]},a.crowdfunds_id))})]})},Ke=F({"0%":{backgroundPosition:"0% 0%"},"100%":{backgroundPosition:"-135% 0%"}}),Je=o("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%",maxW:"1190px",padding:"0 15px",position:"relative",".select":{m:"10px auto 10px 0"},">svg":{position:"absolute",top:"70px",left:"15px"},"@sm":{">svg":{top:"0px"},".select":{w:"100%",button:{minW:"100%"}}}}),Xe=o("h2",{d:"flex",align:"center",justify:"center",textAlign:"center",color:"$white500",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.9)",fs:"40px",w:"100%",mt:"60px","@sm":{mt:"0px",fs:"22px"}}),Ze=o("span",{d:"flex",align:"center",justify:"center",color:"$white500",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.9)",fs:"20px",ff:"$heading",w:"100%",mt:"5px","@sm":{mt:"0px",fs:"18px"}}),et=o("div",{d:"flex",align:"center",justify:"center",gap:"20px",w:"100%",mt:"20px",padding:"20px",border:"1px solid rgba(0, 0, 0, 0.4)",br:"13px",bg:"$blue100",svg:{color:"$white500",w:"25px",h:"25px",mr:"auto"},"@sm":{d:"none"}}),tt=o("span",{w:"100%",color:"$white500",textAlign:"center",fs:"14px",fw:"$bold",ff:"$heading","@lg":{fs:"12px"},"@md":{fs:"10px"},"@sm":{}}),nt=o("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",gap:"20px",pr:"20px",overflowY:"auto",w:"100%","@sm":{pr:"5px"}}),_=o("div",{d:"flex",align:"center",justify:"space-between",gap:"30px",w:"100%",br:"10px",background:"rgba(3, 16, 32, 0.65)",padding:"20px","@sm":{align:"flex-start",justify:"flex-start"},"@xsm":{direction:"column"}}),y=o("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column"}),v=o("h3",{fs:"24px",color:"$white500",mb:"10px"}),C=o("p",{color:"$white500",ff:"$heading",fs:"20px","@sm":{fs:"16px",mb:"auto"}}),rt=o("div",{d:"flex",align:"center",justify:"center",direction:"column",gap:"15px",w:"100%",m:"20px 0","@sm":{minW:"unset"},"@xsm":{w:"100%"}}),Q=o("div",{d:"flex",align:"center",gap:"20px",w:"100%",color:"$white500",ff:"$heading",fs:"20px","@sm":{fs:"16px",gap:"10px",svg:{w:"35px",h:"35px"}}}),it=o("div",{d:"flex",align:"center",justify:"center",gap:"10px",w:"max-content",">button":{h:"50px",minW:"170px"},"@sm":{gap:"10px",svg:{w:"35px",h:"35px"},">button":{w:"100%"}}}),ot=o("div",{d:"flex",align:"center",justify:"center",gap:"10px",svg:{cursor:"pointer",w:"35px",h:"35px"},"@sm":{fs:"16px",gap:"10px"}}),st=o("div",{d:"flex",align:"center",justify:"space-between",gap:"20px",w:"100%","@sm":{fs:"16px",gap:"10px",svg:{w:"35px",h:"35px"}},"@xsm":{direction:"column",svg:{w:"35px",h:"35px"}}}),K=o("div",{w:"35px",h:"35px",background:"linear-gradient( -90deg, rgba(166, 166, 166, 0.40), rgba(166, 166, 166, 0.75) ,rgba(166, 166, 166, 0.40))",br:"10px",backgroundSize:"400% 400%",animation:`${Ke} 1.2s ease-in-out infinite`});async function at(t,r){const{executeTransaction:s}=H(),d=dt(t,r);return!!await s(d)}function dt(t,r){return{actions:[{account:h.HQ_MU,name:"votecrowdf",authorization:[{actor:t.name,permission:t.authorization.permission}],data:{...r,wallet:t.name}}]}}const lt=async t=>{let r=!1,s=[];for(;!r;){const d=await I.get_table_rows({code:h.HQ_MU,index_position:1,limit:"10000",scope:t,table:O.CROWDVOTES,show_payer:!1,json:!0});r=!d.more,s=[...d.rows]}return s},ct=()=>M({queryKey:[b.CROWDFUNDING_VOTES],queryFn:()=>pt(),staleTime:1e3*60*60,enabled:!!A.getState().user});async function ut(){return D.removeQueries(b.CROWDFUNDING_VOTES),await D.invalidateQueries(b.CROWDFUNDING_VOTES)}async function pt(){try{const t=A.getState().user;if(!t)return null;const r=await lt(t.name);return r||null}catch(t){return console.log(t),null}}const xt=T.lazy(()=>$(()=>import("./clock-a472fef0.js"),["assets/clock-a472fef0.js","assets/index-debea275.js","assets/index-55fec1ff.css"])),ft=T.lazy(()=>$(()=>import("./fire-faa6e750.js"),["assets/fire-faa6e750.js","assets/index-debea275.js","assets/index-55fec1ff.css"])),gt=T.lazy(()=>$(()=>import("./tlm-progress-87eb080d.js"),["assets/tlm-progress-87eb080d.js","assets/index-debea275.js","assets/index-55fec1ff.css"])),mt=()=>{const{data:t,isLoading:r}=ct(),[s,d]=q.useState(!1),l=A(a=>a.user),i=p(a=>a.selectedCrowdfunding),x=p(a=>a.updateSelectedCrowdfunding),n=p(a=>a.updateCrowdfundingType),c=p(a=>a.crowdfundingType);if(!i)return null;const f=i.upvotes-i.downvotes,u=t==null?void 0:t.find(a=>a.crowdfunding_proposal_id===i.crowdfunding_id);async function m(a){try{if(d(!0),!l||!i)return;let w={crowdfunding_proposal_id:i.crowdfunding_id,vote_type:a,remove_vote:!1};if(u&&u.vote_type===Number(a)&&(w={crowdfunding_proposal_id:i.crowdfunding_id,vote_type:a,remove_vote:!0}),await at(l,w)){await B(700),await ut(),await J();const[[z,S]]=D.getQueriesData(b.CROWDFUNDING),k=S==null?void 0:S.find(R=>R.crowdfunding_id===i.crowdfunding_id);x(k),g.success("Vote successful")}}catch(w){console.log(w)}finally{d(!1)}}return e.jsxs(Je,{children:[e.jsx(Xe,{children:i==null?void 0:i.title}),e.jsxs(Ze,{children:["by ",i==null?void 0:i.to]}),c!=="list"&&e.jsx(V,{color:"white",size:40,onClick:()=>x(void 0)}),e.jsxs(et,{children:[e.jsx(E,{}),e.jsxs(tt,{children:[" ","TLM of unsuccessful campaigns will get refunded at the end of the funding period."]})]}),e.jsxs(rt,{children:[e.jsxs(Q,{children:[e.jsx(gt,{}),(j(i.received_funding)/j(i.requested_funding)).toFixed(2),"%"]}),e.jsxs(Q,{children:[e.jsx(ft,{}),f>0?`+${f}`:f," (",i.upvotes+i.downvotes,")"]}),e.jsxs(st,{children:[e.jsxs(Q,{children:[e.jsx(xt,{}),i.formatted_start_date.minutes===-1?"Ended":`${i.formatted_start_date.days}d ${i.formatted_start_date.hours}h 
                    ${i.formatted_start_date.minutes}m`]}),e.jsxs(it,{children:[r||s?e.jsxs(e.Fragment,{children:[e.jsx(K,{}),e.jsx(K,{})]}):e.jsxs(ot,{children:[e.jsx(re,{onClick:()=>m(!0),color:u&&u.vote_type?"#00BAFF":"#A6A6A6"}),e.jsx(ie,{onClick:()=>m(!1),color:u?u.vote_type?"#A6A6A6":"#00BAFF":"#A6A6A6"})]}),e.jsx(W,{onClick:()=>{n("contribute"),x(i)},color:"gradientPink",children:"Contribute"})]})]})]}),e.jsxs(nt,{children:[e.jsx(_,{children:e.jsxs(y,{children:[e.jsx(v,{children:"Overview"}),e.jsx(C,{children:i==null?void 0:i.overview})]})}),e.jsx(_,{children:e.jsxs(y,{children:[e.jsx(v,{children:"The objective"}),e.jsx(C,{children:i==null?void 0:i.objective})]})}),e.jsx(_,{children:e.jsxs(y,{children:[e.jsx(v,{children:"Description"}),e.jsx(C,{children:i==null?void 0:i.description})]})}),e.jsx(_,{children:e.jsxs(y,{children:[e.jsx(v,{children:"Business Model"}),e.jsx(C,{children:i==null?void 0:i.business_model})]})}),e.jsx(_,{children:e.jsxs(y,{children:[e.jsx(v,{children:"Duration"}),e.jsx(C,{children:i==null?void 0:i.duration})]})}),e.jsx(_,{children:e.jsxs(y,{children:[e.jsx(v,{children:"Teaminfo"}),e.jsx(C,{children:i==null?void 0:i.teaminfo})]})}),e.jsx(_,{children:e.jsxs(y,{children:[e.jsx(v,{children:"TLM Request"}),e.jsx(C,{children:i==null?void 0:i.requested_funding})]})}),e.jsx(_,{children:e.jsxs(y,{children:[e.jsx(v,{children:"Fundraising Duration (Days)"}),e.jsx(C,{children:oe(new Date(i==null?void 0:i.funding_date),new Date(i==null?void 0:i.creation_date))})]})})]})]})},wt=F({"0%":{backgroundPosition:"0% 0%"},"100%":{backgroundPosition:"-135% 0%"}}),ht=o("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",w:"100%",maxW:"1190px",padding:"0 15px",">svg":{cursor:"pointer",position:"absolute",top:"70px",left:"25px"},"@sm":{">button":{maxW:"100%",w:"100%",h:"50px"},">svg":{position:"absolute",top:"0px",left:"25px"}}}),bt=o("h2",{d:"flex",align:"center",justify:"center",color:"$white500",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.9)",fs:"40px",w:"100%",mt:"60px","@sm":{mt:"0px",fs:"26px"},"@xsm":{fs:"20px"}}),jt=o("div",{d:"flex",align:"center",justify:"center",gap:"20px",w:"100%",mt:"20px",padding:"20px",border:"1px solid rgba(0, 0, 0, 0.4)",br:"13px",bg:"$blue100",svg:{color:"$white500",w:"25px",h:"25px",mr:"auto"},"@sm":{}}),_t=o("span",{w:"100%",color:"$white500",textAlign:"center",fs:"14px",fw:"$bold",ff:"$heading","@lg":{fs:"12px"},"@md":{fs:"10px"},"@sm":{}}),yt=o("form",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",gap:"20px",pr:"20px",overflowY:"auto",w:"100%",">button":{m:"20px auto 0",w:"260px",h:"50px"},">div":{w:"100%",label:{fs:"16px"},".text-area":{svg:{w:"100.7%"}}},"@md":{">div":{maxW:"100%",">div":{maxW:"100%"}}},"@xsm":{">div":{label:{fs:"12px"}}}});o("div",{mt:"30px",w:"100%",height:"450px",background:"linear-gradient( -90deg, rgba(3, 16, 32, 0.40), rgba(3, 16, 32, 0.75) ,rgba(3, 16, 32, 0.40))",br:"10px",backgroundSize:"400% 400%",animation:`${wt} 1.2s ease-in-out infinite`});const vt=o("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",position:"relative",w:"100%",gap:"5px","&:has(>textarea:disabled)":{label:{color:"$white800"}},"@md":{fs:"15px",maxW:"150px"}}),Ct=o("label",{w:"100%",fs:"12px",ff:"$heading",textShadow:" 0px 4px 4px rgba(0, 0, 0, 0.5)",outline:"none",color:"$white500",border:"none"}),Tt=o("div",{position:"relative",d:"flex",align:"flex-start",justify:"flex-start",direction:"column",w:"100%",h:"100%",svg:{"&:first-of-type":{position:"absolute",inset:"0",zIndex:1,w:"101.4%",h:"100%",rect:{strokeWidth:"4px !important"}}},"@md":{fs:"15px",maxW:"150px"}}),$t=o("textarea",{zIndex:1,d:"flex",align:"center",justify:"center",bg:"linear-gradient(90deg, rgba(255, 255, 255, 0.5) 0%, rgba(217, 217, 217, 0.5) 105.75%)",w:"100%",maxW:"520px",minW:"100%",minH:"110px",maxH:"210px",fs:"20px",ff:"$heading",fw:"$normal",outline:"none",color:"$black500",padding:"2px 9px",margin:"3px",border:"none",br:"10px","&::-webkit-scrollbar":{width:"10px",height:"10px",padding:"0px",background:"transparent",border:"solid 1px transparent",borderRadius:"10px","@mdW":{width:"4px",height:"4px"}},"&::-webkit-scrollbar-track":{border:"solid 1px transparent"},"&::-webkit-scrollbar-thumb":{bg:"linear-gradient(90deg, rgba(255, 255, 255, 0.7) 0%, rgba(217, 217, 217, 0.7) 105.75%)",borderRadius:"10px"},"&:hover":{borderColor:"$blue100"},"&:not(:placeholder-shown)":{borderColor:"$blue100"},"&:disabled":{cursor:"not-allowed",borderColor:"$white800"}}),Dt=T.lazy(()=>$(()=>import("./gradient-border-86acbbea.js"),["assets/gradient-border-86acbbea.js","assets/index-debea275.js","assets/index-55fec1ff.css"])),L=({label:t,ref:r,className:s,...d})=>e.jsxs(vt,{children:[e.jsx(Ct,{htmlFor:"TextArea",children:t}),e.jsxs(Tt,{className:s,children:[e.jsx(Dt,{}),e.jsx($t,{id:"TextArea",...d,ref:r,placeholder:(d==null?void 0:d.placeholder)??" "})]})]});async function St(t,r){const{executeTransaction:s}=H(),d=Lt(t,r);return!!await s(d)}function Lt(t,r){return{actions:[{account:h.ALIEN_WORLDS,name:"transfer",authorization:[{actor:t.name,permission:t.authorization.permission}],data:{from:t.name,memo:"crowdfdeposit",quantity:"10.0000 TLM",to:"hq.mu"}},{account:h.HQ_MU,name:"addcrowdf",authorization:[{actor:t.name,permission:t.authorization.permission}],data:r}]}}const Nt=({config:t})=>{const r=A(n=>n.user),s=p(n=>n.crowdfundingType),d=p(n=>n.updateCrowdfundingType),[l,i]=q.useState(!1);async function x(n){var f,u,m,a,w,U,z,S,k,R;if(n.preventDefault(),!r)return null;if(!((f=n.target.title)!=null&&f.value))return g.warning("Title is required");if(!((u=n.target.description)!=null&&u.value))return g.warning("Description is required");if(!((m=n.target.requested_funding)!=null&&m.value))return g.warning("Requested Funding is required");if(!((a=n.target.wallet)!=null&&a.value))return g.warning("Wallet is required");if(!((w=n.target.business_model)!=null&&w.value))return g.warning("Business Model is required");if(!((U=n.target.duration)!=null&&U.value))return g.warning("Duration is required");if(!((z=n.target.teaminfo)!=null&&z.value))return g.warning("Teaminfo is required");if(!((S=n.target.days_fundraising)!=null&&S.value))return g.warning("Days Fundraising is required");if(!((k=n.target.overview)!=null&&k.value))return g.warning("Overview is required");if(!((R=n.target.objective)!=null&&R.value))return g.warning("Objective is required");const c={title:n.target.title.value,description:n.target.description.value,requested_funding:`${n.target.requested_funding.value}.0000 TLM`,wallet:n.target.wallet.value,business_model:n.target.business_model.value,duration:n.target.duration.value,teaminfo:n.target.teaminfo.value,overview:n.target.overview.value,objective:n.target.objective.value,days_fundraising:Number(n.target.days_fundraising.value),to:r.name,daorules:!1};try{i(!0),await St(r,c)&&(await B(1e3),await J(),g.success("Campaign created successfully"),d("list"))}catch(G){console.log(G)}finally{i(!1)}}return e.jsxs(ht,{children:[e.jsx(bt,{children:"Create Campaign"}),s!=="list"&&e.jsx(V,{color:"white",size:40,onClick:()=>d("list")}),e.jsxs(jt,{children:[e.jsx(E,{}),e.jsxs(_t,{children:[" ","Creating a campaign costs 10 TLM. If a campaign is successful, Mission Control takes a 1% fee on the raised funds."]})]}),e.jsxs(yt,{onSubmit:x,children:[e.jsxs(W,{isLoading:l,disabled:l,type:"submit",color:"gradientPink",children:["Create Campaign (",j((t==null?void 0:t[0].proposal_cost)??"")," TLM)"]}),e.jsx(N,{id:"title",label:"Campaign Name",required:!0}),e.jsx(L,{className:"text-area",id:"overview",label:"The Overview, a TLDR about your campaign",required:!0}),e.jsx(L,{className:"text-area",id:"description",label:"Description, details about your campaign",required:!0}),e.jsx(L,{className:"text-area",id:"objective",label:"The Objective, the problem you are trying to solve",required:!0}),e.jsx(L,{className:"text-area",id:"business_model",label:"Business Model, how you achieve sustainability",required:!0}),e.jsx(L,{id:"duration",className:"text-area",label:"Duration, how long it will take to complete your idea",type:"number",required:!0}),e.jsx(L,{className:"text-area",id:"teaminfo",label:"Teaminfo",required:!0}),e.jsx(N,{id:"days_fundraising",label:"Fundraising Duration (Days)",type:"number",required:!0}),e.jsx(N,{id:"requested_funding",label:"TLM Request",type:"number",required:!0}),e.jsx(N,{id:"wallet",label:"Receiving Wallet",required:!0})]})]})},Wt=async()=>{let t=!1,r=[];for(;!t;){const s=await I.get_table_rows({code:h.HQ_MU,index_position:1,limit:"10000",scope:h.HQ_MU,table:O.CROWDFUNDINGCOFIG,show_payer:!1,json:!0});t=!s.more,r=[...s.rows]}return r},At=()=>M({queryKey:[b.CROWDFUNDING_CONFIG],queryFn:()=>kt(),staleTime:1e3*60*60});async function kt(){try{const t=await Wt();return t||null}catch(t){return console.log(t),null}}const tn=()=>{const{data:t}=At(),r=p(d=>d.crowdfundingType),s=p(d=>d.selectedCrowdfunding);return r==="create"?e.jsx(Nt,{config:t}):s&&r==="detail"?e.jsx(mt,{}):s&&r==="contribute"?e.jsx(Ye,{}):e.jsx(Se,{})};export{tn as default};
