import{s as a,S as _,u as O,aD as B,aC as L,b as A,R as f,j as t,B as v,aw as k,aE as b,av as E,h as R,aG as M,k as N}from"./index-7e20aa52.js";import{C as G}from"./index-848c70bc.js";import{P as H}from"./pickaxe-2f255659.js";import{a as I}from"./index.esm-caccf42d.js";import{C as V}from"./check-052d6cd1.js";const W=a("div",{d:"flex",align:"flex-start",justify:"center",direction:"column",mt:"35px",w:"100%",button:{w:"100%",h:"45px",fs:"16px",maxW:"230px",minW:"130px",minH:"unset",">div":{border:"none"}}}),D=a("h2",{d:"flex",align:"center",justify:"center",mb:"15px",fs:"20px",color:"$white500"}),P=a("div",{d:"flex",align:"center",gap:"15px",w:"100%"}),Q=a("div",{d:"grid",gridTemplateColumns:"repeat(2, minmax(160px, 1fr))",gap:"15px",mt:"15px",w:"100%","@sm":{gridTemplateColumns:"repeat(1, minmax(160px, 1fr))",justify:"center"}}),$=a("div",{d:"flex",align:"center",justify:"center",gap:"25px",px:"5px","@sm":{mt:"5px",align:"flex-start",w:"100%",gap:"15px"},"@xsm":{gap:"5px",direction:"column",button:{mb:"3px",w:"100%",maxW:"100%",minW:"unset",minH:"unset"}}}),q=a("div",{d:"flex",align:"center",justify:"flex-start",position:"relative",input:{opacity:0,zIndex:1,w:"25px",h:"25px","& ~ div svg":{d:"none"}},"input:checked ~ div":{bg:"#333333",svg:{d:"flex"}},"@sm":{ml:"auto",img:{w:"55px"}}}),z=a("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"absolute",top:"0px",left:"0px",w:"25px",h:"25px",bg:"#fff",border:"3px solid #5A5A5A",borderRadius:"6px",svg:{w:"15px",h:"15px",path:{fill:"white"}}}),F=a("div",{d:"flex",align:"center",justify:"flex-end",gap:"5px","@sm":{gap:"15px"}}),m=a("div",{d:"flex",align:"center",justify:"center",gap:"5px",textShadow:"2px 1px 4px rgba(0, 0, 0)",svg:{filter:"drop-shadow(3px 5px 2px rgb(0 0 0 / 0.6))",w:"20px",h:"20px"}}),h=a("p",{d:"flex",align:"center",justify:"center",w:"max-content",color:"$white500",textShadow:"2px 1px 4px rgba(0, 0, 0)",fs:"12px",ff:"$heading",fw:"400"});async function U(s,n){const{executeTransaction:l}=O(),p=J(s,n);return!!await l(p)}function J(s,n){return{actions:[{account:_.TOOLS_MC,name:"settemplist",authorization:[{actor:s.name,permission:s.requestPermission}],data:{wallet:s.name,temp_ids:n}}]}}const te=()=>{var w,j,C;const{data:s}=B(),{data:n}=L(),l=A(e=>e.user),p=f.useCallback(()=>{var e,i;return(((e=n==null?void 0:n.tempid_allow_list)==null?void 0:e.length)||0)>0?(n==null?void 0:n.tempid_allow_list)??[]:((i=s==null?void 0:s.toolsOv)==null?void 0:i.filter(r=>{var o;return!((o=n==null?void 0:n.tempid_allow_list)!=null&&o.some(u=>u===r.template_id))}).map(r=>r.template_id))??[]},[n,s]),[c,x]=f.useState(p()),[d,g]=f.useState(!1);async function y(){if(l){g(!0);try{await U(l,c)&&(await R(2e3),M(),N.success("Config saved"))}catch(e){console.error("Error staking tool",e)}finally{g(!1)}}}function S(e,i){var o;const r=(o=e.target)==null?void 0:o.checked;x(r?[...c,i.template_id]:c.filter(u=>u!==i.template_id))}function T(){var e,i;if(((e=s==null?void 0:s.toolsOv)==null?void 0:e.length)===c.length)x([]);else{const r=((i=s==null?void 0:s.toolsOv)==null?void 0:i.map(o=>o.template_id))??[];x(r)}}return t.jsxs(W,{children:[t.jsx(D,{children:"ENABLE OR DISABLE TOOLS FOR USE WITH THE MINE BUTTON"}),t.jsxs(P,{children:[t.jsx(v,{isLoading:d,disabled:d,onClick:y,rounded:!1,color:"solidBlue",children:"Save Config"}),t.jsx(v,{isLoading:d,disabled:d,onClick:T,rounded:!1,color:"solidBlue",children:"Check All"})]}),t.jsx(Q,{children:(C=(j=(w=s==null?void 0:s.toolsOv)==null?void 0:w.filter(e=>e.allowed===1))==null?void 0:j.sort((e,i)=>k[e.rarity]-k[i.rarity]||b[e.shine]-b[i.shine]))==null?void 0:C.map((e,i)=>t.jsx(G,{showNumberBracket:!0,direction:"row",tool:e,children:t.jsxs($,{children:[t.jsxs(F,{children:[t.jsxs(m,{children:[t.jsx(H,{}),t.jsx(h,{children:e.mining_power})]}),t.jsxs(m,{children:[t.jsx(E,{}),t.jsx(h,{children:e.pow})]}),t.jsxs(m,{children:[t.jsx(I,{color:"white"}),t.jsxs(h,{children:[e.cooldown_seconds," sec"]})]})]}),t.jsxs(q,{children:[t.jsx("input",{type:"checkbox",checked:c.some(r=>r===e.template_id),onChange:r=>S(r,e),required:!0}),t.jsx(z,{children:t.jsx(V,{})})]})]})},i))})]})};export{te as default};
