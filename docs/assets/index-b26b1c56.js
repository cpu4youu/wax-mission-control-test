import{e as fe,s,c as Ce,g as X,S as w,T as Z,u as S,d as ce,Q as $,q as oe,n as Re,R as ee,_ as te,r as A,j as e,B as V,f as re,y as Le}from"./index-8e6aa14a.js";import{S as R}from"./index-731eeeab.js";import{I as Oe,a as We}from"./index.esm-62c0fc4d.js";import{P as De}from"./index.esm-117252bb.js";import{T as Pe}from"./index-39c57f3a.js";import{a as je}from"./index.esm-40795e64.js";import{u as de}from"./use-transaction-9ebaef94.js";import{s as le}from"./sleep-da79c358.js";import{N as j}from"./index-88d3cfac.js";import{c as Be}from"./mineCooldown-639e3bc7.js";import{A as Se}from"./axios-45629df5.js";import{i as Ie}from"./index-6d6ded65.js";import{f as ke}from"./formatNumber-be910684.js";import"./index.esm-b005a634.js";import"./index-7de7d944.js";import"./index-e256597c.js";import"./index-ce7885a8.js";import"./iconBase-aaad8e12.js";import"./toast-options-6ff58a66.js";import"./index.esm-f3b969fc.js";import"./index-c9329aee.js";const we=fe({"0%":{backgroundPosition:"0% 0%"},"100%":{backgroundPosition:"-135% 0%"}}),qe=s("div",{d:"flex",align:"center",justify:"flex-start",direction:"column",w:"100%",minH:"calc(100vh - 80px)",bg:"$blue700","@sm":{".select":{w:"100%",button:{minW:"100%"}}}}),Me=s("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",mt:"-20px",h:"165px",w:"100%",zIndex:1,img:{zIndex:-1,position:"absolute",h:"165px",w:"100%",inset:0}}),Ve=s("h2",{d:"flex",align:"center",justify:"center",color:"$white500",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.9)",fs:"40px",w:"100%","@sm":{mt:"0px",fs:"26px"}}),ze=s("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",gap:"0px",w:"100%",maxW:"1121px"}),be=s("h2",{d:"flex",align:"center",justify:"flex-start",color:"$white500",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.9)",fs:"20px",w:"100%",m:"30px 0 10px","@sm":{fs:"26px"}}),Ue=s("div",{d:"flex",align:"center",justify:"flex-start",gap:"20px",flexWrap:"wrap",w:"100%","@sm":{gap:"10px",my:"20px",direction:"column",".select":{m:"0"}}}),Ge=s("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",mt:"20px",padding:"10px 15px",br:"10px",border:"3px solid #D32C54",background:"rgba(255, 255, 255, 0.03)"}),Qe=s("span",{color:"$white500",fs:"20px",fw:"bold"}),He=s("span",{color:"$white500",fs:"20px",">span":{fontWeight:"bold",cursor:"pointer"}}),Ke=s("div",{d:"flex",align:"center",justify:"flex-start",gap:"20px",w:"100%","@sm":{justify:"center",padding:"0 10px",flexWrap:"wrap",gap:"10px"}}),Ye=s("div",{d:"flex",align:"center",justify:"center",direction:"column",gap:"10px",span:{color:"$white500",ff:"$heading","&:first-child":{textTransform:"capitalize"},"&:last-child":{fw:"700",padding:"2px 5px",mt:"-20px",bg:"#D9D9D9",br:"5px",border:"1px solid #FFF",color:"$black500"}},img:{w:"100px",h:"100px"}}),Je=s("div",{d:"flex",align:"center",justify:"flex-start",gap:"10px",w:"100%",">button":{minW:"unset",div:{borderWidth:"2px",px:"30px",h:"45px"}},"@sm":{padding:"0 10px",flexWrap:"wrap",gap:"10px"},"@xsm":{">button":{minW:"100%"}}}),Xe=s("div",{d:"flex",align:"center",justify:"center",direction:"column",gap:"20px",w:"100%","@sm":{my:"10px",">button":{order:-1}}}),Ze=s("div",{d:"flex",align:"center",justify:"space-between",direction:"column",position:"relative",overflow:"hidden",mt:"10px",w:"100%",maxW:"1121px",br:"10px",background:"rgba(255, 255, 255, 0.06)",">img":{w:"130px",h:"130px",m:"auto"},variants:{status:{false:{opacity:.5},true:{}}},"@sm":{padding:"5px",my:"10px",">img":{d:"none"}}}),et=s("div",{d:"flex",align:"center",justify:"center",position:"absolute",w:"200px",top:"30px",right:"-55px",transform:"rotate(45deg)",py:"10px",bg:"#65B5FF",color:"#fff",fs:"18px",ff:"$heading"}),tt=s("div",{d:"flex",align:"center",justify:"space-between",w:"100%",padding:"20px 40px 20px 20px",">img":{w:"130px",h:"130px"},"@sm":{padding:"5px",">img":{d:"none"}}}),P=s("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column"}),nt=s("div",{d:"flex",align:"center",justify:"space-between",gap:"10px",ml:"20px","@xsm":{order:-1,ml:"0px"}}),it=s("div",{d:"flex",align:"flex-start",justify:"flex-start",w:"100%",gridArea:"title","@xsm":{direction:"column"}}),st=s("p",{gridArea:"description",w:"100%",mr:"auto",color:"$white500",ff:"$body",fs:"16px","@sm":{fw:"500",fs:"12px"}}),at=s("div",{gridArea:"buttons",d:"flex",align:"center",justify:"center",gap:"5px",m:"10px auto 10px 0",">button":{h:"42px",minH:"42px",w:"100px",minW:"110px",svg:{mr:"5px"},div:{justify:"flex-start",mx:"auto"},"&.loading":{div:{justify:"center"}},"&:last-child":{minW:"150px",div:{justify:"center"}}},"@sm":{fw:"500",fs:"12px",gap:"0px",w:"100%",">button":{h:"42px",minH:"42px",w:"100%",minW:"unset",svg:{mr:"10px"}}}}),ot=s("div",{d:"grid",gridTemplateAreas:`
    "title title img"
    "description description img"
    "buttons buttons img"
  `,maxW:"840px",w:"100%",">img":{d:"none",gridArea:"img"},"@sm":{gridTemplateAreas:`
      "title title img"
      "description description img"
      "buttons buttons buttons"
    `,">img":{d:"flex",w:"130px",h:"130px"}}}),Ee=s("div",{d:"flex",align:"center",justify:"center",border:"1px solid #fff",w:"50px",h:"50px","@xsm":{w:"35px",h:"35px",mb:"10px"}}),rt=s("p",{w:"100%",color:"#CBCBCB",ff:"$heading",fs:"16px",fw:"700","@sm":{fs:"12px"}}),lt=s("p",{w:"100%",color:"#BEBEBE",ff:"$heading",fs:"16px",fw:"700",span:{color:"red"},variants:{status:{passed:{color:"#00BAFF"},failed:{color:"#D32C54"},active:{color:"#fff"}}},"@sm":{fs:"12px"}}),ct=s("p",{d:"flex",align:"center",justify:"flex-start",w:"100%",color:"$white500",ff:"$heading",fs:"20px",fw:"800",textAlign:"left","@sm":{justify:"space-between",fs:"18px",">img":{d:"flex",w:"60px",h:"60px"}}}),dt=s("div",{d:"grid",gridTemplateColumns:"repeat(7, 1fr)",gridGap:"1px",width:"100%","@xsm":{gridTemplateColumns:"repeat(4, 1fr)"}}),q=s("p",{d:"flex",align:"center",justify:"center",width:"100%",height:"40px",color:"$white500",textAlign:"center",ff:"$body",fs:"15px",mr:"auto",background:"rgba(217, 217, 217, 0.24)","@sm":{fs:"12px"}}),M=s("p",{d:"flex",align:"center",justify:"center",width:"100%",height:"40px",color:"$white500",textAlign:"center",ff:"$body",fs:"15px",mr:"auto",variants:{highlight:{true:{background:"rgba(217, 217, 217, 0.08)"}}},"@sm":{fs:"12px"}}),pt=s("div",{mt:"10px",w:"100px",height:"100px",background:"linear-gradient( -90deg, rgba(255, 255, 244, 0.40), rgba(3, 16, 32, 0.75) ,rgba(255, 255, 244, 0.40))",br:"999px",backgroundSize:"400% 400%",animation:`${we} 1.2s ease-in-out infinite`}),ut=s("div",{mt:"10px",w:"100%",maxW:"1121px",height:"100px",background:"linear-gradient( -90deg, rgba(255, 255, 244, 0.40), rgba(3, 16, 32, 0.75) ,rgba(255, 255, 244, 0.40))",br:"10px",backgroundSize:"400% 400%",animation:`${we} 1.2s ease-in-out infinite`}),xt=s("div",{mt:"10px",w:"100%",maxW:"1121px",height:"200px",background:"linear-gradient( -90deg, rgba(255, 255, 244, 0.40), rgba(3, 16, 32, 0.75) ,rgba(255, 255, 244, 0.40))",br:"10px",backgroundSize:"400% 400%",animation:`${we} 1.2s ease-in-out infinite`}),mt=fe({"0%":{backgroundPosition:"0% 0%"},"100%":{backgroundPosition:"-135% 0%"}}),ft=s("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%",bg:"$blue700","@sm":{".select":{w:"100%",button:{minW:"100%"}}}}),gt=s("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",mt:"-20px",h:"165px",w:"100%",zIndex:1,img:{zIndex:-1,position:"absolute",h:"165px",w:"100%",inset:0}}),ht=s("h2",{d:"flex",align:"center",justify:"center",color:"$white500",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.9)",fs:"40px",w:"100%","@sm":{mt:"0px",fs:"26px"}}),bt=s("form",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",gap:"20px",padding:"20px 50px",w:"100%",maxW:"1121px",">div":{w:"100%",label:{w:"100%",m:"0px",justify:"flex-start",fs:"22px"},">div":{br:"10px",bg:"rgba(255, 255, 255, 0.54)",borderWidth:"3px",borderColor:"#FFCE1F","&:hover":{borderColor:"#FFCE1F"},"&:not(:has(input:placeholder-shown))":{borderColor:"#FFCE1F"}},textarea:{br:"10px",bg:"rgba(255, 255, 255, 0.54)",borderWidth:"3px",borderColor:"#FFCE1F","&:hover":{borderColor:"#FFCE1F"},"&:not(:has(input:placeholder-shown))":{borderColor:"#FFCE1F"}}},".textarea":{br:"10px",minH:"500px",maxW:"100%",minW:"100%",bg:"rgba(255, 255, 255, 0.54)",borderWidth:"3px",borderColor:"#FFCE1F"},">button":{w:"360px",minH:"35px",div:{h:"35px"}},"@md":{padding:"20px ",">div":{maxW:"100%",label:{fs:"16px"}},">button":{w:"100%",minW:"100%"}}}),vt=s("div",{d:"flex",align:"center",justify:"flex-start",position:"relative",input:{opacity:0,zIndex:1,w:"25px",h:"25px","& ~ div svg":{d:"none"}},"input:checked ~ div":{bg:"#FF9D0A",svg:{d:"flex"}},span:{color:"$white500",ml:"10px"},a:{color:"#FF9D0A"},"@sm":{img:{w:"55px"}}}),yt=s("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"absolute",top:"0px",left:"0px",w:"25px",h:"25px",bg:"#fff",border:"3px solid #5A5A5A",borderRadius:"6px",svg:{w:"15px",h:"15px",path:{fill:"white"}}}),jt=s("div",{d:"flex",align:"center",justify:"flex-start",gap:"20px",flexWrap:"wrap",".select":{bg:"transparent"},w:"100%","@sm":{gap:"10px",my:"20px",direction:"column",".select":{m:"0"}}});s("div",{d:"flex",align:"center",justify:"center",gap:"20px",w:"100%","@sm":{padding:"0 10px",flexWrap:"wrap",gap:"10px"}});s("div",{d:"flex",align:"center",justify:"center",direction:"column",gap:"10px",span:{color:"$white500",ff:"$heading","&:last-child":{fw:"700",padding:"2px 5px",mt:"-20px",bg:"#D9D9D9",br:"5px",border:"1px solid #FFF",color:"$black500"}}});s("div",{d:"flex",align:"center",justify:"center",direction:"column",gap:"20px",w:"100%","@sm":{my:"10px",">button":{order:-1}}});s("div",{d:"flex",align:"center",justify:"space-between",w:"100%",maxW:"1121px",padding:"20px",br:"10px",background:"rgba(255, 255, 255, 0.06)",">img":{w:"130px",h:"130px",m:"auto"},variants:{status:{passed:{border:"4px solid #00BAFF"},failed:{border:"4px solid #D32C54"},active:{border:"4px solid #fff"}}},"@sm":{my:"10px",">img":{d:"none"}}});s("p",{d:"flex",align:"center",justify:"center",direction:"column",maxW:"840px"});s("p",{w:"100%",color:"#CBCBCB",ff:"$heading",fs:"16px",fw:"700","@sm":{fs:"12px"}});s("p",{w:"100%",color:"#BEBEBE",ff:"$heading",fs:"16px",fw:"700",span:{color:"red"},variants:{status:{passed:{color:"#00BAFF"},failed:{color:"#D32C54"},active:{color:"#fff"}}},"@sm":{fs:"12px"}});s("p",{d:"flex",align:"center",justify:"center",w:"100%",color:"$white500",ff:"$heading",fs:"32px",fw:"800",">img":{d:"none"},"@sm":{fs:"18px",">img":{d:"flex",w:"60px",h:"60px"}}});s("p",{w:"100%",mr:"auto",color:"$white500",ff:"$body",fs:"16px","@sm":{fw:"500",fs:"12px"}});s("div",{d:"flex",align:"center",justify:"center",gap:"5px",m:"10px auto 10px 0",">button":{minH:"42px",h:"42px",w:"100px",minW:"110px",svg:{mr:"10px"}},"@sm":{fw:"500",fs:"12px"}});s("p",{color:"$white500",textAlign:"center",ff:"$body",fs:"16px",mr:"auto","@sm":{p:{fs:"18px"}}});s("div",{mt:"10px",w:"100%",height:"200px",background:"linear-gradient( -90deg, rgba(3, 16, 32, 0.40), rgba(3, 16, 32, 0.75) ,rgba(3, 16, 32, 0.40))",br:"10px",backgroundSize:"400% 400%",animation:`${mt} 1.2s ease-in-out infinite`});const ge=[{label:"Eyeke",value:"eyeke"},{label:"Kavian",value:"kavian"},{label:"Magor",value:"magor"},{label:"Naron",value:"naron"},{label:"Neri",value:"nerix"},{label:"Veles",value:"veles"}],Ae=[{label:"Active",value:"active"},{label:"Completed",value:"completed"}],xe=[{label:"All",value:"all"},{label:"Token",value:"token"},{label:"Account",value:"account"}],me=[{label:"All",value:"all"},{label:"Opinion",value:"opinion"},{label:"Semi-Binding",value:"semibinding"}],g=Ce((t,i)=>({selectedPage:"referendums",filter:{planet:ge[0],status:Ae[0],votingType:xe[0],referendumType:me[0]}})),wt=async t=>await X({options:{code:w.REF_WORLDS,index_position:1,limit:"10000",scope:t,key_type:"i64",table:Z.CONFIG}}),_e=()=>{const t=g.getState().filter.planet,i=S.getState().user;return ce({queryKey:[$.REFERENDUMS_CONFIG,t],queryFn:()=>_t(),staleTime:1e3*60*60,enabled:!!i})};async function _t(){const t=g.getState().filter.planet;try{const i=await wt(t.value);return i?i[0]:null}catch(i){return console.log(i),null}}async function Tt(t){const{executeTransaction:i,serializeActions:a}=de();let o=[];t.type!=="opinion"&&(o=await a([{account:w.ALIEN_WORLDS,name:"transfer",authorization:[{actor:`${t.dac_id}.dac`,permission:"active"}],data:{from:`${t.dac_id}.dac`,to:t.wallet_receive_tlm,quantity:t.requested_tlm,memo:t.memo_tlm_transfer}}]));const c=await Et(t,o);return!!await i(c)}async function Et(t,i){return{actions:[{account:w.ALIEN_WORLDS,name:"transfer",authorization:[{actor:t.user.name,permission:t.user.requestPermission}],data:{from:t.user.name,memo:"",quantity:t.fee.quantity,to:"ref.worlds"}},{account:w.REF_WORLDS,name:"propose",authorization:[{actor:t.user.name,permission:t.user.requestPermission}],data:{proposer:t.user.name,type:t.type,voting_type_name:t.voting_type_name,title:t.title,content:t.content,dac_id:t.dac_id,acts:t.type!=="opinion"?i:t.acts}}]}}const Ft=async t=>await X({options:{code:w.REF_WORLDS,index_position:1,limit:"10000",scope:t,key_type:"i64",table:Z.REFERENDUMS}}),Rt=()=>{const t=g.getState().filter.planet;return ce({queryKey:[$.REFERENDUMS,t],queryFn:()=>St(),staleTime:1e3*60*60})};async function ye(){return oe.removeQueries([$.REFERENDUMS]),await oe.invalidateQueries([$.REFERENDUMS])}async function St(){const t=g.getState().filter.planet;try{const i=await Ft(t.value);return i?await Promise.all(i.map(async o=>{const c=await kt(o.content_ref),p=Ie(new Date(o.expires),Re)||o.status!=="executed",v=(o.voting_type==="token"?o.token_votes.reverse():o.account_votes.reverse()).map(d=>({...d,value:o.voting_type==="token"?d.value/1e4:d.value}));return{...o,description:c,votes:v,totalVotes:v[1].value+v[0].value,expiration:Be(new Date(o.expires)),isActive:p}})):null}catch(i){return console.log(i),null}}const Fe=["wax.eosdac.io","api.waxsweden.org","wax.cryptolions.io","wax.api.eosnation.io","wax.greymass.com","api.wax.bountyblok.io"];async function kt(t){var c,p,x;let i=0,a=!1,o="";do try{const{data:v}=await Se(`https://${Fe[i]}/v2/history/get_transaction?id=${t}`);return o=((x=(p=(c=v==null?void 0:v.actions.find(({act:d})=>{var k;return!!((k=d==null?void 0:d.data)!=null&&k.content)}))==null?void 0:c.act)==null?void 0:p.data)==null?void 0:x.content)??"",o||(a=!0,i++),o}catch{a=!0,i++}while(!a||i<Fe.length);return o}const At=ee.lazy(()=>te(()=>import("./check-12720cf6.js"),["assets/check-12720cf6.js","assets/index-8e6aa14a.js","assets/index-55fec1ff.css"])),Nt=()=>{const{data:t}=_e(),i=S(l=>l.user),a=g(l=>l.filter),[o,c]=A.useState(!1),[p,x]=A.useState(!1);function v(l,r){l&&g.setState(h=>({...h,filter:{...h.filter,[r]:l}}))}function d(){g.setState(l=>({...l,selectedPage:"referendums"}))}async function k(l){var N,C,B,I,L,D,n,m,u,T;if(l.preventDefault(),!i||!(t!=null&&t.fee[1].value))return;c(!0);const r=(C=(N=l.target)==null?void 0:N.title)==null?void 0:C.value,h=(I=(B=l.target)==null?void 0:B.content)==null?void 0:I.value,y=(D=(L=l.target)==null?void 0:L.requested_tlm)==null?void 0:D.value,_=(m=(n=l.target)==null?void 0:n.wallet_receive_tlm)==null?void 0:m.value,b=(T=(u=l.target)==null?void 0:u.memo_tlm_transfer)==null?void 0:T.value,W={user:i,type:a.referendumType.value,voting_type_name:a.votingType.value,title:r,content:h,acts:[],dac_id:a.planet.value,fee:t==null?void 0:t.fee[1].value,requested_tlm:`${y}.0000 TLM`,wallet_receive_tlm:_,memo_tlm_transfer:b};try{await Tt(W)&&(await le(5e3),await ye(),re.success("Propose successfully registered"),d())}catch(O){console.error("error",O)}finally{c(!1)}}return A.useEffect(()=>{const l=a.votingType.value==="all"?xe.slice(1)[0]:a.votingType,r=a.referendumType.value==="all"?me.slice(1)[0]:a.referendumType;g.setState(h=>({...h,filter:{...h.filter,votingType:l,referendumType:r}}))},[]),e.jsxs(ft,{children:[e.jsxs(gt,{children:[e.jsx(ht,{children:"Referendums"}),e.jsx("img",{src:"/assets/background/bg-referendums.jpeg",alt:""})]}),e.jsxs(bt,{onSubmit:k,children:[e.jsx(je,{size:30,color:"#fff",onClick:d}),e.jsxs(jt,{children:[e.jsx(R,{borderColor1:"#FFB31F",borderColor2:"#FFB800",label:"PLANET",className:"select",title:"",selected:a.planet,options:ge,onSelected:l=>v(l,"planet")}),e.jsx(R,{borderColor1:"#FFB31F",borderColor2:"#FFB800",label:"VOTING TYPE",className:"select",title:"",selected:a.votingType,options:xe.slice(1),onSelected:l=>v(l,"votingType")}),e.jsx(R,{borderColor1:"#FFB31F",borderColor2:"#FFB800",label:"REFERENDUM TYPE",className:"select",title:"",selected:a.referendumType,options:me.slice(1),onSelected:l=>v(l,"referendumType")})]}),e.jsx(j,{label:"TITLE",id:"title",className:"input"}),e.jsx(Pe,{label:"DESCRIPTION",id:"content",className:"textarea"}),a.referendumType.value!=="opinion"&&e.jsx(j,{required:!0,type:"number",label:"REQUESTED TLM",id:"requested_tlm",className:"input"}),a.referendumType.value!=="opinion"&&e.jsx(j,{required:!0,label:"WALLET TO RECEIVE THE TLM",id:"wallet_receive_tlm",className:"input"}),a.referendumType.value!=="opinion"&&e.jsx(j,{required:!0,label:"MEMO FOR TLM TRANSFER",id:"memo_tlm_transfer",className:"input"}),e.jsxs(vt,{children:[e.jsx("input",{type:"checkbox",checked:p,onChange:l=>{var r;return x((r=l.target)==null?void 0:r.checked)},required:!0}),e.jsx(yt,{children:e.jsx(At,{})}),e.jsxs("span",{children:["I have read and agree to the latest"," ",e.jsx("a",{href:`https://play.alienworlds.io/syndicates/${a.planet.value}/memberTerms`,target:"_blank",rel:"noreferrer",children:"DAO Membership Terms"})]})]}),e.jsxs(V,{isLoading:o,disabled:o||!p,rounded:!1,color:"gradientYellow",type:"submit",children:["PROPOSE FOR ",t==null?void 0:t.fee[1].value.quantity]})]})]})},$t=async t=>await X({options:{code:w.REF_WORLDS,index_position:1,limit:"10000",scope:t,key_type:"i64",table:Z.REFERENDUMS_VOTES}}),Ct=()=>{const t=g.getState().filter.planet,i=S.getState().user;return ce({queryKey:[$.REFERENDUMS_VOTE,t],queryFn:()=>Ot(),staleTime:1e3*60*60,enabled:!!i})};async function Lt(){return await oe.invalidateQueries([$.REFERENDUMS_VOTE])}async function Ot(){const t=g.getState().filter.planet,i=S.getState().user;try{const a=await $t(t.value);if(!a||!i)return null;const o=a.find(c=>c.voter===i.name);return o||null}catch(a){return console.log(a),null}}const Wt=async t=>{const i=S.getState().user;return await X({options:{code:w.TOKEN_WORLDS,index_position:1,limit:"1",scope:t,key_type:"i64",table:Z.STAKES,lower_bound:i==null?void 0:i.name,upper_bound:i==null?void 0:i.name}})},ve={EYE:"eyeke",MAG:"magor",VEL:"veles",NAR:"naron",NER:"nerix",KAV:"kavian"},Dt=()=>{const t=S.getState().user;return ce({queryKey:[$.REFERENDUMS_PLANETS],queryFn:()=>Bt(),staleTime:1e3*60*60,enabled:!!t})};async function Pt(){return await oe.invalidateQueries([$.REFERENDUMS_PLANETS])}async function Bt(){if(!S.getState().user)return null;try{return await Promise.all(Object.values(ve).flatMap(async a=>{const o=await Wt(a);if(!o)return{name:a,img:`/assets/planets/${a}.png`,balance:"0"};const c=o==null?void 0:o.stake.replace(/.*(\ )/g,""),p=Number(o==null?void 0:o.stake.replace(/(\ ).*/,"")),x=ke(p);return{name:ve[c],img:`/assets/planets/${ve[c]}.png`,balance:x}}))}catch(i){return console.log(i),null}}async function It(t,i,a,o){const{executeTransaction:c}=de(),p=qt(t,i,a,o);return!!await c(p)}function qt(t,i,a,o){return{actions:[{account:w.REF_WORLDS,name:"clean",authorization:[{actor:t.name,permission:t.authorization.permission}],data:{account:t.name,dac_id:o}},{account:w.REF_WORLDS,name:"vote",authorization:[{actor:t.name,permission:t.authorization.permission}],data:{voter:t.name,referendum_id:i,vote:a,dac_id:o}}]}}const Mt=fe({"0%":{backgroundPosition:"0% 0%"},"100%":{backgroundPosition:"-135% 0%"}}),Vt=s("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%",bg:"$blue700","@sm":{".select":{w:"100%",button:{minW:"100%"}}}}),zt=s("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",mt:"-20px",h:"165px",w:"100%",zIndex:1,img:{zIndex:-1,position:"absolute",h:"165px",w:"100%",inset:0}}),Ut=s("h2",{d:"flex",align:"center",justify:"center",color:"$white500",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.9)",fs:"40px",w:"100%","@sm":{mt:"0px",fs:"26px"}}),Gt=s("form",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",gap:"20px",padding:"20px 50px",w:"100%",maxW:"1180px",">button":{w:"370px",minH:"60px",div:{h:"60px",fs:"16px"}},"@md":{">div":{maxW:"100%"}},"@sm":{padding:"20px 5px"}}),Qt=s("div",{d:"flex",align:"center",justify:"flex-start",gap:"20px",".select":{bg:"transparent"},w:"100%","@sm":{gap:"10px",my:"20px",direction:"column",".select":{m:"0"}}}),Ht=s("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",gap:"20px",">div":{w:"300px",maxW:"unset"},label:{fs:"20px"},input:{fs:"20px",fw:"bold"},button:{w:"300px"},"@sm":{w:"100%",">div":{w:"100%"}}}),Kt=s("div",{d:"flex",align:"center",justify:"center",h:"150px",br:"8px",color:"$white500",bg:"rgba(255, 255, 255, 0.05)",textAlign:"center",fs:"20px"}),Q=s("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",w:"100%",mt:"20px"}),H=s("div",{d:"flex",align:"flex-start",justify:"flex-start",color:"$white500",fs:"20px",ff:"$heading",fw:"400"}),K=s("div",{d:"flex",align:"flex-start",justify:"flex-start",color:"$white500",fs:"20px",fw:"400"}),Y=s("div",{d:"grid",gridTemplateColumns:"1fr",gridGap:"5px",w:"100%"}),J=s("div",{d:"flex",gridGap:"10px",w:"100%",span:{w:"250px",color:"#767676",fs:"20px",fw:"400"},"@md":{span:{w:"200px","&:first-child":{w:"250px"}}},"@sm":{span:{d:"none"}}}),E=s("div",{d:"flex",gap:"10px",w:"100%",h:"60px",br:"8px",bg:"rgba(255, 255, 255, 0.05)",">div":{d:"flex",align:"center",justify:"center",w:"100%",maxW:"250px",span:{color:"$black500",fw:"bold"}},">span":{d:"flex",align:"center",justify:"flex-start",w:"240px",pl:"15px",color:"$white500",fs:"20px",fw:"400"},label:{d:"none"},"@md":{">div":{maxW:"210px"}},"@sm":{padding:"10px",mt:"15px",h:"unset",direction:"column",label:{d:"flex"},">div":{w:"100%",maxW:"100%"}}});s("div",{mt:"10px",w:"100%",height:"200px",background:"linear-gradient( -90deg, rgba(3, 16, 32, 0.40), rgba(3, 16, 32, 0.75) ,rgba(3, 16, 32, 0.40))",br:"10px",backgroundSize:"400% 400%",animation:`${Mt} 1.2s ease-in-out infinite`});async function Yt(t){const{executeTransaction:i,serializeActions:a}=de(),o=await a([{account:w.REF_WORLDS,name:"updateconfig",authorization:[{actor:`${t.dac_id}.dac`,permission:t.user.requestPermission}],data:{config:t.config,dac_id:t.dac_id}}]),c=Jt(t,o);return!!await i(c)}function Jt(t,i){return{actions:[{account:w.MSIG_WORLDS,name:"propose",authorization:[{actor:t.user.name,permission:t.user.requestPermission}],data:{proposer:t.user.name,proposal_name:Math.random().toString(36).replace(/[^a-z1-5]+/g,"").substring(0,12),requested:[{actor:`${t.dac_id}.dac`,permission:"active"}],dac_id:t.dac_id,metadata:[{key:"title",value:"Referendum Config Update"},{key:"description",value:"testing a new feature"}],trx:{expiration:Le(Re,7),ref_block_num:0,ref_block_prefix:0,max_net_usage_words:0,max_cpu_usage_ms:0,delay_sec:0,context_free_actions:[],actions:i,transaction_extensions:[]}}}]}}const F=[{label:"Allowed",value:"allowed"},{label:"Not Allowed",value:"not-allowed"}],Xt=()=>{const{data:t}=_e(),i=S(r=>r.user),a=g(r=>r.filter),[o,c]=A.useState(!1),[p,x]=A.useState({allow_per_account_voting:[{key:"binding",value:!1},{key:"opinion",value:!0},{key:"semibinding",value:!0}],allow_vote_type:[{key:"binding",value:!1},{key:"opinion",value:!0},{key:"semibinding",value:!0}]});function v(r,h){r&&g.setState(y=>({...y,filter:{...y.filter,[h]:r}}))}function d(r,h,y){r&&x({...p,[y]:p[y].map(_=>_.key===h?{..._,value:r.value==="allowed"}:_)})}function k(){g.setState(r=>({...r,selectedPage:"referendums"}))}async function l(r){var h,y,_,b,W,N,C,B,I,L,D,n,m,u,T,O,z,U,ne,ie,se,ae;if(r.preventDefault(),!!i)try{c(!0);const G=(((y=(h=r.target)==null?void 0:h.duration)==null?void 0:y.value)||0)*86400,pe=[{key:"binding",value:{contract:"alien.worlds",quantity:"1000.0000 TLM"}},{key:"semibinding",value:{contract:(b=(_=r.target)==null?void 0:_["fee-contract-semibinding"])==null?void 0:b.value,quantity:(N=(W=r.target)==null?void 0:W["fee-semibinding"])==null?void 0:N.value}},{key:"opinion",value:{contract:(B=(C=r.target)==null?void 0:C["fee-contract-opinion"])==null?void 0:B.value,quantity:(L=(I=r.target)==null?void 0:I["fee-opinion"])==null?void 0:L.value}}],ue=[{key:"binding",value:100*100},{key:"semibinding",value:(((n=(D=r.target)==null?void 0:D["rate-semibinding"])==null?void 0:n.value)||0)*100},{key:"opinion",value:(((u=(m=r.target)==null?void 0:m["rate-opinion"])==null?void 0:u.value)||0)*100}],f=[{key:"binding",value:1e5},{key:"semibinding",value:+((O=(T=r.target)==null?void 0:T["min-account-semibinding"])==null?void 0:O.value)},{key:"opinion",value:+((U=(z=r.target)==null?void 0:z["min-account-opinion"])==null?void 0:U.value)}],he=[{key:"binding",value:1e11},{key:"semibinding",value:+((ie=(ne=r.target)==null?void 0:ne["min-token-semibinding"])==null?void 0:ie.value)},{key:"opinion",value:+((ae=(se=r.target)==null?void 0:se["min-token-opinion"])==null?void 0:ae.value)}],Ne=p.allow_per_account_voting,$e=p.allow_vote_type,Te={user:i,config:{duration:G,fee:pe,pass:ue,quorum_account:f,quorum_token:he,allow_per_account_voting:Ne,allow_vote_type:$e},dac_id:a.planet.value};console.log(Te),await Yt(Te)&&(await le(1e3),await Pt(),re.success("Configuration successfully updated"),k())}catch(G){console.error(G)}finally{c(!1)}}return A.useEffect(()=>{var r,h;t&&x({allow_vote_type:(r=t==null?void 0:t.allow_vote_type)==null?void 0:r.map(y=>y),allow_per_account_voting:(h=t==null?void 0:t.allow_per_account_voting)==null?void 0:h.map(y=>y)})},[t]),e.jsxs(Vt,{children:[e.jsxs(zt,{children:[e.jsx(Ut,{children:"Referendums"}),e.jsx("img",{src:"/assets/background/bg-referendums.jpeg",alt:""})]}),e.jsxs(Gt,{onSubmit:l,children:[e.jsx(je,{size:30,color:"#fff",onClick:k}),e.jsxs(Qt,{children:[e.jsxs(Ht,{children:[e.jsx(R,{borderColor1:"#FFB31F",borderColor2:"#FFB800",label:"PLANET",className:"select",title:"",selected:a.planet,options:ge,onSelected:r=>v(r,"planet")}),e.jsx(j,{textAfterInside:"days",label:"REFERENDUM DURATION",id:"duration",defaultValue:((t==null?void 0:t.duration)||0)/86400,required:!0,className:"input"})]}),e.jsx(Kt,{children:"Custodians can create a proposal to their DAO to change the configuration for the referendums on their planet."})]}),e.jsxs(Q,{children:[e.jsx(H,{children:"CREATION FEE"}),e.jsx(K,{children:"This is the fee a player has to pay in order to create a referendum on this planet"}),e.jsxs(Y,{children:[e.jsxs(J,{children:[e.jsx("span",{children:"Type"}),e.jsx("span",{children:"Token"}),e.jsx("span",{children:"Token Contract"})]}),e.jsxs(E,{children:[e.jsx("span",{children:"Opinion"}),e.jsx(j,{label:"Token",id:"fee-opinion",className:"input",defaultValue:t==null?void 0:t.fee[1].value.quantity,required:!0}),e.jsx(j,{required:!0,defaultValue:"alien.worlds",label:"Token Contract",id:"fee-contract-opinion",className:"input"})]}),e.jsxs(E,{children:[e.jsx("span",{children:"Semi-Binding"}),e.jsx(j,{label:"Token",id:"fee-semibinding",className:"input",defaultValue:t==null?void 0:t.fee[2].value.quantity,required:!0}),e.jsx(j,{required:!0,defaultValue:"alien.worlds",label:"Token Contract",id:"fee-contract-semibinding",className:"input"})]})]})]}),e.jsxs(Q,{children:[e.jsx(H,{children:"MINIMUM APPROVAL RATE"}),e.jsx(K,{children:"The minimum approval rate which need to be reached in order for a referendum to pass"}),e.jsxs(Y,{children:[e.jsxs(J,{children:[e.jsx("span",{children:"Type"}),e.jsx("span",{children:"Approval Percentage"})]}),e.jsxs(E,{children:[e.jsx("span",{children:"Opinion"}),e.jsx(j,{required:!0,type:"number",label:"",textAfterInside:"%",id:"rate-opinion",className:"input",defaultValue:(Number(t==null?void 0:t.pass[1].value)||0)/100})]}),e.jsxs(E,{children:[e.jsx("span",{children:"Semi-Binding"}),e.jsx(j,{required:!0,type:"number",label:"",textAfterInside:"%",id:"rate-semibinding",className:"input",defaultValue:(Number(t==null?void 0:t.pass[2].value)||0)/100})]})]})]}),e.jsxs(Q,{children:[e.jsx(H,{children:"MINIMUM VOTES (UNIQUE WALLETS)"}),e.jsx(K,{children:"The minimum unique wallets that need to vote on this referendum in order for a referendum to pass"}),e.jsxs(Y,{children:[e.jsxs(J,{children:[e.jsx("span",{children:"Type"}),e.jsx("span",{children:"Wallet Amount"})]}),e.jsxs(E,{children:[e.jsx("span",{children:"Opinion"}),e.jsx(j,{required:!0,type:"number",label:"",id:"min-account-opinion",className:"input",defaultValue:Number(t==null?void 0:t.quorum_account[1].value)||0})]}),e.jsxs(E,{children:[e.jsx("span",{children:"Semi-Binding"}),e.jsx(j,{required:!0,type:"number",label:"",id:"min-account-semibinding",className:"input",defaultValue:Number(t==null?void 0:t.quorum_account[2].value)||0})]})]})]}),e.jsxs(Q,{children:[e.jsx(H,{children:"MINIMUM VOTES (TOKENS)"}),e.jsx(K,{children:"The minimum total amount of tokens that need to vote on this referendum in order for a referendum to pass"}),e.jsxs(Y,{children:[e.jsxs(J,{children:[e.jsx("span",{children:"Type"}),e.jsx("span",{children:"Token Amount"})]}),e.jsxs(E,{children:[e.jsx("span",{children:"Opinion"}),e.jsx(j,{required:!0,type:"number",label:"",id:"min-token-opinion",className:"input",defaultValue:Number(t==null?void 0:t.quorum_token[1].value)||0})]}),e.jsxs(E,{children:[e.jsx("span",{children:"Semi-Binding"}),e.jsx(j,{required:!0,type:"number",label:"",id:"min-token-semibinding",className:"input",defaultValue:Number(t==null?void 0:t.quorum_token[2].value)||0})]})]})]}),e.jsxs(Q,{children:[e.jsx(H,{children:"ALLOW REFERENDUMS OF VOTING TYPE: UNIQUE WALLETS"}),e.jsx(K,{children:"The minimum total amount of tokens that need to vote on this referendum in order for a referendum to pass"}),e.jsxs(Y,{children:[e.jsxs(J,{children:[e.jsx("span",{children:"Type"}),e.jsx("span",{children:"Unique Wallet Voting"})]}),e.jsxs(E,{children:[e.jsx("span",{children:"Opinion"}),e.jsx(R,{borderColor1:"#FFB31F",borderColor2:"#FFB800",label:"",className:"select",title:"",selected:p.allow_per_account_voting[1].value?F[0]:F[1],options:F,onSelected:r=>d(r,"opinion","allow_per_account_voting")})]}),e.jsxs(E,{children:[e.jsx("span",{children:"Semi-Binding"}),e.jsx(R,{borderColor1:"#FFB31F",borderColor2:"#FFB800",label:"",className:"select",title:"",selected:p.allow_per_account_voting[2].value?F[0]:F[1],options:F,onSelected:r=>d(r,"semibinding","allow_per_account_voting")})]})]})]}),e.jsxs(Q,{children:[e.jsx(H,{children:"ALLOW REFERENDUMS OF VOTING TYPE: TOKEN"}),e.jsx(K,{children:"The minimum total amount of tokens that need to vote on this referendum in order for a referendum to pass"}),e.jsxs(Y,{children:[e.jsxs(J,{children:[e.jsx("span",{children:"Type"}),e.jsx("span",{children:"Token Voting"})]}),e.jsxs(E,{children:[e.jsx("span",{children:"Opinion"}),e.jsx(R,{borderColor1:"#FFB31F",borderColor2:"#FFB800",label:"",className:"select",title:"",selected:p.allow_vote_type[1].value?F[0]:F[1],options:F,onSelected:r=>d(r,"opinion","allow_vote_type")})]}),e.jsxs(E,{children:[e.jsx("span",{children:"Semi-Binding"}),e.jsx(R,{borderColor1:"#FFB31F",borderColor2:"#FFB800",label:"",className:"select",title:"",selected:p.allow_vote_type[2].value?F[0]:F[1],options:F,onSelected:r=>d(r,"semibinding","allow_vote_type")})]})]})]}),e.jsx(V,{isLoading:o,disabled:o,rounded:!1,color:"gradientYellow",type:"submit",children:"Propose to DAO"})]})]})},Zt=async t=>await X({options:{code:w.TOKEN_WORLDS,index_position:1,limit:"1",scope:t,key_type:"i64",reverse:!0,table:Z.MEMBERS_TERMS}}),en=async t=>{const i=S.getState().user;return await X({options:{code:w.TOKEN_WORLDS,index_position:1,limit:"1",scope:t,key_type:"i64",reverse:!0,lower_bound:i==null?void 0:i.name,upper_bound:i==null?void 0:i.name,table:Z.MCP_MEMBERS}})},tn=()=>{const t=g.getState().filter.planet,i=S.getState().user;return ce({queryKey:[$.MEMBER_TERM,t],queryFn:()=>sn(),staleTime:1e3*60*60,enabled:!!i})};async function nn(){return await oe.invalidateQueries([$.MEMBER_TERM])}async function sn(){const t=g.getState().filter.planet;try{const i=await Zt(t.value),a=await en(t.value);return i?{terms:i,members:a||void 0}:null}catch(i){return console.log(i),null}}const an=fe({"0%":{backgroundPosition:"0% 0%"},"100%":{backgroundPosition:"-135% 0%"}}),on=s("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",w:"100%",minH:"calc(100vh - 80px)",bg:"$blue700",">button":{d:"flex",align:"flex-start",justify:"flex-start",w:"100%",maxW:"1121px",mx:"auto",my:"20px"},"@sm":{".select":{w:"100%",button:{minW:"100%"}}}}),rn=s("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",mt:"-20px",h:"165px",w:"100%",zIndex:1,img:{zIndex:-1,position:"absolute",h:"165px",w:"100%",inset:0}}),ln=s("h2",{d:"flex",align:"center",justify:"center",color:"$white500",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.9)",fs:"40px",w:"100%","@sm":{mt:"0px",fs:"26px"}}),cn=s("pre",{wordWrap:"break-word",whiteSpace:"pre-wrap",color:"$white500",mx:"auto",w:"100%",maxW:"1121px",">button":{minW:"unset",my:"20px",div:{borderWidth:"2px",px:"30px",h:"45px"}}});s("div",{mt:"10px",w:"100%",maxW:"1121px",height:"200px",background:"linear-gradient( -90deg, rgba(255, 255, 244, 0.40), rgba(3, 16, 32, 0.75) ,rgba(255, 255, 244, 0.40))",br:"10px",backgroundSize:"400% 400%",animation:`${an} 1.2s ease-in-out infinite`});async function dn(t,i,a){const{executeTransaction:o}=de(),c=pn(t,i,a);return!!await o(c)}function pn(t,i,a){return{actions:[{account:w.TOKEN_WORLDS,name:"memberreg",authorization:[{actor:t.name,permission:t.authorization.permission}],data:{sender:t.name,agreedterms:i,dac_id:a}}]}}const un=({terms:t})=>{const[i,a]=A.useState(!1),[o,c]=A.useState(""),p=S(l=>l.user),x=g(l=>l.filter);async function v(){const{data:l}=await Se.get(`https://ipfs.alienworlds.io/ipfs/${t.terms}`);c(l)}async function d(){try{if(a(!0),!p)return;await dn(p,t.hash,x.planet.value)&&(await le(5e3),await nn(),re.success("Success"),g.setState(r=>({...r,selectedPage:"referendums"})))}catch(l){console.error("error",l)}finally{a(!1)}}function k(){g.setState(l=>({...l,selectedPage:"referendums"}))}return A.useEffect(()=>{v()},[t.terms]),e.jsxs(on,{children:[e.jsxs(rn,{children:[e.jsx(ln,{children:"Referendums"}),e.jsx("img",{src:"/assets/background/bg-referendums.jpeg",alt:""})]}),e.jsx("button",{onClick:k,children:e.jsx(je,{size:30,color:"#fff"})}),e.jsxs(cn,{children:[o,e.jsx(V,{isLoading:i,disabled:i,rounded:!1,color:"solidBlue",onClick:()=>d(),children:"Sign Membership Terms"})]})]})};async function xn(t,i,a){const{executeTransaction:o}=de(),c=mn(t,i,a);return!!await o(c)}function mn(t,i,a){return{actions:[{account:w.REF_WORLDS,name:"exec",authorization:[{actor:t.name,permission:t.authorization.permission}],data:{referendum_id:i,dac_id:a}}]}}const fn=ee.lazy(()=>te(()=>import("./account-c1bca016.js"),["assets/account-c1bca016.js","assets/index-8e6aa14a.js","assets/index-55fec1ff.css"])),gn=ee.lazy(()=>te(()=>import("./option-referendum-597529f0.js"),["assets/option-referendum-597529f0.js","assets/index-8e6aa14a.js","assets/index-55fec1ff.css"])),hn=ee.lazy(()=>te(()=>import("./coin-33e3ab88.js"),["assets/coin-33e3ab88.js","assets/index-8e6aa14a.js","assets/index-55fec1ff.css"])),bn=ee.lazy(()=>te(()=>import("./semi-binding-referendum-9f60faef.js"),["assets/semi-binding-referendum-9f60faef.js","assets/index-8e6aa14a.js","assets/index-55fec1ff.css"])),vn=ee.lazy(()=>te(()=>import("./binding-referendum-2781f78b.js"),["assets/binding-referendum-2781f78b.js","assets/index-8e6aa14a.js","assets/index-55fec1ff.css"])),Vn=()=>{var D;const{data:t,isLoading:i}=Rt(),{data:a,isLoading:o}=Dt(),{data:c,isLoading:p}=Ct(),{data:x,isLoading:v}=_e(),{data:d,isLoading:k}=tn(),[l,r]=A.useState(!1),[h,y]=A.useState(!1),_=S(n=>n.user),b=g(n=>n.filter),W=g(n=>n.selectedPage);function N(n,m){n&&g.setState(u=>({...u,filter:{...u.filter,[m]:n}}))}function C(n){g.setState(m=>({...m,selectedPage:n}))}async function B(n,m){if(r(!0),!!_)try{await It(_,n,m,b.planet.value)&&(await le(6e3),await Lt(),await ye(),re.success("Vote successfully registered"))}catch(u){console.log(u)}finally{r(!1)}}async function I(n){if(_)try{y(!0),await xn(_,n,b.planet.value)&&(await le(6e3),await ye(),re.success("Proposal successfully created"))}catch(m){console.log(m)}finally{y(!1)}}if(d!=null&&d.terms&&W==="terms")return e.jsx(un,{terms:d==null?void 0:d.terms});if(W==="create")return e.jsx(Nt,{});if(W==="configure")return e.jsx(Xt,{});const L=t==null?void 0:t.filter(n=>{const m=b.status.value==="active"?n.isActive:!n.isActive,u=b.votingType.value==="all"?!0:b.votingType.value===n.voting_type,T=b.referendumType.value==="all"?!0:b.referendumType.value===n.type;return m&&u&&T});return e.jsxs(qe,{children:[e.jsxs(Me,{children:[e.jsx(Ve,{children:"Referendums"}),e.jsx("img",{src:"/assets/background/bg-referendums.jpeg",alt:""})]}),e.jsxs(ze,{children:[e.jsx(be,{children:"FILTER"}),e.jsxs(Ue,{children:[e.jsx(R,{borderColor1:"#FFB31F",borderColor2:"#FFB800",isLoading:i,disabled:i,className:"select",title:"",label:"Planet",selected:b.planet,options:ge,onSelected:n=>N(n,"planet")}),e.jsx(R,{borderColor1:"#FFB31F",borderColor2:"#FFB800",isLoading:i,disabled:i,className:"select",title:"",label:"Status",selected:b.status,options:Ae,onSelected:n=>N(n,"status")}),e.jsx(R,{borderColor1:"#FFB31F",borderColor2:"#FFB800",isLoading:i,disabled:i,className:"select",title:"",label:"Voting Type",selected:b.votingType,options:xe,onSelected:n=>N(n,"votingType")}),e.jsx(R,{borderColor1:"#FFB31F",borderColor2:"#FFB800",isLoading:i,disabled:i,className:"select",title:"",label:"Referendum Type",selected:b.referendumType,options:me,onSelected:n=>N(n,"referendumType")})]}),k?e.jsx(ut,{}):((d==null?void 0:d.terms.version)||0)>(((D=d==null?void 0:d.members)==null?void 0:D.agreedtermsversion)??-1)&&e.jsxs(Ge,{children:[e.jsx(Qe,{children:"Become a DAO member"}),e.jsxs(He,{children:["To participate in voting or propose referendums, you are required to sign the latest"," ",e.jsx("span",{onClick:()=>C("terms"),children:"membership terms"})," of Narons DAO"]})]}),e.jsx(be,{children:"YOUR VOTEPOWER FOR TOKEN REFERENDUMS"}),e.jsx(Ke,{children:o?Array.from({length:6},n=>n).map((n,m)=>e.jsx(pt,{},m)):a==null?void 0:a.map(n=>e.jsxs(Ye,{children:[e.jsx("span",{children:n.name}),e.jsx("img",{src:n.img,alt:""}),e.jsx("span",{children:n.balance})]},n.name))}),e.jsx(be,{children:"REFERENDUMS"}),e.jsxs(Je,{children:[e.jsx(V,{rounded:!1,color:"solidBlue",onClick:()=>C("create"),children:"Create Referendum"}),e.jsx(V,{rounded:!1,color:"solidBlue",onClick:()=>C("configure"),children:"Configure"})]}),e.jsx(Xe,{children:i?Array.from({length:3},n=>n).map((n,m)=>e.jsx(xt,{},m)):L==null?void 0:L.map((n,m)=>{var ne,ie,se,ae,G,pe,ue;const u=c==null?void 0:c.votes.find(f=>f.key===(n==null?void 0:n.referendum_id)),T=n.voting_type==="token"?(((ne=x==null?void 0:x.quorum_token.find(f=>f.key===(n==null?void 0:n.type)))==null?void 0:ne.value)??0)/1e4:(((ie=x==null?void 0:x.quorum_account.find(f=>f.key===(n==null?void 0:n.type)))==null?void 0:ie.value)??0)/1e4,O=n.votes.reduce((f,he)=>f+he.value,0),z=(((se=x==null?void 0:x.pass.find(f=>f.key===(n==null?void 0:n.type)))==null?void 0:se.value)??0)/100,U=((n==null?void 0:n.votes[0].value)??0)/((n==null?void 0:n.totalVotes)||1)*100;return e.jsxs(Ze,{status:n==null?void 0:n.isActive,children:[U>=z&&O>=T&&e.jsx(et,{children:"IN FAVOR"}),e.jsxs(tt,{children:[e.jsxs(ot,{children:[e.jsxs(it,{children:[e.jsxs(P,{children:[n!=null&&n.isActive?e.jsxs(rt,{children:["ends in ",(ae=n==null?void 0:n.expiration)==null?void 0:ae.days,"d"," ",(G=n==null?void 0:n.expiration)==null?void 0:G.hours,"h",(pe=n==null?void 0:n.expiration)==null?void 0:pe.minutes,"m"]}):e.jsxs(lt,{children:["ENDED",U>=z&&O>=T?" - IN FAVOR":" - AGAINST"]}),e.jsx(ct,{children:n==null?void 0:n.title})]}),e.jsxs(nt,{children:[e.jsxs(Ee,{children:[n.type==="opinion"&&e.jsx(gn,{}),n.type==="binding"&&e.jsx(vn,{}),n.type==="semibinding"&&e.jsx(bn,{})]}),e.jsxs(Ee,{children:[n.voting_type==="account"&&e.jsx(fn,{}),n.voting_type==="token"&&e.jsx(hn,{})]})]})]}),e.jsx(st,{children:n==null?void 0:n.description}),e.jsx("img",{src:`/assets/planets/${b.planet.value}.png`,alt:"medium image"}),e.jsxs(at,{children:[(ue=n==null?void 0:n.votes)==null?void 0:ue.map(f=>e.jsxs(V,{disabled:!(n!=null&&n.isActive),isLoading:p||l,rounded:!1,onClick:()=>B(n.referendum_id,f.key),color:(u==null?void 0:u.value)==="yes"&&(u==null?void 0:u.value)===f.key?"transparentBlue":(u==null?void 0:u.value)==="no"&&(u==null?void 0:u.value)===f.key?"transparentRed":"transparentWhite",children:[f.key==="yes"&&e.jsx(Oe,{size:25,color:"#fff"}),f.key==="no"&&e.jsx(We,{size:25,color:"#fff"}),f.key==="abstain"&&e.jsx(De,{size:25,color:"#fff"}),f.value>1e3?ke(f.value):f.value]},f.key)),(n==null?void 0:n.isActive)&&(n==null?void 0:n.votes[0].value)>=T&&e.jsx(V,{disabled:h,isLoading:h,rounded:!1,color:"solidBlue",onClick:()=>I(n==null?void 0:n.referendum_id),children:"Create Proposal"})]})]}),e.jsx("img",{src:`/assets/planets/${b.planet.value}.png`,alt:"medium image"})]}),e.jsxs(dt,{children:[e.jsxs(P,{children:[e.jsx(q,{children:"Planet"}),e.jsx(M,{children:b.planet.label})]}),e.jsxs(P,{children:[e.jsx(q,{children:"Voting Type"}),e.jsx(M,{highlight:!0,children:n.voting_type})]}),e.jsxs(P,{children:[e.jsx(q,{children:"Referendum Type"}),e.jsx(M,{highlight:!0,children:n.type})]}),e.jsxs(P,{children:[e.jsx(q,{children:"Required Votes"}),e.jsx(M,{children:T.toLocaleString()})]}),e.jsxs(P,{children:[e.jsx(q,{children:"Current Votes"}),e.jsx(M,{children:O.toLocaleString()})]}),e.jsxs(P,{children:[e.jsx(q,{children:"Required Approval Rate"}),e.jsxs(M,{children:[z," %"]})]}),e.jsxs(P,{children:[e.jsx(q,{children:"Current Approval Rate"}),e.jsxs(M,{children:[U," % "]})]})]})]},m)})})]})]})};export{Vn as default};
