import{s as o,g as W,S as M,T as L,d as P,Q as F,R as S,_ as y,r as _,j as e}from"./index-27a86a37.js";import{c as H}from"./index-2af2d8ed.js";import{b as O}from"./index.esm-8ae1b8e1.js";import{b as v,u as Q}from"./index-d318d3a0.js";import{m}from"./mcpFormatNumber-1b3dda04.js";import"./mineCooldown-12c3d020.js";import"./index-5752e27c.js";import"./index-dbd5f782.js";import"./use-transaction-1533d77c.js";import"./toast-options-c01c4e1b.js";import"./sleep-da79c358.js";import"./index-b1c96fb4.js";import"./index-599f5c76.js";import"./index-dc22a750.js";import"./use-media-5f9e67e2.js";import"./index-0c046bd5.js";import"./iconBase-853790c7.js";import"./adapters-4dbbe042.js";import"./axios-45629df5.js";import"./index-1bd5b69d.js";const B=o("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%","@sm":{padding:"0 15px"}}),D=o("div",{d:"flex",align:"center",justify:"center",w:"100%",maxW:"1250px",mx:"auto",my:"20px",svg:{cursor:"pointer",mr:"auto"}}),G=o("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%",maxW:"1250px","@md":{d:"flex",flexWrap:"wrap"}}),Y=o("h2",{color:"$white500",fs:"24px",ff:"$heading",mr:"auto"}),z=o("div",{d:"grid",gap:"5px",mt:"20px",w:"100%",maxW:"1250px"}),N=o("div",{d:"grid",gap:"5px",maxH:"555px",overflowY:"auto",w:"100%",maxW:"1250px"}),V=o("div",{d:"grid",gridTemplateColumns:"0.5fr repeat(4, 1fr) 3fr",gap:"10px",w:"100%",h:"37px",maxW:"1250px",bg:"rgba(0, 0, 0, 0.27)",px:"20px",span:{d:"flex",align:"center",justify:"flex-start",color:"#797979",fs:"16px",fw:"bold",ff:"$heading"},"@sm":{gridTemplateColumns:"0.5fr repeat(4, 1fr)",gap:"5x",pl:"10px",pr:"10px",span:{fs:"12px","&:last-child":{d:"none"}}}}),T=o("button",{d:"flex",align:"center",justify:"flex-start",color:"#797979",fs:"16px",fw:"bold",ff:"$heading","&:hover":{color:"$yellow500"},variants:{selected:{true:{color:"$yellow500"}}},"@sm":{fs:"12px","&:last-child":{d:"none"}}}),q=o("div",{d:"grid",alignItems:"center",justifyContent:"center",gridTemplateColumns:"0.5fr repeat(4, 1fr) 3fr",gap:"10px",minH:"55px",w:"100%",maxW:"1250px",bg:"rgba(72, 150, 222, 0.27)",pl:"20px",pr:"10px",mb:"15px",span:{d:"flex",align:"center",justify:"space-between",gap:"15px",color:"white",fs:"16px",fw:"bold",ff:"$heading",svg:{mr:"5px"}},"@sm":{h:"unset",gridTemplateColumns:"0.5fr repeat(4, 1fr)",gridTemplateRows:"0.8fr 2fr",gap:"5px",pl:"10px",pr:"10px",span:{fs:"12px"}}}),K=o("div",{d:"grid",gridTemplateColumns:"0.5fr repeat(4, 1fr) 3fr",gap:"10px",w:"100%",maxW:"1250px",bg:"rgba(0, 0, 0, 0.27)",pl:"20px",span:{d:"flex",align:"center",justify:"space-between",gap:"15px",color:"#797979",fs:"16px",fw:"bold",ff:"$heading",svg:{mr:"5px"}},"@sm":{h:"unset",gridTemplateColumns:"0.5fr repeat(4, 1fr)",gridTemplateRows:"0.8fr 2fr",gap:"5px",pl:"10px",pr:"10px",span:{fs:"12px"}}}),$=o("div",{d:"flex",flexWrap:"wrap",gap:"5px",py:"5px",">span":{d:"flex",gap:"5px"},"@sm":{gridColumnStart:1,gridColumnEnd:5,align:"center",justify:"center"}}),w=o("div",{d:"flex",align:"center",justify:"center",direction:"column",img:{objectFit:"cover",br:"10px",w:"37px",h:"37px"},span:{d:"flex",align:"center",justify:"flex-start",mt:"-10px",textShadow:"-1px 0 white, 0 1px white, 1px 0 white, 0 -1px white",color:"black !important",fs:"16px",fw:"bold",ff:"$heading"}}),U=async n=>await W({options:{code:M.GAME_MC,index_position:n,key_type:"i64",limit:"100",scope:M.GAME_MC,table:L.PLAYERS,reverse:!0}}),J=n=>P({queryKey:[F.LeaderBoard,n],queryFn:()=>X(n),staleTime:1e3*60*60});async function X(n){try{const t=await U(n);return t?Z(t):null}catch(t){return console.log(t),null}}async function Z(n){return n==null?void 0:n.map(t=>{var b,s,d;(b=t.buildings)==null||b.sort((l,f)=>v.findIndex(x=>x.label===l.buildingid)-v.findIndex(x=>x.label===f.buildingid));const a=(s=t.buildings)==null?void 0:s.filter(l=>l.building_type==="production"),c=(d=t.buildings)==null?void 0:d.filter(l=>l.building_type!=="production");return{...t,buildings:{production:a,special:c}}})}const ee=S.lazy(()=>y(()=>import("./index-30603384.js"),["assets/index-30603384.js","assets/index-27a86a37.js","assets/index-55fec1ff.css"])),j=S.lazy(()=>y(()=>import("./atom-8c918397.js"),["assets/atom-8c918397.js","assets/index-27a86a37.js","assets/index-55fec1ff.css"])),we=()=>{var x,E,k,R,A;const{data:n}=Q(),[t,a]=S.useState(3),{data:c}=J(t);function b(){H.setState(r=>({...r,selectedProduction:null}))}const s=_.useMemo(()=>{var u,g,i;if(!n)return;(u=n==null?void 0:n.buildings)==null||u.sort((h,I)=>v.findIndex(C=>C.label===h.buildingid)-v.findIndex(C=>C.label===I.buildingid));const r=(g=n.buildings)==null?void 0:g.filter(h=>h.building_type==="production"),p=(i=n.buildings)==null?void 0:i.filter(h=>h.building_type!=="production");return{...n,buildings:{production:r,special:p}}},[]),d=_.useMemo(()=>!c||!n?-1:c.findIndex(r=>r.wallet===n.wallet)+1,[c,n]),l=_.useCallback(r=>r<3?e.jsx(j,{color:"#e80066"}):r<10?e.jsx(j,{color:"#e69839"}):r<25?e.jsx(j,{color:"#9716ec"}):r<50?e.jsx(j,{color:"#2a74e6"}):e.jsx(j,{color:"#9d9d9d"}),[]),f=_.useCallback(r=>{switch(r){case"mcp":a(2);break;case"score":a(3);break;case"rMin":a(4);break;default:a(3)}},[]);return e.jsxs(B,{children:[e.jsx(ee,{}),e.jsx(D,{children:e.jsx(O,{onClick:b,color:"white",size:30})}),e.jsxs(G,{children:[e.jsx(Y,{children:"SEASON LEADERBOARD"}),e.jsxs(z,{children:[e.jsxs(V,{children:[e.jsx("span",{children:"Rank"}),e.jsx("span",{children:"Gamertag"}),e.jsx(T,{selected:t===3,onClick:()=>f("score"),children:"ScoreðŸ†"}),e.jsx(T,{selected:t===4,onClick:()=>f("rMin"),children:"Ð¯ / min"}),e.jsx(T,{selected:t===2,onClick:()=>f("mcp"),children:"MCP earned"}),e.jsx("span",{children:"Buildings"})]}),e.jsxs(q,{children:[e.jsx("span",{children:d===0?"> 100":e.jsxs(e.Fragment,{children:[" ",d," ",l(d-1)," "]})}),e.jsx("span",{children:s==null?void 0:s.gamertag}),e.jsx("span",{children:m((s==null?void 0:s.score_building)||0,3)}),e.jsx("span",{children:m((s==null?void 0:s.gamecurrency_per_minute)||0,3)}),e.jsx("span",{children:m((s==null?void 0:s.score_mcp)||0,3)}),e.jsxs($,{children:[(E=(x=s==null?void 0:s.buildings)==null?void 0:x.production)==null?void 0:E.map(r=>e.jsxs(w,{children:[e.jsx("img",{src:`/assets/mcp/${r==null?void 0:r.buildingid}.png`,alt:""}),e.jsx("span",{children:r.building_level===0?"-":r.building_level})]},r.buildingid)),e.jsx("span",{children:(R=(k=s==null?void 0:s.buildings)==null?void 0:k.special)==null?void 0:R.map(r=>e.jsxs(w,{children:[e.jsx("img",{src:`/assets/mcp/${r==null?void 0:r.buildingid}.png`,alt:""}),e.jsx("span",{children:r.building_level===0?"-":r.building_level})]},r.buildingid))})]})]}),e.jsx(N,{children:(A=c==null?void 0:c.sort((r,p)=>t!==3?0:p.score_building-r.score_building||p.gamecurrency_per_minute-r.gamecurrency_per_minute))==null?void 0:A.map((r,p)=>{var u,g;return e.jsxs(K,{children:[e.jsxs("span",{children:[p+1," ",t===3&&l(p)]}),e.jsx("span",{children:r.gamertag}),e.jsx("span",{children:m(r.score_building,3)}),e.jsx("span",{children:m((r==null?void 0:r.gamecurrency_per_minute)||0,3)}),e.jsx("span",{children:m((r==null?void 0:r.score_mcp)||0,3)}),e.jsxs($,{children:[(u=r.buildings.production)==null?void 0:u.map(i=>e.jsxs(w,{children:[e.jsx("img",{src:`/assets/mcp/${i==null?void 0:i.buildingid}.png`,alt:""}),e.jsx("span",{children:i.building_level===0?"-":i.building_level})]},i.buildingid)),e.jsx("span",{children:(g=r.buildings.special)==null?void 0:g.map(i=>e.jsxs(w,{children:[e.jsx("img",{src:`/assets/mcp/${i==null?void 0:i.buildingid}.png`,alt:""}),e.jsx("span",{children:i.building_level===0?"-":i.building_level})]},i.buildingid))})]})]},r.wallet)})})]})]})]})};export{we as default};
