import{s,j as t,e as te,b as A,r as l,q as ne,Q as se,B as F}from"./index-4f0cd60e.js";import{u as ie,o as P}from"./lands-query-85fead17.js";import{S as x}from"./styles-4f127c63.js";import{a as ae}from"./execute-claim-contract-d5281423.js";import{s as re}from"./sleep-da79c358.js";import{u as oe,o as ce}from"./user-miners-query-4733821c.js";import{u as le,o as Q}from"./tools-query-3496b52a.js";import{u as h,g as xe,s as de}from"./showTlmValueFromMine-07ff2ac6.js";import{c as pe,d as v,a as fe}from"./mineCooldown-3d51db37.js";import{u as ue,o as me}from"./lands-query-d3f9086e.js";import{F as ge}from"./index.esm-b25dc585.js";import{u as he}from"./get-planet-config-a56638f6.js";import"./lands-bddd4d35.js";import"./checkIfHasCpuOnAccount-21305020.js";import"./use-transaction-1180b8ba.js";import"./axios-43b00e28.js";import"./index-ebd8ca9a.js";import"./index-8a8c2466.js";import"./iconBase-65993ea2.js";const we=s("div",{d:"flex",align:"center",justify:"center",position:"relative",direction:"column",h:"400px",nt:"25px",gap:"20px",".recomended":{w:"280px",h:"40px",mt:"50px",br:"$full"},".recomended-2":{w:"480px",h:"40px",br:"$full"}}),ye=s("div",{d:"flex",align:"center",justify:"center",position:"relative",gap:"20px",".nfts":{w:"130px",h:"130px",br:"$full"}}),je=()=>t.jsxs(we,{children:[t.jsxs(ye,{children:[t.jsx(x,{className:"nfts"}),t.jsx(x,{className:"nfts"}),t.jsx(x,{className:"nfts"}),t.jsx(x,{className:"nfts"}),t.jsx(x,{className:"nfts"}),t.jsx(x,{className:"nfts"})]}),t.jsx(x,{className:"recomended"}),t.jsx(x,{className:"recomended-2"})]}),be=te({"0%":{transform:"rotate(360deg)"},"100%":{transform:" rotate(0deg)"}}),ve=s("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",w:"100%",px:"40px","@sm":{px:"0px"}}),Te=s("div",{d:"flex",align:"center",justify:"center",mt:"10px",mb:"30px",">button":{d:"flex",align:"center",justify:"center",direction:"column",ml:"10px",mt:"10px",w:"45px",h:"45px",svg:{color:"$white500",ml:"20px",w:"40px",h:"40px"}},variants:{isLoading:{true:{svg:{animationName:`${be}`,animationDuration:"1s",animationTimingFunction:"ease",animationIterationCount:"infinite"}}}},"@sm":{gap:"15px",m:"0px",">button":{ml:"0px",svg:{w:"30px",h:"30px"}}}}),$e=s("div",{d:"flex",align:"center",justify:"center",gap:"15px",flexWrap:"wrap",w:"100%",maxW:"1300px",padding:"40px",background:"linear-gradient(90deg, rgba(3, 16, 32, 0.08) 0%, rgba(3, 16, 32, 0.46) 3.13%, rgba(3, 16, 32, 0.46) 92.71%, rgba(3, 16, 32, 0.00) 100%)","@sm":{display:"none"}}),Ce=s("div",{d:"flex",align:"center",justify:"center",gap:"6px"}),Le=s("div",{d:"flex",align:"center",justify:"center",border:"5px solid $black500",br:"18px",overflow:"hidden",w:"80px",h:"80px",position:"relative",">img":{position:"absolute",objectFit:"contain",top:"-30px",w:"190px",h:"190px"},variants:{rarity:{Abundant:{borderColor:"#4c4c4c"},Common:{borderColor:"#000000"},Rare:{borderColor:"#3d74e9"},Epic:{borderColor:"#8719f0"},Legendary:{borderColor:"#da992e"},Mythical:{borderColor:"#d20066"}}}}),Me=s("div",{d:"flex",align:"flex-start",justify:"center",direction:"column"}),Se=s("span",{d:"flex",align:"center",justify:"center",color:"$white500",ff:"$heading",fs:"24px","@sm":{fs:"18px"}}),Ee=s("span",{d:"flex",align:"center",justify:"center",ff:"$heading",fs:"22px",fw:"$bold",textShadow:"0 0 1px #fff",variants:{rarity:{Abundant:{color:"#4c4c4c"},Common:{color:"#000000"},Rare:{color:"#3d74e9"},Epic:{color:"#8719f0"},Legendary:{color:"#da992e"},Mythical:{color:"#d20066"}}},"@sm":{fs:"18px"}}),De=s("h2",{d:"flex",align:"center",justify:"center",color:"$white500",fs:"40px",ff:"$heading",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.5)",w:"100%","@sm":{fs:"20px"}}),Ne=s("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%",mt:"30px",gap:"50px","@sm":{mt:"0px",gap:"8px",justify:"flex-start",overflow:"auto",direction:"column"}}),Re=s("div",{d:"flex",align:"center",justify:"center",w:"100%",maxW:"1300px",gap:"10px","@sm":{justify:"flex-start",direction:"column",gap:"15px",mt:"10px",overflow:"auto",maxW:"100%"}}),Ie=s("div",{d:"flex",align:"center",justify:"center",direction:"column",gap:"10px",w:"100%",padding:"20px 10px",br:"18px",bg:"rgba(3, 16, 32, 0.65)",border:"3px solid $black500",img:{mt:"20px",br:"50%",w:"100px",h:"100px"},"@sm":{w:"90%",direction:"row",padding:"10px 10px",img:{order:-1,my:"0px",w:"35px",h:"35px"}},variants:{selected:{true:{position:"relative",border:"3px solid $yellow500",">div:nth-child(2) >div:nth-child(1)":{color:"$yellow500"},">div:nth-child(3) >div:nth-child(2)":{color:"$yellow500"}}}}});s("div",{d:"flex",align:"center",justify:"center",w:"100%",ff:"$heading",fs:"20px",fw:"$bold",textShadow:"0px 4px 4px rgba(0, 0, 0, 1)",color:"$white500","@sm":{fs:"18px"}});const V=s("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%","@sm":{fs:"16px"}}),W=s("div",{d:"flex",align:"center",justify:"center",w:"100%",mt:"5px",ff:"$heading",fs:"12px",textAlign:"center",textShadow:"0px 4px 4px rgba(0, 0, 0, 1)",color:"$white500","@sm":{fs:"16px",d:"none"}}),B=s("div",{d:"flex",align:"center",justify:"center",w:"100%",ff:"$heading",fs:"16px",fw:"$bold",textAlign:"center",textShadow:"0px 4px 4px rgba(0, 0, 0, 1)",textTransform:"capitalize",color:"$white500","@sm":{fs:"16px"}});s("div",{d:"flex",align:"center",justify:"center",direction:"column",mt:"60px",color:"$white500","@sm":{mt:"10px"}});s("span",{w:"100%",textAlign:"center",fw:"$bold",ff:"$heading",fs:"26px",color:"$white500","@sm":{fs:"18px"}});s("span",{w:"100%",textAlign:"center",textTransform:"capitalize",fs:"30px",color:"$white500","@sm":{fs:"18px"}});const _e=s("div",{d:"flex",align:"center",justify:"center",gap:"20px",flexWrap:"wrap",">button":{fs:"20px",mt:"40px",h:"40px",w:"300px"},"@sm":{gap:"8px",mt:"20px",">button":{mt:"0px"}}}),et=()=>{var M,S;const o=A(e=>e.user),c=h(e=>e.nonce),z=h(e=>e.updateHashExpire),w=h(e=>e.isCalculating),T=h(e=>e.updateIsCalculating);he(),ue();const{data:r}=oe(),{data:n}=le(),{data:u,isLoading:H}=ie(),[U,y]=l.useState(new Date),[$,C]=l.useState(!1),[i,q]=l.useState(void 0),[G,L]=l.useState(!1),Y=l.useCallback(async()=>{var e;C(!0);try{await P(),T(!0),await re(500);const[[a,j]]=ne.getQueriesData(se.LANDS),d=(e=j.highestValue)==null?void 0:e.asset_id;if(!o||!d)return null;if(!(c!=null&&c.rand_str)){await xe();const p=new Date;z(p.setMinutes(p.getMinutes()+1))}const g=(r==null?void 0:r.current_land)===d?void 0:d;await ae(o,g)&&(await de(o==null?void 0:o.name),await J())}catch(a){console.log(a)}finally{T(!1),C(!1)}},[o,r,c==null?void 0:c.rand_str,w]);async function K(){A.setState(e=>({...e,user:e.user?{...e.user,miningType:"blue"}:null})),localStorage.setItem("miningType","blue")}async function J(){await Q(),await ce()}async function O(){L(!0),await Q(),await me(),await P(),L(!1)}const m=l.useMemo(()=>pe(i),[i]);l.useEffect(()=>{var d,g,b,p,E,D,N,R,I,_,k;if(((d=n==null?void 0:n.userTools)==null?void 0:d.length)===1){const f=1.5*(((b=(g=n==null?void 0:n.userTools)==null?void 0:g[0])==null?void 0:b.delay)??0);v(f,n,r,y);return}if(((p=n==null?void 0:n.userTools)==null?void 0:p.length)===2){const f=1.5*((((D=(E=n==null?void 0:n.userTools)==null?void 0:E[0])==null?void 0:D.delay)??0)+(((R=(N=n==null?void 0:n.userTools)==null?void 0:N[1])==null?void 0:R.delay)??0)/2);v(f,n,r,y);return}const a=(I=n==null?void 0:n.userTools)==null?void 0:I.sort((f,ee)=>ee.delay-f.delay),j=1.5*((((_=a==null?void 0:a[0])==null?void 0:_.delay)??0)+(((k=a==null?void 0:a[1])==null?void 0:k.delay)??0));v(j,n,r,y)},[n==null?void 0:n.userTools,r==null?void 0:r.delay,o==null?void 0:o.miningType,r,n]),l.useEffect(()=>{const e=setTimeout(()=>{q(fe(U))},1e3);return()=>clearTimeout(e)});const X=()=>w&&m==="MINE"?"Calculating hash...":c!=null&&c.rand_str?"Submit":m==="MINE"?"Set Land & Mine":`Mine Cooldown ${m}`,Z=!i||(i==null?void 0:i.seconds)<0&&(i==null?void 0:i.minutes)<0&&(i==null?void 0:i.hours)<0;return t.jsxs(ve,{children:[t.jsxs(Te,{isLoading:G,children:[t.jsx(De,{children:"Mine Maximizer"}),t.jsx("button",{onClick:O,children:t.jsx(ge,{})})]}),t.jsx($e,{children:(M=n==null?void 0:n.userTools)==null?void 0:M.map(e=>t.jsxs(Ce,{children:[t.jsx(Le,{rarity:e.rarity,children:t.jsx("img",{src:`https://ipfs.alienworlds.io/ipfs/${e.img}`,alt:""})}),t.jsxs(Me,{children:[t.jsx(Se,{children:e.toolname}),t.jsx(Ee,{rarity:e.rarity,children:e.rarity})]})]},e.asset_id))}),H?t.jsx(je,{}):t.jsx(t.Fragment,{children:t.jsx(Ne,{children:t.jsx(Re,{children:(S=u==null?void 0:u.list)==null?void 0:S.map(e=>{var a;return t.jsxs(Ie,{selected:((a=u.highestValue)==null?void 0:a.title)===e.title,children:[t.jsx("img",{src:e.img,alt:e.title}),t.jsxs(V,{children:[t.jsx(B,{children:e.title}),t.jsxs(W,{children:[e==null?void 0:e.land_name,t.jsx("br",{}),e==null?void 0:e.location]})]}),t.jsxs(V,{children:[t.jsx(W,{children:"Estimated Mine"}),t.jsxs(B,{children:[e.value_formatted.toFixed(4)??0," TLM"]})]})]},e.title)})})})}),t.jsxs(_e,{children:[t.jsx(F,{isLoading:$,disabled:Z||m!=="MINE"||w||$,color:"gradientPink",onClick:Y,children:X()}),t.jsx(F,{color:"gradientBlue",onClick:K,children:"Use as Mining Button"})]})]})};export{et as default};
