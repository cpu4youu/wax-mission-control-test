import{s as t,e as v,a as E,Q as C,R as p,_ as l,f as c,j as e,k as L}from"./index-4245a362.js";import{g as P,u as $}from"./tasks-config-query-2dfb824c.js";import{a as D}from"./index.esm-86b443f6.js";import{u as k,L as A}from"./index-0544b49c.js";const R=t("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%"}),z=t("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",h:"165px",w:"100%",zIndex:1,img:{zIndex:-1,position:"absolute",h:"165px",w:"100%",objectFit:"cover",inset:0},"@md":{h:"105px",img:{h:"105px"}},"@sm":{h:"65px",img:{h:"65px"}}}),I=t("h2",{d:"flex",align:"center",justify:"center",color:"$white500",fs:"40px",ff:"$heading",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.8)",w:"100%","@sm":{fs:"24px"}}),V=t("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%",maxW:"1095px","@md":{px:"30px"},"@sm":{px:"15px"}}),F=t("div",{d:"flex",align:"flex-start",justify:"center",direction:"column",gap:"10px",w:"100%",mt:"48px"}),x=t("h3",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",w:"100%",color:"$white500",fs:"32px","@sm":{fs:"24px"}}),Q=t("div",{d:"flex",align:"center",justify:"center",direction:"column",mt:"18px",w:"100%"}),W=t("div",{d:"grid",gridTemplateColumns:"1fr 1fr 2fr 1fr 1fr",gap:"10px",w:"100%",h:"33px",mb:"5px",padding:"5px 0px 5px 10px",bg:"rgba(0,0,0,0.27)",span:{color:"#797979",ff:"$heading",fs:"18px",fw:"$bold"},"@sm":{gap:"5px"}}),H=t("div",{d:"flex",direction:"column",gap:"5px",w:"100%","@sm":{gap:"5px"}}),M=t("div",{d:"flex",w:"100%",mt:"20px",h3:{align:"center"},"@sm":{gap:"5px"}}),U=t("div",{d:"grid",gridTemplateColumns:"1fr 1fr 2fr 1fr 1fr",position:"relative",gap:"10px",w:"100%",h:"55px",pl:"10px",bg:"rgba(0,0,0,0.27)",img:{w:"100px",h:"55px",objectFit:"contain"},span:{d:"flex",align:"center",gap:"5px","&:nth-child(3)":{justify:"center",gap:"10px"},color:"#797979",ff:"$heading",fs:"16px",fw:"$bold"},p:{d:"flex",w:"100%",color:"#797979",ff:"$heading",fs:"16px",fw:"$bold"},svg:{verticalAlign:"sub"},"@sm":{">button":{fs:"14px"}}}),G=v({"0%":{backgroundPosition:"0% 0%"},"100%":{backgroundPosition:"-135% 0%"}}),O=t("div",{d:"flex",w:"100%",maxW:"260px",h:"325px",background:"linear-gradient( -90deg, rgba(255,255,255, .05), rgba(255,255,255, 0.07) ,rgba(255,255,255, .05))",br:"10px",backgroundSize:"400% 400%",animation:`${G} 1.2s ease-in-out infinite`,"@sm":{h:"215px",w:"100%"}}),q=()=>E({queryKey:[C.DesativeTasks],queryFn:()=>B(),staleTime:1e3*60*60});async function B(){try{const r=await P("completed");return r||[]}catch(r){return console.log(r),[]}}const K=p.lazy(()=>l(()=>import("./shards-55751e95.js"),["assets/shards-55751e95.js","assets/index-4245a362.js","assets/index-55fec1ff.css"])),u=p.lazy(()=>l(()=>import("./tlm-7e2e9dbd.js"),["assets/tlm-7e2e9dbd.js","assets/index-4245a362.js","assets/index-55fec1ff.css"])),Y=p.lazy(()=>l(()=>import("./star-abf9becd.js"),["assets/star-abf9becd.js","assets/index-4245a362.js","assets/index-55fec1ff.css"])),re=()=>{const{data:r,isLoading:m}=q(),{data:n}=$(),f=k(s=>s.onChangePage),[o,g]=c.useState([]),h=c.useCallback(()=>{f("main")},[]),j=c.useCallback(s=>{const i=new Date(new Date().toUTCString().substring(0,25)),a=(n==null?void 0:n.progressupdate_seconds)??0,b=(n==null?void 0:n.tick_percent_decrease)??1,w=Math.floor(i.getTime()/1e3),y=Math.floor(new Date(s==null?void 0:s.timestamp_created).getTime()/1e3)/a*a,T=(w/a*a-y)/a,S=b*-1/100,d=s.currency_start*Math.pow(1+S,T);return s.task_type==="tlm"?Number(d.toFixed(4)):Math.floor(d)},[n]),_=c.useCallback(s=>{switch(s){case"qp":return e.jsx(L,{});case"mcp":return e.jsx(Y,{});case"tlm":return e.jsx(u,{});default:return e.jsx(u,{})}},[]);return c.useEffect(()=>{if(r){const s=r.map(i=>({...i,current_price:j(i)}));g(s)}},[r]),console.log(o),e.jsx(c.Suspense,{fallback:e.jsx(A,{}),children:e.jsxs(R,{children:[e.jsxs(z,{children:[e.jsx(I,{children:"Zapp’s Zap Emporium"}),e.jsx("img",{src:"/assets/background/bg-emporium.webp",alt:""})]}),e.jsxs(V,{children:[e.jsxs(F,{children:[e.jsx(D,{size:30,color:"#fff",onClick:h,style:{cursor:"pointer"}}),e.jsx(x,{children:"ZAPP’S TASK HISTORY"})]}),e.jsxs(Q,{children:[e.jsxs(W,{children:[e.jsx("span",{children:"Time elapsed"}),e.jsx("span",{children:"Wallet"}),e.jsx("span",{children:"Task"}),e.jsx("span",{children:"Shards"}),e.jsx("span",{children:"Support"})]}),e.jsx(H,{children:m?Array.from({length:8}).map((s,i)=>e.jsx(O,{},i)):o.length===0?e.jsx(M,{children:e.jsx(x,{children:"No task history founded"})}):o==null?void 0:o.map(s=>e.jsxs(U,{children:[e.jsx("span",{children:"~1d 19h"}),e.jsx("span",{children:s==null?void 0:s.user}),e.jsxs("span",{children:[e.jsx("img",{src:`/assets/tasks/${s.image}.webp`,alt:s.title,title:s.title}),e.jsx("p",{children:s.title})]}),e.jsxs("span",{children:[s.shards," ",e.jsx(K,{})]}),e.jsxs("span",{children:[s.current_price.toLocaleString("en-US"),_(s.task_type)]})]},s.task_id))})]})]})]})})};export{re as default};
