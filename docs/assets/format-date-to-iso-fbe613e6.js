import{g as i,S as t,T as c,a as y,Q as r,b as s,i as p,n as S,q as M,u as f}from"./index-6b7758a9.js";const b=async()=>await i({options:{code:t.HQ_MU,index_position:1,limit:"1000",scope:t.HQ_MU,table:c.TLMDROPS}})??null,d=async e=>await i({options:{code:t.HQ_MU,index_position:3,limit:"1000",key_type:"i64",scope:t.HQ_MU,table:c.TLMBIDS,lower_bound:e,upper_bound:e}})??null,D=()=>y({queryKey:[r.SPECIAL_MINING],queryFn:()=>A(),staleTime:1e3*60*60*24,enabled:!!s.getState().user});async function Q(){return await M.invalidateQueries(r.SPECIAL_MINING)}async function A(){const e=s.getState().user;if(!e)return null;try{const n=await d(e.name),a=await b();return n?n==null?void 0:n.reduce((l,u)=>{const o=a==null?void 0:a.find(g=>g.index===u.pool_index&&p(S,new Date(g.endtime)));if(!o)return l;const m=((u==null?void 0:u.total_bid)??0)/((o==null?void 0:o.total_power)??1),T=(o==null?void 0:o.rewards.replace(" TLM",""))??"1";return l+m*Number(T)},0):0}catch(n){return console.log(n),null}}const C=async e=>{const n=await i({options:{code:t.M__FEDERATION,index_position:1,limit:"1000",scope:t.M__FEDERATION,table:c.MINERCLAIM,lower_bound:e,upper_bound:e}});return(n==null?void 0:n[0])??null},F=()=>y({queryKey:[r.MINER_CLAIM],queryFn:()=>w(),staleTime:1e3*60*60*24,enabled:!!s.getState().user});async function O(){return await M.invalidateQueries(r.MINER_CLAIM)}async function w(){const e=s.getState().user;if(!e)return null;try{return await C(e.name)}catch(n){return console.log(n),null}}const I=async e=>{const n=await i({options:{code:t.M__FEDERATION,index_position:1,limit:"1000",scope:t.M__FEDERATION,table:c.LANDCOMMS,lower_bound:e,upper_bound:e}});return(n==null?void 0:n[0])??null},$=()=>y({queryKey:[r.LAND_COMMS],queryFn:()=>N(),staleTime:1e3*60*60*24,enabled:!!s.getState().user});async function q(){return await M.invalidateQueries(r.LAND_COMMS)}async function N(){const e=s.getState().user;if(!e)return null;try{return await I(e.name)}catch(n){return console.log(n),null}}const h=async e=>{const n=await i({options:{code:t.AWLNDRATINGS,index_position:1,limit:"1000",scope:t.AWLNDRATINGS,table:c.PAYOUTS,lower_bound:e,upper_bound:e}});return(n==null?void 0:n[0])??null},x=()=>y({queryKey:[r.PAYOUTS],queryFn:()=>L(),staleTime:1e3*60*60*24,enabled:!!s.getState().user});async function P(){return await M.invalidateQueries(r.PAYOUTS)}async function L(){const e=s.getState().user;if(!e)return null;try{return await h(e.name)}catch(n){return console.log(n),null}}async function v(e){const{executeTransaction:n}=f(),a=E(e);return!!await n(a)}function E(e){return{actions:[{account:t.M__FEDERATION,name:"claimmines",authorization:[{actor:e.name,permission:e.requestPermission}],data:{receiver:e.name}}]}}function U(e){const n=e.getFullYear(),a=e.getMonth()+1>9?e.getMonth()+1:`0${e.getMonth()+1}`,_=e.getDate()>9?e.getDate():`0${e.getDate()}`,l=e.getHours()>9?e.getHours():`0${e.getHours()}`,u=e.getMinutes()>9?e.getMinutes():`0${e.getMinutes()}`,o=e.getSeconds()>9?e.getSeconds():`0${e.getSeconds()}`;return`${n}-${a}-${_}T${l}:${u}:${o}`}export{F as a,$ as b,x as c,O as d,v as e,U as f,q as g,P as h,Q as o,D as u};
