import{s as c,S as D,u as v,aO as I,b as h,R as p,j as i,t,B as T,k as g,aP as w,l as j}from"./index-4004f9cb.js";import{I as b}from"./index-c1f97c66.js";import{I as S}from"./info-builder-7dae243e.js";import"./index.esm-fe20056b.js";const B=c("div",{d:"flex",align:"flex-start",justify:"center",direction:"column",mt:"35px",w:"100%"}),A=c("h2",{d:"flex",align:"center",justify:"center",fs:"20px",mb:"15px",color:"$white500"}),y=c("p",{d:"flex",align:"center",justify:"flex-start",gap:"5px",mb:"5px",w:"100%",color:"$white500",ff:"$heading",fs:"20px","@sm":{flexWrap:"wrap"}}),L=c("span",{ff:"$heading",fw:"$bold",fs:"20px",variants:{color:{red:{color:"#E52251"},green:{color:"#00FF00"}}},"@sm":{fs:"16px"}}),N=c("div",{d:"flex",align:"center",justify:"flex-start",flexWrap:"wrap",gap:"25px",mt:"15px",w:"100%","@sm":{justify:"center"}}),M=c("div",{d:"flex",align:"flex-end",justify:"center",gap:"10px",w:"100%",">div":{w:"100%",label:{w:"100%",justifyContent:"left",mb:"5px"}},button:{align:"flex-end",w:"160px",minW:"unset",maxW:"90%",padding:"0",">div":{minH:"40px",border:"none"}},"@md":{fs:"10px",">div":{maxW:"100%"}}}),E=c("div",{d:"flex",align:"center",gap:"10px",br:"10px",bg:"rgba(255,255,255,0.03)",padding:"20px 20px ",mt:"20px",w:"100%",svg:{color:"$white500",w:"35px",h:"35px"}}),F=c("span",{color:"$white500",textAlign:"center",fs:"14px",ff:"$heading","@lg":{fs:"12px"},"@md":{fs:"10px"}});async function O(n,r){const{executeTransaction:a}=v(),s=_(n,r);return!!await a(s)}function _(n,r){return{actions:[{account:D.ALIEN_WORLDS,name:"transfer",authorization:[{actor:n.name,permission:n.requestPermission}],data:{from:n.name,memo:"deposit",to:"tools.mc",quantity:`${r.toFixed(4)} TLM`}}]}}async function q(n,r){const{executeTransaction:a}=v(),s=P(n,r);return!!await a(s)}function P(n,r){return{actions:[{account:D.TOOLS_MC,name:"claim",authorization:[{actor:n.name,permission:n.requestPermission}],data:{wallet:n.name,tokens:`${r.toFixed(4)} TLM`}}]}}const J=()=>{var x,m;const{data:n}=I(),r=h(e=>e.user),a=h(e=>e.updateTLM),s=p.useRef(null),o=p.useRef(null),[u,f]=p.useState(!1);async function l(){var e;if(r){f(!0);try{await O(r,Number((e=s.current)==null?void 0:e.value))&&(await g(2e3),await w(),await a(),j.success("Deposit successful"))}catch(d){console.error("Error staking tool",d)}finally{f(!1)}}}async function $(){var e;if(r){f(!0);try{await q(r,Number((e=o.current)==null?void 0:e.value))&&(await g(2e3),await w(),await a(),j.success("Withdraw successful"))}catch(d){console.error("Error staking tool",d)}finally{f(!1)}}}function C(){o.current.value=t(n==null?void 0:n.deposit).toFixed(4)}const R=e=>{if(t(e==null?void 0:e.deposit)===0&&t(e==null?void 0:e.trialtlm)>0)return"red";if(t(e==null?void 0:e.deposit)>=0)return"green"},k=e=>{if(t(e==null?void 0:e.deposit)===0&&t(e==null?void 0:e.trialtlm)>0)return`- ${t(e==null?void 0:e.trialtlm)}`;if(t(e==null?void 0:e.deposit)>=0)return t(e==null?void 0:e.deposit)};return i.jsxs(B,{children:[i.jsx(A,{children:"Deposited TLM"}),i.jsxs(y,{children:["Deposited TLM:"," ",i.jsxs(L,{style:{cursor:"pointer"},onClick:C,color:R(n),children:[k(n)," TLM"," ",t(n==null?void 0:n.deposit)<0&&t(n==null?void 0:n.trialtlm)>0&&"(Deposit more TLM)"]})]}),i.jsxs(y,{children:["Available TLM:"," ",i.jsx(L,{color:(Number((x=r==null?void 0:r.userTlm)==null?void 0:x.balance)??0)>=0?"green":"red",children:`${(m=r==null?void 0:r.userTlm)==null?void 0:m.balance} TLM`})]}),i.jsxs(N,{children:[i.jsxs(M,{children:[i.jsx(b,{ref:s,label:"Deposit TLM"}),i.jsx(T,{isLoading:u,disabled:u,onClick:l,rounded:!1,color:"solidBlue",children:"Deposit"})]}),i.jsxs(M,{children:[i.jsx(b,{ref:o,label:"Withdraw TLM"}),i.jsx(T,{isLoading:u,disabled:u,onClick:$,rounded:!1,color:"solidBlue",children:"Withdraw"})]})]}),i.jsxs(E,{children:[i.jsx("a",{href:"https://medium.com/p/3cea7a66ce77",target:"_blank",rel:"noreferrer",children:i.jsx(S,{})}),i.jsx(F,{children:"The Trilium you earn from your referrals using Tool Loaning is automatically added to your deposit."})]})]})};export{J as default};
