import{s as a,h as R,j as r,S as L,u as v,aO as S,b as l,R as f,t as o,B as m,k as w,aP as b,l as g}from"./index-03899a23.js";import{a as A}from"./index.esm-65f7b78c.js";import{I}from"./info-builder-9790781d.js";const N=a("div",{d:"flex",align:"flex-start",justify:"center",direction:"column",mt:"35px",w:"100%"}),B=a("h2",{d:"flex",align:"center",justify:"center",fs:"20px",mb:"15px",color:"$white500"}),T=a("p",{d:"flex",align:"center",justify:"flex-start",gap:"5px",mb:"5px",w:"100%",color:"$white500",ff:"$heading",fs:"20px","@sm":{flexWrap:"wrap"}}),j=a("span",{ff:"$heading",fw:"$bold",fs:"20px",variants:{color:{red:{color:"#E52251"},green:{color:"#00FF00"}}},"@sm":{fs:"16px"}}),E=a("div",{d:"flex",align:"center",justify:"flex-start",flexWrap:"wrap",gap:"25px",mt:"15px",w:"100%","@sm":{justify:"center"}}),y=a("div",{d:"flex",align:"flex-end",justify:"center",gap:"10px",w:"100%",">div":{w:"100%",label:{w:"100%",justifyContent:"left",mb:"5px"}},button:{align:"flex-end",w:"160px",minW:"unset",maxW:"90%",padding:"0",">div":{minH:"40px",border:"none"}},"@md":{fs:"10px",">div":{maxW:"100%"}}}),O=a("div",{d:"flex",align:"center",gap:"10px",br:"10px",bg:"rgba(255,255,255,0.03)",padding:"20px 20px ",mt:"20px",w:"100%",svg:{color:"$white500",w:"35px",h:"35px"}}),_=a("span",{color:"$white500",textAlign:"center",fs:"14px",ff:"$heading","@lg":{fs:"12px"},"@md":{fs:"10px"}}),q=a("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"250px","&:has(input:disabled)":{label:{color:"$white800"}},"@md":{fs:"15px",maxW:"150px"}}),z=a("div",{d:"flex",align:"center",justify:"center",w:"100%",h:"100%",bg:"linear-gradient(0deg, rgba(255,255,255, 0.2), rgba(255,255,255, 0.2)), rgb(0, 0, 0, 0.3)",padding:"7px 15px",br:"10px",border:"1px solid",borderColor:"$white500","&:hover":{borderColor:"#FFA800",svg:{color:"#FFA800"}},"&:not(:has(input:placeholder-shown))":{borderColor:"#FFA800",svg:{color:"$blue100"}},"&:has(input[type=search])":{padding:"0px 10px"},"&:has(input:disabled)":{cursor:"not-allowed",borderColor:"$white800",svg:{color:"$white800"}},svg:{ml:"2px",color:"$white500"}}),P=a("label",{d:"flex",align:"center",justify:"center",w:"100%",fs:"22px",ff:"$heading",fw:"$bold",textShadow:" 0px 4px 4px rgba(0, 0, 0, 0.5)",outline:"none",color:"$white500",border:"none"}),H=a("input",{d:"flex",align:"center",justify:"center",h:"100%",w:"100%",bg:"transparent",border:"none",fs:"16px",ff:"$body",fw:"$normal",outline:"none",color:"$white500","&[type=number]::-webkit-inner-spin-button":{appearance:"none",background:"transparent url(/assets/icons/arrows.png) no-repeat center center ",position:"absolute",top:"0px",right:"0px",bottom:"0px",width:"10%",opacity:1},"&::placeholder":{color:"$white800"},"@sm":{"&[type=number]::-webkit-inner-spin-button":{width:"15px",h:"0px"}}}),$=R.forwardRef((n,i)=>{const{label:c,wrapperClassName:s,...t}=n;return r.jsxs(q,{className:s,children:[r.jsx(P,{htmlFor:"input",children:c}),r.jsxs(z,{children:[r.jsx(H,{...t,ref:i,id:(t==null?void 0:t.id)??"input",placeholder:(t==null?void 0:t.placeholder)??" "}),(t==null?void 0:t.type)==="search"&&r.jsx(A,{size:30})]})]})});async function Q(n,i){const{executeTransaction:c}=v(),s=G(n,i);return!!await c(s)}function G(n,i){return{actions:[{account:L.ALIEN_WORLDS,name:"transfer",authorization:[{actor:n.name,permission:n.requestPermission}],data:{from:n.name,memo:"deposit",to:"tools.mc",quantity:`${i.toFixed(4)} TLM`}}]}}async function J(n,i){const{executeTransaction:c}=v(),s=K(n,i);return!!await c(s)}function K(n,i){return{actions:[{account:L.TOOLS_MC,name:"claim",authorization:[{actor:n.name,permission:n.requestPermission}],data:{wallet:n.name,tokens:`${i.toFixed(4)} TLM`}}]}}const Y=()=>{var x,h;const{data:n}=S(),i=l(e=>e.user),c=l(e=>e.updateTLM),s=f.useRef(null),t=f.useRef(null),[p,u]=f.useState(!1);async function M(){var e;if(i){u(!0);try{await Q(i,Number((e=s.current)==null?void 0:e.value))&&(await w(2e3),await b(),await c(),g.success("Deposit successful"))}catch(d){console.error("Error staking tool",d)}finally{u(!1)}}}async function C(){var e;if(i){u(!0);try{await J(i,Number((e=t.current)==null?void 0:e.value))&&(await w(2e3),await b(),await c(),g.success("Withdraw successful"))}catch(d){console.error("Error staking tool",d)}finally{u(!1)}}}function D(){t.current.value=o(n==null?void 0:n.deposit).toFixed(4)}const k=e=>{if(o(e==null?void 0:e.deposit)===0&&o(e==null?void 0:e.trialtlm)>0)return"red";if(o(e==null?void 0:e.deposit)>=0)return"green"},F=e=>{if(o(e==null?void 0:e.deposit)===0&&o(e==null?void 0:e.trialtlm)>0)return`- ${o(e==null?void 0:e.trialtlm)}`;if(o(e==null?void 0:e.deposit)>=0)return o(e==null?void 0:e.deposit)};return r.jsxs(N,{children:[r.jsx(B,{children:"Deposited TLM"}),r.jsxs(T,{children:["Deposited TLM:"," ",r.jsxs(j,{style:{cursor:"pointer"},onClick:D,color:k(n),children:[F(n)," TLM"," ",o(n==null?void 0:n.deposit)<0&&o(n==null?void 0:n.trialtlm)>0&&"(Deposit more TLM)"]})]}),r.jsxs(T,{children:["Available TLM:"," ",r.jsx(j,{color:(Number((x=i==null?void 0:i.userTlm)==null?void 0:x.balance)??0)>=0?"green":"red",children:`${(h=i==null?void 0:i.userTlm)==null?void 0:h.balance} TLM`})]}),r.jsxs(E,{children:[r.jsxs(y,{children:[r.jsx($,{ref:s,label:"Deposit TLM"}),r.jsx(m,{isLoading:p,disabled:p,onClick:M,rounded:!1,color:"solidBlue",children:"Deposit"})]}),r.jsxs(y,{children:[r.jsx($,{ref:t,label:"Withdraw TLM"}),r.jsx(m,{isLoading:p,disabled:p,onClick:C,rounded:!1,color:"solidBlue",children:"Withdraw"})]})]}),r.jsxs(O,{children:[r.jsx("a",{href:"https://medium.com/p/3cea7a66ce77",target:"_blank",rel:"noreferrer",children:r.jsx(I,{})}),r.jsx(_,{children:"The Trilium you earn from your referrals using Tool Loaning is automatically added to your deposit."})]})]})};export{Y as default};
