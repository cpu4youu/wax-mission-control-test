import{s as n,p as m,t as y,r as j,j as e,R as _,_ as b,b as $,L as S,e as F,c as Q,v as A,n as w,w as C,o as k,x as W}from"./index-32f1a13a.js";import{S as f}from"./styles-e6af0070.js";import{S as q}from"./index-397d1fa9.js";import{u as R}from"./use-media-4a8dca30.js";import{H as I}from"./index.esm-be04aa67.js";import{i as L}from"./index-4c850814.js";import"./index.esm-41c1cb70.js";import"./index-5481dbce.js";import"./index-880880a7.js";import"./index-fbe23d8a.js";import"./iconBase-6bc96114.js";const N=n("div",{d:"flex",align:"center",justify:"center",direction:"column",mt:"25px",gap:"30px",w:"100%","@sm":{gap:"20px"}}),T=n("div",{d:"flex",align:"center",justify:"center",gap:"25px"}),v=n("button",{d:"flex",align:"center",justify:"center",color:"$white500",fs:"24px",ff:"$heading",fw:"$bold",textShadow:"1px 1px 10px black",variants:{selected:{true:{color:"$yellow500"}}},"@sm":{fs:"16px"}}),z=n("div",{d:"flex",align:"center",justify:"center",gap:"20px",">div":{minWidth:"200px"},"@sm":{">div":{minW:"200px",">button":{w:"100%",maxW:"auto"}}}}),D=n("div",{d:"flex",align:"center",justify:"center",gap:"20px",".game":{w:"100px",h:"70px"}}),E=()=>{var g;const t=m(l=>l.questFilters),x=m(l=>l.quests),{data:r,isLoading:u}=y(),[a,o]=j.useState(t.game),d=(g=r==null?void 0:r.filter(l=>x.some(c=>c.quest_collection===l.collection)))==null?void 0:g.map(l=>({...l,label:l.colrealname,value:l.collection}));function i(l,c){c&&(typeof c=="string"?m.setState(p=>({...p,questFilters:{...p.questFilters,type:l==="type"?c:p.questFilters.type}})):(o({value:c.value,label:c.label}),m.setState(p=>({...p,questFilters:{...p.questFilters,game:l==="game"?{value:c.value,label:c.label}:p.questFilters.game}}))))}const s=[{label:"All Games",value:"all"},...d||[]];return e.jsxs(N,{children:[e.jsxs(T,{children:[e.jsx(v,{selected:t.type==="all",onClick:()=>i("type","all"),children:"All"}),e.jsx(v,{selected:t.type==="available",onClick:()=>i("type","available"),children:"Available"}),e.jsx(v,{selected:t.type==="completed",onClick:()=>i("type","completed"),children:"Completed"})]}),e.jsx(z,{children:u?e.jsx(D,{children:e.jsx(f,{children:e.jsx("div",{className:"game"})})}):e.jsx(q,{onSelected:l=>i("game",l),options:s,title:"All Games",selected:{label:a==null?void 0:a.label,value:a==null?void 0:a.value}})})]})},G=n("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",gap:"20px",w:"100%",px:"40px",h2:{mt:"30px",color:"$white500",letterSpacing:"2px",textShadow:" 0px 4px 4px rgba(0, 0, 0, 0.5)"}}),H=()=>e.jsx(G,{children:e.jsx("h2",{children:"No quest listing"})}),P=n("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",gap:"20px",w:"100%",px:"40px",".nfts":{w:"100%",h:"70px",br:"10px"}}),M=()=>e.jsxs(P,{children:[e.jsx(f,{className:"nfts"}),e.jsx(f,{className:"nfts"}),e.jsx(f,{className:"nfts"}),e.jsx(f,{className:"nfts"})]}),B=n("div",{d:"grid",gridTemplateColumns:"1.5fr 1.35fr 1.15fr 0.95fr",minH:"100px",bg:"rgba(3, 16, 32, 0.65)",w:"100%",padding:"5px 0","&:hover":{boxShadow:"0px 0px 15px rgba(255,255,255,0.5)"},"@sm":{gridTemplateColumns:"1.1fr 1.5fr 1fr 0.9fr"}}),O=n("div",{d:"flex",align:"center",justify:"space-around",w:"100%",img:{h:"45px",w:"auto"},">a ":{w:"100%",maxW:"100px",h:"30px",fs:"16px",textDecoration:"none !important"}}),U=n("div",{d:"flex",align:"center",justify:"center",color:"$white500",w:"max-content",fw:"$bold",ff:"$heading"}),V=n("span",{d:"flex",align:"center",justify:"center",textAlign:"center",color:"$white500",my:"auto",w:"100%",fw:"$bold",fs:"16px",ff:"$heading",lineHeight:"17px","@sm":{justify:"flex-start",fs:"10px"}}),Y=n("span",{d:"flex",align:"center",justify:"center",color:"$white500",gap:"5px",w:"100%",fs:"20px",ff:"$heading",svg:{w:"35px"},"@sm":{fs:"12px",svg:{w:"15px"}}}),J=n("div",{d:"flex",align:"center",justify:"center",color:"$white500",gap:"10px",w:"100%",fs:"20px",ff:"$heading","@sm":{fs:"12px"}}),K=_.lazy(()=>b(()=>import("./quest-9ac914ea.js"),["assets/quest-9ac914ea.js","assets/index-32f1a13a.js","assets/index-55fec1ff.css"])),X=({data:t})=>{var a;const{isSmall:x}=R(),r=$(o=>o.user),u=(a=r==null?void 0:r.userWeekly)==null?void 0:a.quest_id_array.reduce((o,d)=>o+=Number(d)===t.quest_id?1:0,0);return e.jsxs(B,{children:[e.jsxs(O,{children:[e.jsx(S,{to:t==null?void 0:t.game_website,children:e.jsx("img",{src:t==null?void 0:t.game_logo_url,alt:""})}),!x&&e.jsx(U,{children:t.game_real_name})]}),e.jsx(V,{children:t.quest_description}),e.jsxs(Y,{children:[u??0,"/",t.quest_max_completions," "]}),e.jsxs(J,{children:[t.quest_points_per_completion,e.jsx(K,{})]})]})},Z=F({"0%":{transform:"rotate(360deg)"},"100%":{transform:" rotate(0deg)"}}),ee=n("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",zIndex:"12",w:"100%",maxW:"1190px"}),te=n("button",{d:"flex",align:"center",justify:"center",position:"absolute",right:"40px",top:"35px",animationName:`${Z}`,animationDuration:"1s",animationTimingFunction:"ease",variants:{isFetching:{true:{animationIterationCount:"infinite"}}},"@sm":{svg:{w:"30px",h:"30px"}}});n("div",{d:"flex",align:"center",justify:"center",position:"absolute",right:"10px",top:"0px",zIndex:13,gap:"20px",img:{w:"30px"},"@sm":{position:"relative",order:1,mt:"20px"}});n("div",{d:"flex",align:"center",justify:"flex-start",direction:"column",zIndex:12,pt:"60px",pl:"20px",pr:"30px",w:"100%",bg:"url(/assets/background/border.png)",bgSize:"100% 100%",backgroundPosition:"center",bgRepeat:"no-repeat",position:"relative","@sm":{px:"10px"}});n("h2",{d:"flex",align:"center",justify:"center",color:"$white500",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.5)",fs:"40px",w:"100%","@sm":{fs:"26px"}});const se=n("div",{d:"grid",gridTemplateColumns:"1.5fr 1.2fr 1fr 1fr",gridTemplateAreas:"'header header header header' 'content content content content'",mt:"20px",w:"100%","@sm":{gridTemplateColumns:"1fr 1.2fr 1fr 1fr"}});n("div",{d:"flex",align:"flex-start",justify:"flex-start",w:"100%"});const h=n("span",{color:"$white500",fs:"20px",ff:"$heading",fw:"$bold",textShadow:"1px 1px 10px black",textAlign:" center","&:nth-child(4)":{pr:"10px"},"@sm":{fs:"10px",fw:"$normal",w:"100% !important"}}),ne=n("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",gridArea:"content",h:"calc(100vh - 390px)",overflowY:"auto",padding:"20px 20px 30px",mt:"18px",gap:"12px",w:"100%","@sm":{h:"calc(100vh - 350px)",padding:"10px 5px 30px"}}),fe=()=>{const t=m(i=>i.questFilters),x=m(i=>i.quests),r=Q(i=>i.currentUserWeekly),{isFetching:u,isLoading:a}=A(),o=j.useMemo(()=>{var i;return(i=x==null?void 0:x.filter(s=>L(new Date(s.quest_end_date),w)))==null?void 0:i.map(s=>{const g=C(new Date(w),{start:new Date(s.quest_start_date),end:new Date(s.quest_end_date)}),l=r==null?void 0:r.quest_id_array.reduce((c,p)=>c+=p===(s==null?void 0:s.quest_id)?1:0,0);return{...s,isActive:g,completedQuests:l}}).filter(s=>t.type==="available"&&t.game.value==="all"?s.isActive&&s.completedQuests!==s.quest_max_completions:t.type==="available"&&t.game.value===s.quest_collection?s.isActive&&t.game.value===s.quest_collection&&s.completedQuests!==s.quest_max_completions:t.type==="all"&&t.game.value===s.quest_collection?t.game.value===s.quest_collection:t.type==="all"&&t.game.value==="all"?!0:t.type==="completed"&&t.game.value===s.quest_collection?s.completedQuests===s.quest_max_completions&&t.game.value===s.quest_collection:t.type==="completed"&&t.game.value==="all"?s.completedQuests===s.quest_max_completions:!1)},[r,t,x]);function d(){k(),W()}return j.useEffect(()=>{d()},[]),e.jsxs(ee,{children:[e.jsx(te,{isFetching:u,onClick:d,children:e.jsx(I,{color:"#FF01FF",size:40})}),e.jsx(E,{}),e.jsxs(se,{children:[e.jsx(h,{children:"Game"}),e.jsx(h,{children:"Description"}),e.jsx(h,{children:"Completions"}),e.jsx(h,{children:"Questing Points"}),e.jsx(ne,{children:a?e.jsx(M,{}):(o==null?void 0:o.length)===0?e.jsx(H,{}):o==null?void 0:o.map(i=>e.jsx(X,{data:i},i.quest_id))})]})]})};export{fe as default};
