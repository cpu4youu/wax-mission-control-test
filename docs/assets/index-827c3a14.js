import{e as Ve,s as r,g as en,S as U,T as nn,a as tn,Q as Qe,q as sn,u as X,G as an,b as Z,f as u,d as z,j as e,k as L,B as $,m as R,n as H,R as on,E as ln,l as Q}from"./index-dc61ca10.js";import{m as D,o as Be,u as rn,a as cn,b as dn,c as J,e as pn,d as un,f as xn}from"./index-b88148ca.js";import{o as G,u as fn}from"./index-eaedb408.js";import{b as mn,c as Te}from"./index.esm-9912329e.js";import{u as hn}from"./inventory-query-cfb5ff53.js";import{N as We}from"./index-356f870d.js";import{D as gn,a as jn,b as bn}from"./index-3e89793a.js";import"./index-c18b0d44.js";import"./index-5901720c.js";import"./index.esm-4d883170.js";import"./gradient-border-27ea3b6a.js";import"./Combination-63f4f41f.js";const ze=Ve({"0%":{backgroundPosition:"0% 0%"},"100%":{backgroundPosition:"-135% 0%"}}),He=Ve({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),_n=r("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%","@sm":{padding:"0 15px"}}),wn=r("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",h:"165px",w:"100%",zIndex:1,img:{zIndex:-1,position:"absolute",h:"165px",w:"100%",objectFit:"cover",inset:0}}),yn=r("h2",{d:"flex",align:"center",justify:"center",color:"$white500",fs:"40px",ff:"$heading",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.5)",w:"100%","@sm":{fs:"24px"}}),vn=r("div",{d:"flex",align:"center",justify:"center",w:"100%",maxW:"1250px",mx:"auto",my:"20px",svg:{cursor:"pointer",mr:"auto"}}),Cn=r("div",{d:"flex",align:"flex-start",justify:"center",gap:"30px",w:"100%",maxW:"1250px","@md":{d:"flex",flexWrap:"wrap"}}),Sn=r("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"51%",">button":{w:"100%",h:"40px",fs:"16px",mt:"20px",div:{border:"none"}},"@md":{w:"100%",">button":{maxW:"100%"}}}),Le=r("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%"}),Me=r("div",{d:"flex",align:"flex-end",justify:"center",w:"100%",gap:"10px",span:{fw:"bold",fs:"16px",ff:"$heading",color:"#BCBCBC","&:first-child":{fs:"24px",color:"$white500"},"&:last-child":{ml:"auto",fs:"16px",color:"#72C630"}}}),De=r("span",{mt:"10px",mr:"auto",fs:"16px",ff:"$heading",fw:"bold",color:"#BCBCBC"}),kn=r("div",{d:"flex",align:"center",justify:"space-between",mt:"30px",w:"100%",img:{br:"20px",width:"100px"}}),$n=r("div",{d:"flex",align:"flex-start",justify:"center",direction:"column",gap:"10px",button:{padding:"0",minW:"unset",w:"120px",h:"40px",fs:"16px",div:{border:"none"}},span:{fw:"bold",fs:"16px",ff:"$heading",color:"$white500"}}),En=r("div",{d:"flex",align:"center",justify:"center",gap:"20px",mt:"40px"}),qe=r("button",{d:"flex",align:"center",justify:"center",direction:"column",img:{w:"100%",maxW:"160px",h:"244px"},span:{fs:"16px",ff:"$heading",fw:"bold",color:"#BCBCBC"},"&:disabled":{cursor:"not-allowed",opacity:"0.5"}}),Bn=r("span",{mt:"10px",textAlign:"center",fs:"26px",ff:"$heading",fw:"bold",color:"$white500"}),Ie=r("span",{d:"flex",align:"center",justify:"center",gap:"10px",textAlign:"center",mr:"auto",mb:"10px",fs:"26px",ff:"$heading",fw:"bold",color:"$white500",span:{color:"#EBB309"},"> svg":{h:"25px",w:"25px"},variants:{isLoading:{true:{">button >svg":{animation:`${He} 0.5s ease-in-out infinite`}}}},"@sm":{flexWrap:"wrap"}}),Ae=r("div",{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",width:"100%",mt:"20px",bg:"rgba(0,0,0,0.46)",br:"10px ",padding:"20px",".input":{width:"100%",alignItems:"flex-start",justifyContent:"flex-start",label:{w:"max-content",fs:"16px",ff:"$heading",fw:"bold",color:"#BCBCBC"},">div":{br:"10px",border:"3px solid #697078",bg:"#D9D9D9",input:{color:"$black500"}}},">button":{w:"100%",h:"40px",fs:"16px",mt:"20px",div:{border:"none"}},"@md":{">button":{maxW:"100%"},".input":{maxW:"100%"}}}),Ne=r("div",{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",flexDirection:"column",width:"100%",mt:"20px",fs:"16px",ff:"$heading",fw:"bold",color:"#BCBCBC",">span:first-child":{display:"flex",alignItems:"center",justifyContent:"center",gap:"5px"}}),Fe=r("div",{display:"flex",alignItems:"center",justifyContent:"center",fs:"16px",ff:"$heading",fw:"bold",color:"#00BAFF",span:{ff:"math",mr:"5px"}}),Oe=r("div",{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",width:"100%",mt:"20px",bg:"rgba(0,0,0,0.46)",br:"10px ",padding:"20px"}),Re=r("span",{d:"flex",align:"center",justify:"center",gap:"10px",textAlign:"center",mr:"auto",mb:"10px",fs:"26px",ff:"$heading",fw:"bold",color:"$white500",span:{color:"#EBB309"},"> svg":{h:"25px",w:"25px"},variants:{isLoading:{true:{">button >svg":{animation:`${He} 0.5s ease-in-out infinite`}}}},"@sm":{flexWrap:"wrap"}}),Ge=r("div",{display:"flex",alignItems:"center",justifyContent:"center",gap:"20px",width:"100%","@sm":{flexWrap:"wrap"}}),A=r("div",{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",width:"100%",">button":{w:"100%",minW:"150px",h:"75px",fs:"16px",div:{border:"none"},svg:{w:"20px",h:"20px"}},"@md":{">button":{maxW:"100%"},".input":{maxW:"100%"}}}),N=r("div",{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",width:"100%",span:{fs:"16px",ff:"$heading",fw:"bold",color:"#BCBCBC","&:last-child":{color:"#00BAFF"}}}),Ue=r("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",w:"65%","@md":{w:"100%"}}),Tn=r("div",{d:"flex",align:"flex-start",justify:"flex-start",gap:"5px",w:"100%",mt:"20px"}),Wn=r("button",{d:"flex",align:"center",justify:"center",fs:"16px",ff:"$heading",fw:"bold",color:"#BCBCBC",variants:{selected:{true:{color:"#00BAFF"}}}}),Ln=r("div",{d:"flex",align:"flex-start",justify:"flex-start",flexWrap:"wrap",gap:"10px",mt:"20px"});r("div",{mt:"10px",w:"100%",height:"200px",background:"linear-gradient( -90deg, rgba(3, 16, 32, 0.40), rgba(3, 16, 32, 0.75) ,rgba(3, 16, 32, 0.40))",br:"10px",backgroundSize:"400% 400%",animation:`${ze} 1.2s ease-in-out infinite`});const Mn=r("div",{w:"160px",height:"224px",background:"linear-gradient( -90deg, rgba(255, 255, 255, 0.20), rgba(3, 16, 32, 0.75) ,rgba(255, 255, 255, 0.20))",br:"10px",backgroundSize:"400% 400%",animation:`${ze} 1.2s ease-in-out infinite`}),Dn=async()=>await en({options:{code:U.GAME_MC,index_position:1,limit:"10000",scope:U.GAME_MC,table:nn.BONUSES}}),qn=()=>tn({queryKey:[Qe.BONUSES],queryFn:()=>An(),staleTime:1e3*60*60});async function In(){return await sn.invalidateQueries(Qe.BONUSES)}async function An(){try{const a=await Dn();return a||null}catch(a){return console.log(a),null}}async function Nn(a,x,c){const{executeTransaction:f}=X(),y=Fn(a,x,c);return!!await f(y)}function Fn(a,x,c){const f={actions:[{account:"atomicassets",name:"transfer",authorization:[{actor:a.name,permission:a.requestPermission}],data:{from:a.name,to:"game.mc",memo:`nftstake,${x}`,asset_ids:c}}]};return console.log(f),f}async function On(a,x){const{executeTransaction:c}=X(),f=Rn(a,x);return!!await c(f)}function Rn(a,x){return{actions:[{account:U.GAME_MC,name:"gctomcp",authorization:[{actor:a.name,permission:a.requestPermission}],data:{wallet:a.name,gamecurrency:x}}]}}const Gn=r("div",{d:"flex",align:"center",justify:"center",direction:"column",bg:"$dark_blue500",w:"80vw",maxW:"300px",">button":{mt:"20px",w:"100%",minW:"150px",h:"30px",fs:"16px",div:{border:"none"},svg:{w:"20px",h:"20px"}}}),Un=r("span",{d:"flex",align:"center",justify:"center",mr:"auto",ff:"$heading",fs:"22px",fw:"$bold",color:"$light_blue500"}),Vn=r("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",w:"100%"}),Qn=r("div",{d:"flex",align:"center",justify:"center",gap:"10px",ff:"$heading",fs:"26px",fw:"$bold",mt:"15px",ml:"0px",textAlign:"center",color:"$white500",svg:{w:"30px",h:"30px"}}),zn=r("span",{d:"flex",align:"center",justify:"center",gap:"10px",ff:"$heading",fs:"26px",fw:"$bold",mt:"15px",ml:"10px",textAlign:"center",color:"$white500",span:{color:"#EBB309"}}),Hn=r("span",{bg:"rgba(0,0,0,0.5)",padding:"10px",w:"100%",ff:"$heading",fs:"16px",fw:"$normal",mt:"15px",textAlign:"center",color:"$white500",span:{fw:"$bold"}});function Xn(a){return an({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"M112 268l144 144 144-144M256 392V100"}}]})(a)}async function Kn(a,x,c){const{executeTransaction:f}=X(),y=Yn(a,x,c);return!!await f(y)}function Yn(a,x,c){return{actions:[{account:U.GAME_MC,name:"qptogc",authorization:[{actor:a.name,permission:a.requestPermission}],data:{wallet:a.name,qp:x,expected_resources:c}}]}}async function Jn(a,x){const{executeTransaction:c}=X(),f=Zn(a,x);return!!await c(f)}function Zn(a,x){return{actions:[{account:U.GAME_MC,name:"qptogcfill",authorization:[{actor:a.name,permission:a.requestPermission}],data:{wallet:a.name,qp:x}}]}}const F=({children:a,rValue:x=0,qpValue:c=0,isFillStorage:f,disabled:y})=>{const _=Z(g=>g.user),[j,T]=u.useState(!1),[d,W]=u.useState(z(new Date(new Date(new Date().toUTCString().substring(0,25)).getTime()+15*1e3))),[n,s]=u.useState(!1);function K(g){s(g)}async function o(g,v){if(_){T(!0);try{await Kn(_,g,Math.floor(v))&&(await R(1500),await G(),await Be(),H.success("Purchase successful"),s(!1))}catch(p){console.log(p)}finally{T(!1)}}}async function m(g){if(_){T(!0);try{await Jn(_,g)&&(await R(1500),await G(),await Be(),H.success("Storage used successfully"))}catch(v){console.log(v)}finally{T(!1)}}}const M=u.useMemo(()=>d.seconds>9?d.seconds:`0${d.seconds}`,[d]);return u.useEffect(()=>{if(n){const g=new Date(new Date().toUTCString().substring(0,25)).getTime()+15e3,v=setInterval(()=>{const p=z(new Date(g));W(p)},1e3);return()=>{W({days:0,hours:0,minutes:0,seconds:15}),clearInterval(v)}}},[n]),u.useEffect(()=>{d.minutes===0&&d.seconds===0&&s(!1)},[d]),e.jsxs(gn,{onOpenChange:K,open:n,children:[e.jsx(jn,{disabled:y,children:a}),e.jsx(bn,{closeType:"primary",closePosition:"inside",children:e.jsxs(Gn,{children:[e.jsx(Un,{children:"Confim"}),e.jsxs(Vn,{children:[e.jsxs(Qn,{children:[e.jsx(L,{})," ",c]}),e.jsx(Xn,{color:"white",size:35}),e.jsxs(zn,{children:[" ",e.jsx("span",{children:"Я"}),` > ${D(x*.95)}`]})]}),e.jsxs(Hn,{children:["If the transaction would result ",e.jsx("br",{})," in less ",e.jsx("span",{children:"Я"}),", it is aborted."]}),e.jsxs($,{isLoading:j,disabled:j,onClick:()=>f?m(c):o(c,x*.95),color:"eleventh",rounded:!1,children:["Confirm (",M,"s)"]})]})})]})},Pn={days:0,hours:0,minutes:0,seconds:0},et=({gamecurecy:a})=>{var ae,oe,le,re,ce,de,pe,ue,xe,fe,me,he,ge,je,be,_e,we,ye,ve,Ce,Se,ke,$e;const x=u.useContext(ln.UALContext),{data:c,isLoading:f}=fn(),{data:y}=rn(),{data:_}=qn(),{data:j,isLoading:T}=cn(),{data:d,isLoading:W}=dn(),n=J(t=>t.selectedProduction),s=Z(t=>t.user),K=Z(t=>t.updateAuth),o=u.useMemo(()=>y==null?void 0:y.find(t=>t.buildingid===(n==null?void 0:n.buildingid)),[y,n==null?void 0:n.buildingid]),[m,M]=u.useState(!1),[g,v]=u.useState(0),[p,Xe]=u.useState(Pn),[P,Ke]=u.useState((ae=o==null?void 0:o.allowed_schemas)==null?void 0:ae[0]),q=u.useMemo(()=>Array.from({length:(o==null?void 0:o.slot_unlock_levels.length)||0},(t,l)=>{var S;const i=(S=n==null?void 0:n.staked_asset_ids)==null?void 0:S[l];if(!i)return;const h=_==null?void 0:_.find(w=>{var B;return w.schema===i.schema.schema_name&&w.rarity===i.data.rarity&&w.shine===(((B=i==null?void 0:i.data)==null?void 0:B.shine)||"Stone")});return{...i,bonus:(h==null?void 0:h.bonus_percent)||0}}),[_,o==null?void 0:o.slot_unlock_levels.length,n==null?void 0:n.staked_asset_ids]),[b,ee]=u.useState(q),{data:Y,isLoading:Ye}=hn(P??((oe=o==null?void 0:o.allowed_schemas)==null?void 0:oe[0]));async function Je(){if(!(!s||!(n!=null&&n.buildingid))){M(!0);try{await pn(s,n==null?void 0:n.buildingid)&&(await R(3e3),G())}catch(t){console.log(t)}finally{M(!1)}}}async function ne(){await un()}async function te(){if(s){M(!0);try{if(!g)return;await On(s,g)&&(await R(3e3),G(),H.success("Delivery successful"),v(0),await K(x))}catch(t){console.log(t)}finally{M(!1)}}}async function Ze(){if(s){M(!0);try{const t=b.filter(i=>!!(i!=null&&i.asset_id)&&!q.includes(i)).map(i=>Number(i==null?void 0:i.asset_id));if(!(n!=null&&n.buildingid))return;await Nn(s,n==null?void 0:n.buildingid,t)&&(await R(3e3),await G(),await xn(),await In(),H.success("Stake successfully"))}catch(t){console.log(t)}finally{M(!1)}}}function Pe(){J.setState(t=>({...t,selectedProduction:null}))}function se(t,l){const i=b==null?void 0:b.map((h,S)=>S===t?l:h);ee(i)}const ie=u.useMemo(()=>{const t=p.hours>9?p.hours:`0${p.hours}`,l=p.minutes>0?`${p.minutes>9?p.minutes:`0${p.minutes}`}`:"00",i=p.seconds>9?p.seconds:`0${p.seconds}`;return t==="00"?`${l}:${i}`:`${t}:${l}:${i}`},[p]),E=u.useMemo(()=>{if(!(j!=null&&j[0])||!d)return 0;const t=j==null?void 0:j[0],l=a,i=Number(t==null?void 0:t.mcp),h=(t==null?void 0:t.gamecurrency)||0,S=i*h,w=((c==null?void 0:c.max_gamecurrency)??0)-l,B=h-w,V=S/B-i;return Math.round(V/d.mcpperqp)},[d,a,j]),I=u.useMemo(()=>{if(!j||!n)return;const t=j[0],l=g+g*n.building_level/100+g*n.nft_bonuspercent/100,i=Number(t.mcp),h=Number(t.gamecurrency),w=i*h/(h+l);return Math.floor(i-w)<0?0:Math.floor(i-w)},[j,g,n]),C=u.useCallback(t=>{if(!j||!(d!=null&&d.mcpperqp)||!(c!=null&&c.max_gamecurrency))return 0;const l=j[0],i=Number(l.mcp),h=l.gamecurrency,w=i*h/(i+t*(d==null?void 0:d.mcpperqp)),B=Math.floor(h-w);return B<0?0:B>c.max_gamecurrency?c.max_gamecurrency:h-w},[j,d==null?void 0:d.mcpperqp,c==null?void 0:c.max_gamecurrency]),O=u.useMemo(()=>{const t=(o==null?void 0:o.slot_unlock_levels.findLastIndex(l=>((n==null?void 0:n.building_level)??0)>=l))??0;return t===-1?!0:q[t]===void 0?!1:q[t]!==void 0},[n,q,o==null?void 0:o.slot_unlock_levels]);return u.useEffect(()=>{ee(q)},[q]),u.useEffect(()=>{if(!c||!n)return;const t=c==null?void 0:c.buildings.find(l=>l.buildingid===n.buildingid);J.setState(l=>({...l,selectedProduction:t}))},[c]),u.useEffect(()=>{const t=z(new Date(new Date((n==null?void 0:n.last_interaction)||"").getTime()+((d==null?void 0:d.seconds_market_cd)??0)*1e3));if(t.minutes!==0&&t.seconds!==0){const l=setInterval(()=>{const i=z(new Date(new Date((n==null?void 0:n.last_interaction)||"").getTime()+((d==null?void 0:d.seconds_market_cd)??0)*1e3));Xe(i)},1e3);return()=>{clearInterval(l)}}},[n==null?void 0:n.last_interaction,d==null?void 0:d.seconds_market_cd]),e.jsxs(_n,{children:[e.jsxs(wn,{children:[e.jsx(yn,{children:"Outpost Builder"}),e.jsx("img",{src:"/assets/background/bg-mcp-builder.jpeg",alt:""})]}),e.jsx(vn,{children:e.jsx(mn,{onClick:Pe,color:"white",size:30})}),e.jsxs(Cn,{children:[e.jsxs(Sn,{children:[e.jsxs(Le,{children:[e.jsxs(Me,{children:[e.jsx("span",{children:n==null?void 0:n.building_name}),e.jsxs("span",{children:["Level ",n==null?void 0:n.building_level]}),(o==null?void 0:o.building_type)==="production"?e.jsxs("span",{children:["Я ",n==null?void 0:n.gamecurrency_per_minute_boosted,"/min"]}):e.jsx("span",{})]}),e.jsx(De,{children:o==null?void 0:o.building_description})]}),e.jsxs(kn,{children:[e.jsxs($n,{children:[e.jsxs("span",{children:["Я ",D((n==null?void 0:n.gamecurrency_upgrade_cost)||0)]}),e.jsx($,{isLoading:m,rounded:!1,color:"eleventh",disabled:m||a<((n==null?void 0:n.gamecurrency_upgrade_cost)||0),onClick:Je,children:"UPGRADE"})]}),e.jsx("img",{src:`/assets/mcp/${n==null?void 0:n.buildingid}.png`,alt:""})]}),e.jsx(En,{children:b==null?void 0:b.map((t,l)=>{var h;const i=(o==null?void 0:o.slot_unlock_levels.findLastIndex(S=>((n==null?void 0:n.building_level)??0)>=S))??0;return e.jsxs(qe,{disabled:O||l>i,onClick:()=>se(l,void 0),children:[e.jsxs("span",{children:["Level ",o==null?void 0:o.slot_unlock_levels[l]]}),e.jsx("img",{src:t?`https://ipfs.alienworlds.io/ipfs/${(h=t==null?void 0:t.data)==null?void 0:h.img}`:"/assets/default-card.png",alt:""})]},(t==null?void 0:t.asset_id)||l)})}),e.jsx(Bn,{children:(n==null?void 0:n.buildingid)==="market"?`${b.reduce((t,l)=>t+=(l==null?void 0:l.bonus)||0,0)}% ADDITIONAL BONUS DELIVERY`:`${b.reduce((t,l)=>t+=(l==null?void 0:l.bonus)||0,0)}% BONUS STORAGE`}),e.jsx($,{isLoading:m,disabled:m||O,rounded:!1,color:"eleventh",onClick:Ze,children:"STAKE UNTIL END OF SEASON"}),(n==null?void 0:n.buildingid)==="market"&&!O&&e.jsxs(e.Fragment,{children:[e.jsxs(Ae,{children:[e.jsxs(Ie,{isLoading:T,children:["EXCHANGE ",e.jsx("span",{children:"Я"})," FOR ",e.jsx(Q,{}),e.jsx("button",{disabled:T,onClick:ne,children:e.jsx(Te,{color:"white",size:40})})]}),e.jsx(We,{onChange:t=>v(Number((t==null?void 0:t.target.value)||0)),value:g,maxButton:!0,onClickMaxButton:()=>v(a),type:"number",borderColor1:"transparent",borderColor2:"transparent",className:"input",label:"Я to deliver to Mission Control"}),e.jsxs(Ne,{children:[e.jsxs("span",{children:["Estimated ",e.jsx(Q,{})]}),e.jsxs(Fe,{children:[e.jsx("span",{children:"~"})," ",I==null?void 0:I.toLocaleString("en-US")]})]}),e.jsx($,{disabled:m||p.minutes!==0||p.seconds!==0,rounded:!1,color:"eleventh",onClick:te,children:p.minutes!==0||p.seconds!==0?ie:"DELIVER NOW"})]}),e.jsxs(Oe,{children:[e.jsxs(Re,{children:["EXCHANGE ",e.jsx(L,{})," FOR ",e.jsx("span",{children:"Я"})]}),e.jsxs(Ge,{children:[e.jsx(F,{disabled:(((le=s==null?void 0:s.userWeekly)==null?void 0:le.total_quest_points)??0)<1||n.building_level<1,qpValue:1,rValue:C(1),children:e.jsxs(A,{children:[e.jsx($,{isLoading:m||f||W,disabled:m||(((re=s==null?void 0:s.userWeekly)==null?void 0:re.total_quest_points)??0)<1||n.building_level<1,color:"eleventh",rounded:!1,children:e.jsxs("span",{children:["Spend ",e.jsx("br",{})," ( 1 ",e.jsx(L,{})," )"]})}),e.jsxs(N,{children:[e.jsx("span",{children:"Estimated Я"}),e.jsxs("span",{children:["~ ",D(C(1),3)]})]})]})}),e.jsx(F,{disabled:(((ce=s==null?void 0:s.userWeekly)==null?void 0:ce.total_quest_points)??0)<1||n.building_level<1,qpValue:((de=s==null?void 0:s.userWeekly)==null?void 0:de.total_quest_points)??0,rValue:C(((pe=s==null?void 0:s.userWeekly)==null?void 0:pe.total_quest_points)??0),children:e.jsxs(A,{children:[e.jsx($,{isLoading:m||f||W,disabled:m||(((ue=s==null?void 0:s.userWeekly)==null?void 0:ue.total_quest_points)??0)<1||n.building_level<1,color:"eleventh",rounded:!1,children:e.jsxs("span",{children:["Spend ",e.jsx("br",{})," ( ",((xe=s==null?void 0:s.userWeekly)==null?void 0:xe.total_quest_points)??0," ",e.jsx(L,{})," )"]})}),e.jsxs(N,{children:[e.jsx("span",{children:"Estimated Я"}),e.jsxs("span",{children:["~"," ",D(C(((fe=s==null?void 0:s.userWeekly)==null?void 0:fe.total_quest_points)??0),3)]})]})]})}),e.jsx(F,{isFillStorage:!0,disabled:(((me=s==null?void 0:s.userWeekly)==null?void 0:me.total_quest_points)??0)<1||n.building_level<1,qpValue:E,rValue:C(E),children:e.jsxs(A,{children:[e.jsx($,{isLoading:m||f||W,disabled:m||(((he=s==null?void 0:s.userWeekly)==null?void 0:he.total_quest_points)??0)<E||n.building_level<1,color:"eleventh",rounded:!1,children:e.jsxs("span",{children:["Fill Storage ",e.jsx("br",{})," ( ",E," ",e.jsx(L,{})," )"]})}),e.jsxs(N,{children:[e.jsx("span",{children:"Estimated Я"}),e.jsxs("span",{children:["~ ",D(C(E),3)]})]})]})})]})]})]})]}),(n==null?void 0:n.buildingid)==="market"&&O&&e.jsxs(Ue,{children:[e.jsxs(Ae,{children:[e.jsxs(Ie,{isLoading:T,children:["EXCHANGE ",e.jsx("span",{children:"Я"})," FOR ",e.jsx(Q,{}),e.jsx("button",{disabled:T,onClick:ne,children:e.jsx(Te,{color:"white",size:40})})]}),e.jsx(We,{onChange:t=>v(Number((t==null?void 0:t.target.value)||0)),value:g,maxButton:!0,onClickMaxButton:()=>v(Math.floor(a)),type:"number",borderColor1:"transparent",borderColor2:"transparent",className:"input",label:"Я to deliver to Mission Control"}),e.jsxs(Ne,{children:[e.jsxs("span",{children:["Estimated ",e.jsx(Q,{})]}),e.jsxs(Fe,{children:[e.jsx("span",{children:"~"})," ",I==null?void 0:I.toLocaleString("en-US")]})]}),e.jsx($,{disabled:m||n.building_level<1||p.minutes!==0||p.seconds!==0,rounded:!1,color:"eleventh",onClick:te,children:p.minutes!==0||p.seconds!==0?ie:"DELIVER NOW"})]}),e.jsxs(Oe,{children:[e.jsxs(Re,{children:["EXCHANGE ",e.jsx(L,{})," FOR ",e.jsx("span",{children:"Я"})]}),e.jsxs(Ge,{children:[e.jsx(F,{disabled:(((ge=s==null?void 0:s.userWeekly)==null?void 0:ge.total_quest_points)??0)<1||n.building_level<1,qpValue:1,rValue:C(1),children:e.jsxs(A,{children:[e.jsx($,{isLoading:m||f||W,disabled:m||(((je=s==null?void 0:s.userWeekly)==null?void 0:je.total_quest_points)??0)<1||n.building_level<1,color:"eleventh",rounded:!1,children:e.jsxs("span",{children:["Spend ",e.jsx("br",{})," ( 1 ",e.jsx(L,{})," )"]})}),e.jsxs(N,{children:[e.jsx("span",{children:"Estimated Я"}),e.jsxs("span",{children:["~ ",D(C(1),3)]})]})]})}),e.jsx(F,{disabled:(((be=s==null?void 0:s.userWeekly)==null?void 0:be.total_quest_points)??0)<1||n.building_level<1,qpValue:((_e=s==null?void 0:s.userWeekly)==null?void 0:_e.total_quest_points)??0,rValue:C(((we=s==null?void 0:s.userWeekly)==null?void 0:we.total_quest_points)??0),children:e.jsxs(A,{children:[e.jsx($,{isLoading:m||f||W,disabled:m||(((ye=s==null?void 0:s.userWeekly)==null?void 0:ye.total_quest_points)??0)<1||n.building_level<1,color:"eleventh",rounded:!1,children:e.jsxs("span",{children:["Spend ",e.jsx("br",{})," ( ",((ve=s==null?void 0:s.userWeekly)==null?void 0:ve.total_quest_points)??0," ",e.jsx(L,{})," )"]})}),e.jsxs(N,{children:[e.jsx("span",{children:"Estimated Я"}),e.jsxs("span",{children:["~"," ",D(C(((Ce=s==null?void 0:s.userWeekly)==null?void 0:Ce.total_quest_points)??0),3)]})]})]})}),e.jsx(F,{isFillStorage:!0,disabled:(((Se=s==null?void 0:s.userWeekly)==null?void 0:Se.total_quest_points)??0)<1||n.building_level<1,qpValue:E,rValue:C(E),children:e.jsxs(A,{children:[e.jsx($,{isLoading:m||f||W,disabled:m||(((ke=s==null?void 0:s.userWeekly)==null?void 0:ke.total_quest_points)??0)<E||n.building_level<1,color:"eleventh",rounded:!1,children:e.jsxs("span",{children:["Fill Storage ",e.jsx("br",{})," ( ",E," ",e.jsx(L,{})," )"]})}),e.jsxs(N,{children:[e.jsx("span",{children:"Estimated Я"}),e.jsxs("span",{children:["~ ",D(C(E),3)]})]})]})})]})]})]}),!O&&e.jsxs(Ue,{children:[e.jsxs(Le,{children:[e.jsxs(Me,{children:[e.jsx("span",{children:"NFT SELECTION"}),e.jsx("span",{})]}),e.jsx(De,{children:"Each building allows different schemas for staking. The rarity of the NFT determines the efficiency bonus."})]}),e.jsx(Tn,{children:($e=o==null?void 0:o.allowed_schemas)==null?void 0:$e.map(t=>e.jsx(Wn,{onClick:()=>Ke(t),selected:P===t,children:t},t))}),e.jsx(Ln,{children:Ye?Array.from({length:20}).map((t,l)=>e.jsx(Mn,{},l)):Y==null?void 0:Y.map((t,l)=>{var B,V;const i=_==null?void 0:_.find(k=>{var Ee;return k.schema===t.schema.schema_name&&k.rarity===t.data.rarity&&k.shine===(((Ee=t==null?void 0:t.data)==null?void 0:Ee.shine)||"Stone")}),h=b==null?void 0:b.findIndex(k=>k===void 0),S=b==null?void 0:b.some(k=>(t==null?void 0:t.asset_id)===(k==null?void 0:k.asset_id)),w=(o==null?void 0:o.slot_unlock_levels.findLastIndex(k=>((n==null?void 0:n.building_level)??0)>=k))??0;return e.jsxs(qe,{disabled:S||b[w]!==void 0||w===-1,onClick:()=>se(h,{...t,bonus:(i==null?void 0:i.bonus_percent)||0}),children:[e.jsx("img",{src:`https://ipfs.alienworlds.io/ipfs/${(B=t==null?void 0:t.data)==null?void 0:B.img}`,alt:(V=t==null?void 0:t.data)==null?void 0:V.name}),e.jsxs("span",{children:[(i==null?void 0:i.bonus_percent)||0,"%"]})]},t.asset_id)})})]})]})]})},xt=on.memo(et);export{xt as default};
