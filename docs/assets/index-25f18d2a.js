import{s as a,e as de,j as e,a as J,Q as X,am as F,R as h,_ as C,P as xe,ax as me,f as v,b as k,ay as ue,ao as le,B as R,h as A,a0 as pe,k as I,J as H,aw as Y}from"./index-7865b61a.js";import{B as fe}from"./bolt-f6e33c71.js";import{u as he}from"./index-0a35ca1c.js";import{a as we}from"./index.esm-4de27da6.js";import{e as ge,a as je}from"./execute-remove-favorites-land-contract-9b491e16.js";import{e as ye}from"./execute-add-favorites-land-contract copy-12d482c0.js";import"./info-builder-7c3b1436.js";const be=["Rocky Desert","Grassland","Dormant Volcano","Icy Mountains","Rocky Crater","Sandy Desert","Mountains","Icy Desert","Rocky Coastline","Plains","Methane Swampland","Small Island","Dunes","Tree Forest","Geothermal Springs","Active Volcano","Mushroom Forest","Inland River","Grass Coastline","Sandy Coastline"],ve=a("div",{d:"flex",align:"center",justify:"flex-start",direction:"column",w:"100%",maxW:"1190px",padding:"0 10px",">svg":{mr:"auto",mt:"20px",cursor:"pointer"}}),T=a("h3",{d:"flex",mr:"auto",mt:"25px",gap:"10px",w:"100%",fs:"29px",fw:"$bold",ff:"$heading",color:"$white500","@sm":{fs:"18px",flexWrap:"wrap",span:{w:"100%"}}}),Le=a("div",{d:"flex",align:"center",justify:"flex-start",flexWrap:"wrap",gap:"20px",mt:"30px",mb:"30px",w:"100%","@sm":{justify:"center"}}),_e=a("button",{d:"flex",align:"center",justify:"flex-start",direction:"column",variants:{isSelected:{true:{filter:"drop-shadow(0 0 0.75rem rgb(0, 186, 255))"}}}}),Se=a("p",{fs:"18px",fw:"$bold",ff:"$heading",color:"$white500",textTransform:"uppercase",mb:"10px"}),Ce=a("img",{w:"75px",h:"75px"}),Z=a("div",{d:"flex",align:"flex-start",justify:"center",direction:"column",margin:"auto",w:"100%","@md":{d:"flex",padding:"0 20px",flexWrap:"wrap"},"@sm":{align:"center",padding:"0px"}}),$e=a("div",{d:"flex",align:"center",justify:"flex-start",flexWrap:"wrap",gap:"5px",mt:"15px",w:"100%",maxW:"900px","@md":{d:"flex",padding:"0 20px",flexWrap:"wrap"},"@sm":{justify:"center",padding:"0px"}}),ke=a("button",{w:"82px",h:"82px",img:{objectFit:"cover",w:"82px",h:"82px"},"&:disabled":{cursor:"not-allowed",opacity:.5,filter:"grayscale(100%)"},variants:{isSelected:{true:{img:{border:"3px solid #00BAFF"}}}}}),V=a("div",{d:"flex",align:"center",justify:"center",gap:"5px",fs:"20px",ff:"$heading",fw:"$bold",color:"$white500",svg:{w:"30px",h:"30px"},"@sm":{}}),Re=a("button",{d:"flex",align:"center",justify:"center",ml:"auto",svg:{w:"30px",h:"30px"},"@sm":{}}),Ae=a("div",{d:"flex",align:"center",justify:"flex-start",gap:"15px",my:"25px",svg:{w:"30px",h:"30px"},"@sm":{flexWrap:"wrap"}}),K=a("div",{d:"flex",align:"center",justify:"center",gap:"5px",fs:"18px",ff:"$heading",fw:"$medium",color:"$white500",input:{padding:"5px",border:"2px solid $white500",br:"5px",h:"40px",w:"55px",maxW:"150px",fs:"18px",ff:"$heading",fw:"$medium","&.owner":{w:"150px"}},"@sm":{}}),Ie=a("button",{d:"flex",align:"center",justify:"center",ml:"auto",svg:{w:"30px",h:"30px"},"@sm":{}});a("p",{maxW:"900px",mr:"auto",fs:"18px",ff:"$body",fw:"$medium",color:"$white500","@sm":{fs:"18px"}});const Te=a("div",{d:"flex",align:"center",justify:"flex-start",flexWrap:"wrap",gap:"25px",mt:"15px",w:"100%","@md":{d:"flex",justify:"center",padding:"0 20px"},"@sm":{padding:"0 10px"}}),Ve=a("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",position:"relative",span:{fs:"16px",ff:"$body",color:"$white500"},"@sm":{w:"100%",img:{objectFit:"cover",h:"140px",w:"100%"}}}),We=a("div",{d:"flex",align:"flex-start",justify:"flex-start",position:"absolute",fs:"16px",ff:"$heading",fw:"$bold",textShadow:"0px 2px 2px #000",color:"$white500",left:"5px",top:"5px","@sm":{w:"100%"}}),Ee=a("div",{d:"flex",align:"flex-start",justify:"flex-start",gap:"5px",w:"100%",">button":{h:"45px",w:"100%",maxW:"unset",minW:"unset",padding:"0",br:"10px","&:last-child":{w:"60px"},div:{br:"10px",fs:"16px",border:"none"}},"@sm":{w:"100%",">button":{"&:last-child":{w:"100%"}}}}),W=de({"0%":{backgroundPosition:"0% 0%"},"100%":{backgroundPosition:"-135% 0%"}}),Ne=a("div",{d:"flex",w:"50%",h:"50px",mt:"10px",background:"linear-gradient( -90deg, rgba(255,255,255, .05), rgba(255,255,255, 0.07) ,rgba(255,255,255, .05))",br:"10px",backgroundSize:"400% 400%",animation:`${W} 1.2s ease-in-out infinite`,"@sm":{h:"60px",w:"100%"}}),Ge=a("div",{d:"flex",w:"85%",h:"50px",mt:"10px",background:"linear-gradient( -90deg, rgba(255,255,255, .05), rgba(255,255,255, 0.07) ,rgba(255,255,255, .05))",br:"10px",backgroundSize:"400% 400%",animation:`${W} 1.2s ease-in-out infinite`,"@sm":{h:"120px",w:"100%"}}),De=a("div",{d:"flex",w:"240px",h:"220px",background:"linear-gradient( -90deg, rgba(255,255,255, .05), rgba(255,255,255, 0.07) ,rgba(255,255,255, .05))",br:"10px",backgroundSize:"400% 400%",animation:`${W} 1.2s ease-in-out infinite`,"@sm":{w:"100%",h:"240px"}}),Me=()=>e.jsxs("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M16.7339 15.1277L14.9875 13.3813C14.8334 13.2272 14.6793 13.1758 14.4739 13.1758C14.2684 13.1758 14.1143 13.2272 13.9602 13.3813L2.7624 24.6305C2.4542 24.9387 2.4542 25.401 2.7624 25.6578L4.50884 27.4042C4.81704 27.7125 5.27933 27.7125 5.53616 27.4042L16.7339 16.2064C16.8881 16.0523 16.9394 15.8982 16.9394 15.6927C16.9394 15.4873 16.8367 15.2818 16.7339 15.1277Z",fill:"white"}),e.jsx("path",{d:"M23.8726 11.326L23.2563 10.6583L23.6158 8.24403C23.6672 8.03859 23.5644 7.78172 23.4104 7.62765L22.4858 6.70303C22.3317 6.54897 22.0748 6.44622 21.8694 6.49759L19.5065 6.85715L18.8388 6.29209C18.5306 6.03528 18.1196 6.03528 17.8628 6.34347L15.7054 8.50084C15.5 8.70634 15.4486 9.0659 15.5514 9.32272L16.065 10.35L16.0136 11.6856C16.0136 11.891 16.065 12.0965 16.2191 12.2506L17.9656 13.997C18.1196 14.1512 18.3251 14.2025 18.5306 14.2025L19.8661 14.1512L20.8934 14.6648C21.1503 14.8189 21.5098 14.7675 21.7153 14.5107L23.8726 12.3533C24.1295 12.0452 24.1295 11.6342 23.8726 11.326Z",fill:"white"}),e.jsx("path",{d:"M27.4697 20.315V16.8221C27.4697 16.7194 27.4183 16.5653 27.367 16.4626L25.9801 13.997C25.8773 13.7915 25.6719 13.6888 25.4665 13.6374C25.261 13.586 25.0042 13.6888 24.85 13.8429L22.8982 15.7948C22.59 16.0516 22.59 16.4626 22.8468 16.7708L26.1856 20.8287L26.2369 20.88C26.4424 21.0855 26.7506 21.1369 27.0074 21.0341C27.2643 20.88 27.4697 20.6232 27.4697 20.315Z",fill:"white"}),e.jsx("path",{d:"M16.5281 4.75192C16.4768 4.54645 16.3741 4.34098 16.1686 4.23825L13.703 2.85137C13.549 2.74863 13.4462 2.69727 13.2921 2.69727H9.7992C9.49102 2.69727 9.2342 2.90273 9.13145 3.15956C9.0287 3.41639 9.08008 3.72459 9.28558 3.93005L9.33695 3.98142L13.3948 7.32023C13.703 7.57704 14.114 7.52567 14.3708 7.26885L16.3227 5.31695C16.4768 5.16285 16.5281 4.95738 16.5281 4.75192Z",fill:"white"})]}),Oe=o=>J({queryKey:[o,X.AvailableLands],queryFn:()=>ze(o),staleTime:1e3*60*60});async function ze(o){if(!o)return[];try{const{getTemplates:s}=F;return(await s({collection_name:"alien.worlds",schema_name:"land.worlds",match:o,page:1,limit:100,order:"desc"})).map(p=>{const d=p.immutable_data.name.split(" on ");return{...p.immutable_data,planetName:d[1]||"",landName:d[0]||""}})}catch(s){return console.log(s),[]}}const Qe=(o,s)=>J({queryKey:[o,X.AvailableLands,s],queryFn:()=>Pe(o,s),staleTime:1e3*60*60});async function Pe(o,s){var L,p,d,_;if(!o)return[];try{const{getAssets:u}=F;let l={collection_name:"alien.worlds",schema_name:"land.worlds",match:o,page:1,limit:1e3};return s!=null&&s.owner&&(l={collection_name:"alien.worlds",schema_name:"land.worlds",owner:s.owner,match:o,page:1,limit:1e3}),(L=s==null?void 0:s.coordinates)!=null&&L.x&&(l={collection_name:"alien.worlds",schema_name:"land.worlds",owner:s==null?void 0:s.owner,"immutable_data:number.x":s.coordinates.x,match:o.split(" on ")[1],page:1,limit:1e3}),(p=s==null?void 0:s.coordinates)!=null&&p.y&&(l={collection_name:"alien.worlds",schema_name:"land.worlds",owner:s==null?void 0:s.owner,"immutable_data:number.y":s.coordinates.y,match:o.split(" on ")[1],page:1,limit:1e3}),(d=s==null?void 0:s.coordinates)!=null&&d.x&&((_=s==null?void 0:s.coordinates)!=null&&_.y)&&(l={collection_name:"alien.worlds",schema_name:"land.worlds",owner:s==null?void 0:s.owner,"immutable_data:number.x":s.coordinates.x,"immutable_data:number.y":s.coordinates.y,match:o.split(" on ")[1],page:1,limit:1e3}),s!=null&&s.template_whitelist&&(l={collection_name:"alien.worlds",schema_name:"land.worlds",template_whitelist:s==null?void 0:s.template_whitelist.join(","),owner:s.owner,match:o,page:1,limit:1e3}),(await u(l)).map(x=>{const g=x.data.name.split(" on ");return{...x.data,assetId:x.asset_id,owner:x.owner,planetName:g[1]||"",landName:g[0]||""}})}catch(u){return console.log(u),[]}}const Ue=h.lazy(()=>C(()=>import("./filter-b489dd1a.js"),["assets/filter-b489dd1a.js","assets/index-7865b61a.js","assets/index-55fec1ff.css"])),qe=h.lazy(()=>C(()=>import("./search-0e5fcf2a.js"),["assets/search-0e5fcf2a.js","assets/index-7865b61a.js","assets/index-55fec1ff.css"])),Be=h.lazy(()=>C(()=>import("./hearth-0f5de5c8.js"),["assets/hearth-0f5de5c8.js","assets/index-7865b61a.js","assets/index-55fec1ff.css"])),He=h.lazy(()=>C(()=>import("./hearth-broken-d569b957.js"),["assets/hearth-broken-d569b957.js","assets/index-7865b61a.js","assets/index-55fec1ff.css"])),tt=()=>{var N,G,D,M,O;const{data:o}=xe(),{data:s,isLoading:L}=me(),p={template_whitelist:(o==null?void 0:o.landName)==="Mountains"?["19546","19530","19510","19496","19478","19463"]:[],owner:"",coordinates:{x:void 0,y:void 0}},[d,_]=v.useState(o==null?void 0:o.planetName),[u,l]=v.useState(o==null?void 0:o.landName),[f,x]=v.useState(!1),[g,ee]=v.useState(!1),[S,j]=v.useState(p),c=k(t=>t.user),y=h.useRef(null),b=h.useRef(null),w=h.useRef(null);function te(){he.setState({selectedPage:"main"})}function se(t){_(t),j(n=>{var i;return{...n,owner:((i=w.current)==null?void 0:i.value)??""}})}function oe(t){var n,i;l(t),j(t==="Mountains"?{template_whitelist:["19546","19530","19510","19496","19478","19463"],owner:((n=w.current)==null?void 0:n.value)??"",coordinates:{x:void 0,y:void 0}}:{template_whitelist:[],owner:((i=w.current)==null?void 0:i.value)??"",coordinates:{x:void 0,y:void 0}})}function ne(){var t,n,i,m,z,Q,P,U,q,B;if(u==="Mountains"){j({template_whitelist:["19546","19530","19510","19496","19478","19463"],owner:((t=w.current)==null?void 0:t.value)??"",coordinates:{x:(n=y.current)!=null&&n.value?Number((i=y.current)==null?void 0:i.value):void 0,y:(m=b.current)!=null&&m.value?Number((z=b.current)==null?void 0:z.value):void 0}});return}console.log({selectedLand:u}),j({owner:((Q=w.current)==null?void 0:Q.value)??"",coordinates:{x:(P=y.current)!=null&&P.value?Number((U=y.current)==null?void 0:U.value):void 0,y:(q=b.current)!=null&&q.value?Number((B=b.current)==null?void 0:B.value):void 0}})}async function ae(t){if(c){x(!0);try{await ge(c,t)&&(await A(1e3),await pe(),I.success("Land added to current setup"))}catch(n){console.error(n)}finally{x(!1)}}}async function re(t){if(c){x(!0);try{if(await ye(c,t)){await A(1e3);const i=await H(c==null?void 0:c.name);k.setState(m=>({...m,user:m.user?{...m.user,...i}:null})),await Y(),I.success("Current Land added to favorites")}}catch(n){console.error(n)}finally{x(!1)}}}async function ie(t){if(c){x(!0);try{if(await je(c,t)){await A(1e3);const i=await H(c==null?void 0:c.name);k.setState(m=>({...m,user:m.user?{...m.user,...i}:null})),await Y(),I.success("Land removed from favorites")}}catch(n){console.error(n)}finally{x(!1)}}}const ce=t=>s==null?void 0:s.favoriteLands.some(n=>n.map(({assetId:i})=>i).join(",")===t),{data:$}=Oe(d),{data:r,isLoading:E}=Qe(`${u} on ${d}`,S);return e.jsxs(ve,{children:[e.jsx(we,{size:30,color:"#fff",onClick:te}),e.jsx(T,{children:"Planet"}),e.jsx(Le,{children:ue.map(t=>e.jsxs(_e,{onClick:()=>se(t),isSelected:(d==null?void 0:d.toLowerCase())===t,children:[e.jsx(Se,{children:t}),e.jsx(Ce,{src:`/assets/planets/${t}.png`,alt:t,title:t})]},t))}),e.jsxs(Z,{children:[e.jsx(T,{children:"Land Type"}),e.jsx($e,{children:be.map(t=>e.jsx(ke,{onClick:()=>oe(t),disabled:!($!=null&&$.some(n=>n.landName===t)),isSelected:u===t,children:e.jsx("img",{src:`/assets/lands/${t}.webp`,alt:t,title:t})},t))})]}),e.jsxs(Z,{children:[E?e.jsxs(e.Fragment,{children:[e.jsx(Ne,{}),e.jsx(Ge,{})]}):e.jsxs(e.Fragment,{children:[e.jsxs(T,{children:[r!=null&&r[0]?e.jsxs(e.Fragment,{children:[e.jsx("span",{children:(N=r==null?void 0:r[0])==null?void 0:N.landName}),e.jsxs(V,{children:[e.jsx(le,{}),(((G=r==null?void 0:r[0])==null?void 0:G.luck)/10).toLocaleString("US-en")]}),e.jsxs(V,{children:[e.jsx(Me,{}),(((D=r==null?void 0:r[0])==null?void 0:D.ease)/10).toLocaleString("US-en")]}),e.jsxs(V,{children:[e.jsx(fe,{fill:!0,color:"white"}),(((M=r==null?void 0:r[0])==null?void 0:M.delay)/10).toLocaleString("US-en")]})]}):e.jsx("span",{children:"No lands found"}),e.jsx(Re,{onClick:()=>ee(!g),children:e.jsx(Ue,{})})]}),g&&e.jsxs(Ae,{children:[e.jsxs(K,{children:["Coordinates",e.jsx("input",{ref:y,type:"text",defaultValue:S.coordinates.x}),":",e.jsx("input",{ref:b,type:"text",defaultValue:S.coordinates.y})]}),e.jsxs(K,{children:["Owner",e.jsx("input",{ref:w,className:"owner",type:"text",defaultValue:S.owner})]}),e.jsx(Ie,{onClick:ne,children:e.jsx(qe,{})})]})]}),e.jsx(Te,{children:E?Array.from({length:8}).map((t,n)=>e.jsx(De,{},n)):(O=r==null?void 0:r.sort((t,n)=>t.commission-n.commission))==null?void 0:O.map(t=>e.jsxs(Ve,{children:[e.jsxs(We,{children:[t==null?void 0:t.x,":",t==null?void 0:t.y]}),e.jsx("img",{src:`/assets/lands/${t.landName}.webp`,alt:t.landName,title:t.landName}),e.jsxs("span",{children:["Commission: ",(t==null?void 0:t.commission)/100," %"]}),e.jsxs("span",{children:["Owner: ",t==null?void 0:t.owner]}),e.jsxs(Ee,{children:[e.jsx(R,{isLoading:f,disabled:f,onClick:()=>ae(t.assetId),color:"solidBlue",children:"Select"}),ce(t.assetId)?e.jsx(R,{isLoading:f,disabled:f,onClick:()=>ie(t.assetId),children:e.jsx(He,{})}):e.jsx(R,{isLoading:f,disabled:f,onClick:()=>re(t.assetId),color:"gradientYellow",children:e.jsx(Be,{})})]})]},t.assetId))})]})]})};export{tt as default};
