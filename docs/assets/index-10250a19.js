import{e as Bn,s as o,c as Qn,S as I,u as zn,r as Mn,T as H,g as Ln,a as Pn,Q as z,b as D,q as U,d as Rn,i as On,f as T,j as n,B as F,h as J,k as Z,R,_ as Vn,l as Wn,m as q,I as Q,v as Y,G as Gn,o as Kn}from"./index-b65e0159.js";import{B as N,H as Yn}from"./index.esm-a398e3a2.js";import{u as Xn}from"./inventory-query-addb62ae.js";import{i as Un}from"./index-d8845068.js";import{D as Jn,a as Zn,b as ne}from"./index-950e7f08.js";import{I as ee}from"./info-builder-d84c1028.js";import"./index-6f525eea.js";import"./index-1c4ab2ac.js";const se=Bn({"0%":{backgroundPosition:"0% 0%"},"100%":{backgroundPosition:"-135% 0%"}}),te=o("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%",maxW:"1190px"}),re=o("h2",{d:"flex",align:"center",justify:"center",gap:"10px",color:"$white500",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.9)",fs:"40px",w:"100%",mt:"60px","@sm":{mt:"0px",fs:"26px"}}),ae=o("a",{d:"flex",align:"flex-end",justify:"flex-end",direction:"column",gap:"5px",svg:{w:"35px",h:"35px"},"@sm":{align:"flex-start",justify:"flex-start"}}),oe=o("div",{d:"flex",align:"center",justify:"center",gap:"20px",w:"100%",mt:"20px",position:"relative",">svg":{position:"absolute",left:"0px",cursor:"pointer"},"@sm":{">svg":{top:"-55px",left:"10px"}}}),K=o("button",{d:"flex",align:"center",justify:"center",color:"$white500",ff:"$heading",fs:"26px",fw:"700",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.5)",variants:{isActive:{true:{color:"$yellow500"}}},"@sm":{fs:"16px"}}),le=o("div",{mt:"30px",w:"100%",height:"450px",background:"linear-gradient( -90deg, rgba(3, 16, 32, 0.40), rgba(3, 16, 32, 0.75) ,rgba(3, 16, 32, 0.40))",br:"10px",backgroundSize:"400% 400%",animation:`${se} 1.2s ease-in-out infinite`}),ie=o("div",{d:"flex",align:"center",justify:"flex-start",direction:"column",mt:"30px",w:"100%","@md":{direction:"column",padding:"0 10px"}}),de=o("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",gap:"20px",padding:"0 5px 15px 0",w:"100%",maxW:"1190px"});o("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",gap:"20px",w:"100%",h:"calc(100vh - 380px)",pr:"5px",overflow:"auto"});const xe=o("div",{d:"flex",align:"center",justify:"center",direction:"column",br:"10px",background:"rgba(3, 16, 32, 0.65)",padding:"30px 18px",color:"$white500",ff:"$heading",fs:"36px",fw:"bold",textAlign:"center",w:"100%",maxW:"1190px",minH:"450px"}),pe=o("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",br:"10px",background:"rgba(3, 16, 32, 0.65)",padding:"30px 18px",w:"100%",maxW:"1190px",">button":{d:"none"},"@md":{position:"relative",align:"center",justify:"center",padding:"10px 5px",">button":{d:"flex"}}}),ce=o("div",{d:"flex",align:"center",justify:"center",color:"$white500",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.9)",ff:"$heading",fs:"16px","@sm":{m:"5px auto 0",textAlign:"center",fs:"10px"}}),fe=o("div",{d:"flex",align:"center",justify:"space-between",w:"100%",">button ":{fs:"18px","> div":{h:"50px"}},"@md":{zIndex:1,direction:"column",">button ":{d:"none"}}}),ue=o("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column","@md":{w:"100%",h:"155px"}}),ge=o("h2",{d:"flex",align:"flex-start",justify:"flex-start",color:"$white500",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.9)",fs:"40px",w:"100%","@md":{my:"10px"},"@sm":{align:"center",justify:"center",my:"0px",order:-1,textAlign:"center",fs:"20px"}}),he=o("div",{d:"flex",align:"center",justify:"center",gap:"10px",span:{d:"flex",align:"center",justify:"center",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.9)",color:"$white500",ff:"$heading",fs:"16px",svg:{ml:"5px"}},"@sm":{gap:"0px",direction:"column",mt:"auto",">span":{justify:"flex-start",w:"100%",fs:"12px"}}}),we=o("div",{d:"flex",align:"center",justify:"space-between",w:"100%",mt:"30px"}),ve=o("div",{position:"relative",overflow:"hidden",minWidth:"382px",height:"249px",img:{br:"10px",width:"382px",height:"249px",objectFit:"cover"},"@md":{position:"absolute",minWidth:"100%",width:"100%",h:"170px",top:0,left:0,img:{width:"100%",h:"170px",position:"absolute"}}}),je=o("div",{d:"flex",align:"center",justify:"center",direction:"column",zIndex:"1",w:"300px",padding:"0 0 5px",position:"absolute",right:"-90px",top:"40px",transform:"rotate(45deg)",bg:"#65B5FF",color:"$white500",ff:"$heading",span:{fw:"$bold",fs:"20px"},p:{fs:"16px"},"@md":{transform:"rotate(315deg)",w:"210px",top:"115px",right:"-70px",span:{pt:"5px",fs:"12px"},p:{fs:"8px"}}}),be=o("div",{d:"flex",align:"center",justify:"space-between",direction:"column",flexWrap:"wrap",gap:"5px",maxH:"320px",w:"100%","@sm":{d:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"5px",mb:"10px"}}),ye=o("div",{d:"flex",align:"center",justify:"space-between",padding:"10px 15px",w:"350px",br:"9px",border:"0px solid #FFF",color:"$white500",variants:{firstFive:{true:{background:"linear-gradient(90deg, #1B1B1B 0%, rgba(0, 0, 0, 0.00) 100%)"},false:{background:"linear-gradient(270deg, #1B1B1B 0%, rgba(0, 0, 0, 0.00) 100%)"}},lock:{true:{"@sm":{background:"linear-gradient(90deg, #4B4B4B96 0%, #53535396 100%) !important"}},false:{"@sm":{background:"linear-gradient(90deg, #1B1B1B 0%, #000 100%) !important"}}}},"@sm":{justify:"center",w:"100%",height:"47px",padding:"5px"},"@xsm":{width:"53px"}}),$e=o("span",{ff:"$heading",fs:"16px","@sm":{display:"none"}}),_e=o("div",{d:"flex",align:"flex-end",justify:"center",direction:"column",span:{ff:"$heading",textAlign:"right"},variants:{firstFive:{true:{align:"flex-start",order:-1,">span":{textAlign:"left"},"@sm":{align:"center"}}}},"@sm":{align:"center",width:"53px",height:"47px"}}),Ae=o("span",{ff:"$heading",fs:"10px",fw:"bold","@sm":{mb:"4px",fs:"15px"},"@xsm":{fs:"8px"}}),Ce=o("span",{ff:"$heading",fs:"16px",textAlign:"center","@sm":{fs:"12px"},"@xsm":{fs:"6px"}}),_=Qn((e,s)=>({advTemplate:void 0,updateAdvTemplate:l=>Se(e,l),advActives:{available:[],claimable:[]},updateAdvActives:l=>ke(e,l),selectedAdventure:void 0,updateSelectedAdventure:l=>Te(e,l)}));function Se(e,s){e(l=>({...l,advTemplate:s}))}function ke(e,s){e(l=>({...l,advActives:s}))}function Te(e,s){e(l=>({...l,selectedAdventure:s}))}const Ie=Bn({"0%":{backgroundPosition:"0% 0%"},"100%":{backgroundPosition:"-135% 0%"}}),me=o("div",{d:"flex",align:"center",justify:"flex-start",direction:"column",w:"100%",maxW:"1190px",br:"10px",background:"rgba(3, 16, 32, 0.95)",">button button":{mt:"20px",h:"50px",fs:"22px"},"@sm":{">button button":{my:"10px"}}}),Ee=o("div",{d:"flex",align:"flex-start",justify:"flex-start",position:"relative",overflow:"hidden",direction:"column",w:"100%",minH:"300px",br:"10px",img:{br:"10px 10px 0 0",mt:"-120px",objectFit:"cover",w:"100%",height:"294px",inset:"0"},"@sm":{position:"relative",minH:"initial",img:{mt:"-170px",h:"170px"}}}),De=o("div",{d:"flex",align:"center",justify:"center",direction:"column",zIndex:"1",w:"450px",padding:"0 0 10px",position:"absolute",right:"-105px",top:"65px",transform:"rotate(45deg)",bg:"#65B5FF",color:"$white500",ff:"$heading",span:{fw:"$bold",fs:"33px"},p:{fs:"21px"},"@sm":{transform:"rotate(315deg)",w:"210px",top:"100px",right:"-65px",span:{pt:"5px",fs:"12px"},p:{fs:"8px"}}}),Fe=o("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",zIndex:"1",padding:"20px",p:{d:"flex",align:"center",justify:"center",color:"$white500",ff:"$heading",fs:"16px",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.9)",svg:{ml:"5px"}},"@sm":{mt:"80px",p:{fs:"10px"}}}),Be=o("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",padding:"10px 20px","@sm":{align:"center",justify:"center",position:"absolute",padding:"5px 10px",w:"100%"}}),ze=o("span",{color:"$white500",ff:"$heading",fs:"16px",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.9)","@sm":{order:1,textAlign:"center",fs:"10px"}}),Me=o("h2",{color:"$white500",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.9)",fs:"40px",w:"100%","@sm":{textAlign:"center",fs:"20px"}}),Le=o("span",{color:"$white500",ff:"$heading",fs:"16px",padding:"0 20px 20px","@sm":{padding:"10px",fs:"12px",textAlign:"center"}}),Pe=o("div",{d:"flex",align:"center",justify:"space-between",w:"100%",padding:"0 20px",mt:"100px","@xlg":{flexWrap:"wrap"},"@sm":{padding:"0px",mt:"0px",direction:"column"},"@xsm":{}});o("div",{d:"flex",align:"center",justify:"space-between",direction:"column",gap:"5px",w:"100%",maxW:"550px"});const Sn=o("div",{d:"flex",align:"center",justify:"space-between",direction:"column",w:"290px",gap:"5px",color:"$white500","@sm":{w:"100%",mt:"5px",px:"4px",direction:"row"}}),kn=o("div",{d:"flex",align:"center",justify:"space-between",padding:"10px 15px",w:"290px",br:"9px",border:"0px solid #FFF",color:"$white500",variants:{lock:{true:{"@sm":{background:"linear-gradient(90deg, #4B4B4B96 0%, #53535396 100%)"}},false:{"@sm":{background:"linear-gradient(90deg, #1B1B1B 0%, #000 100%)"}}},firstFive:{true:{"@media(min-width: 768px)":{background:"linear-gradient(90deg, #1B1B1B 0%, rgba(0, 0, 0, 0.00) 100%)"}},false:{"@media(min-width: 768px)":{background:"linear-gradient(270deg, #1B1B1B 0%, rgba(0, 0, 0, 0.00) 100%)"}}},leftSelected:{true:{background:"linear-gradient(90deg, #019D8A 0%, rgba(1, 120, 157, 0.00) 100%)","@sm":{background:"linear-gradient(180deg, #019D8A 0%, rgba(1, 120, 157, 0.00) 100%)"}}},rightSelected:{true:{background:"linear-gradient(270deg, #019D8A 0%, rgba(1, 120, 157, 0.00) 100%)","@sm":{background:"linear-gradient(0deg, #019D8A 0%, rgba(1, 120, 157, 0.00) 100%)"}}}},"@sm":{direction:"column",justify:"center",width:"100%",height:"47px",padding:"5px"}}),Tn=o("span",{ff:"$heading",fs:"16px","@sm":{order:1,fs:"8px"}}),In=o("div",{d:"flex",align:"flex-end",justify:"center",direction:"column",">span":{ff:"$heading",textAlign:"right"},variants:{firstFive:{true:{align:"flex-start",order:-1,">span":{textAlign:"left"},"@sm":{align:"center",">span":{textAlign:"center"}}}}},"@sm":{align:"center",justify:"flex-start",">span":{textAlign:"center"}}}),mn=o("span",{ff:"$heading",fs:"10px",fw:"bold","@sm":{mb:"1px",fs:"8px"}}),En=o("span",{ff:"$heading",fs:"16px",textAlign:"center","@sm":{fs:"6px"}}),Re=o("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%","@xlg":{order:1}}),Ve=o("div",{d:"flex",align:"center",justify:"center",gap:"20px",mb:"20px","@sm":{m:"20px 0 0px",gap:"10px"}}),P=o("button",{d:"flex",align:"center",justify:"center",fs:"20px",ff:"$heading",fw:"$bold",color:"$white500",variants:{isSelected:{true:{textUnderlineOffset:"0.5em",textDecoration:"underline"}}},"@sm":{fs:"10px"}}),We=o("div",{d:"flex",align:"flex-start",justify:"center",variants:{isInventoryOpen:{true:{flexWrap:"wrap",width:"100%",maxH:"525px",gap:"5px",overflowY:"auto"},false:{img:{"&:hover":{transform:"scale(1.05)",zIndex:"4"},"&:nth-of-type(1)":{transform:"translate(60px,20px) rotate(-20deg)",zIndex:"3","&:hover":{transform:"scale(1.05) translate(60px,20px) rotate(-20deg)",zIndex:"4"}},"&:nth-of-type(3)":{transform:"translate(-60px,20px) rotate(20deg)",zIndex:"1","&:hover":{transform:"scale(1.05) translate(-60px,20px) rotate(20deg)",zIndex:"4"}}},"@sm":{img:{transition:"all 0.2s ease-in-out","&:hover":{transform:"scale(1.05)",zIndex:"4"},"&:nth-of-type(1)":{transform:" rotate(-20deg) translate(0px,15px)",zIndex:"3","&:hover":{transform:"scale(1.05) translate(0px,15px) rotate(-20deg)",zIndex:"4"}},"&:nth-of-type(3)":{transform:"rotate(20deg) translate(0px,15px)",zIndex:"1","&:hover":{transform:"scale(1.05) translate(0px,15px) rotate(20deg)",zIndex:"4"}}}}}}},"@sm":{gap:"20px",mt:"20px"}}),E=o("img",{cursor:"pointer",transition:"all 0.2s ease-in-out",width:"174px",height:"259px",zIndex:"2","@sm":{width:"110px",height:"150px"},"@xsm":{width:"70px",height:"100px"}}),Ue=o("div",{width:"174px",height:"259px",background:"linear-gradient( -90deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.25) ,rgba(255, 255, 255, 0.15))",br:"10px",backgroundSize:"400% 400%",animation:`${Ie} 1.2s ease-in-out infinite`,"@sm":{width:"70px",height:"100px"}}),Ne=o("div",{d:"flex",align:"center",justify:"center",direction:"column",mt:"40px",span:{ff:"$heading",fs:"28px",color:"$green500","&:first-child":{color:"$white500",fs:"24px"}},"@sm":{mt:"20px",span:{fs:"18px","&:first-child":{fs:"14px"}}}}),He=o("span",{color:"$white500",padding:"20px",ff:"$heading",fs:"16px","@sm":{padding:"0px 10px 20px",textAlign:"center",fs:"10px"}});async function Nn({user:e,adventureid:s,assets_ids:l}){const i=qe(e,s,l),{executeTransaction:x}=zn();return!!await x(i)}function qe(e,s,l){const i={actions:[]};return l.length>0?(i.actions.push({account:"atomicassets",name:"transfer",authorization:[{actor:e.name,permission:e.requestPermission}],data:{from:e.name,to:"adventure.mc",memo:`mcadventure,${s}`,asset_ids:l}}),i):(i.actions.push({account:I.ADVENTURE_MC,name:"joinadv",authorization:[{actor:e.name,permission:e.requestPermission}],data:{wallet:e.name,adventureid:s}}),i)}const Qe=async()=>{let e=!1,s;const l=[];for(;!e;){const i=await Mn.get_table_rows({code:I.ADVENTURE_MC,index_position:1,reverse:!0,limit:"10000",scope:I.ADVENTURE_MC,table:H.ADVENTURES,upper_bound:s});e=!i.more,l.push(...i.rows.slice(0,-1)),s=i.next_key}return l},Oe=async e=>await Ln({options:{code:I.ADVENTURE_MC,index_position:3,key_type:"i64",limit:"1000",lower_bound:e,upper_bound:e,scope:I.ADVENTURE_MC,table:H.PARTICIPANTS}}),Ge=async()=>await Ln({options:{code:I.ADVENTURE_MC,index_position:1,limit:"1000",scope:I.ADVENTURE_MC,table:H.LEVEL_UNLOCKS}});function X(){const e=new Date;return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds())}const Ke=()=>Pn({queryKey:[z.ADVENTURES],queryFn:()=>Ye(),staleTime:1e3*60*60,enabled:!!D.getState().user&&!!U.getQueryData(z.ADV_TEMPLATES)});async function O(){return U.removeQueries([z.ADVENTURES]),await U.invalidateQueries([z.ADVENTURES])}async function Ye(){try{const e=await Qe(),s=U.getQueryData(z.ADV_TEMPLATES),l=D.getState().user;if(!e||!l||!s)return{available:null,participants:null,claimable:null};const i=Je(s),x=_.getState().updateAdvTemplate;x(i);const p=await Oe(l==null?void 0:l.name),c=await Xe(e,l,p);if(!p)return{available:c,participants:null,claimable:null};const r=Dn("participants",p,e,i),f=Dn("claimable",p,e,i);return{available:c,participants:r,claimable:f}}catch(e){return console.log(e),null}}async function Xe(e,s,l){const i=await Ge();return e.filter(x=>Un(X(),new Date((x==null?void 0:x.enter_end)??""))).filter(x=>!(l!=null&&l.some(p=>x.adventureid===p.adventureid))).map(x=>{var p;return{...x,mods:(p=x.mods)==null?void 0:p.map((c,r)=>{var f,t;return(((f=i==null?void 0:i[r])==null?void 0:f.level)??1)>((s==null?void 0:s.level)??1)?{...c,lock:!0,level_to_unlock:((t=i==null?void 0:i[r])==null?void 0:t.level)??1}:{...c,lock:!1}}),formatted_enter_end:Rn(new Date((x==null?void 0:x.enter_end)??""))}})}function Je(e){return e.map(s=>({...s,"nft.mp":s.nft_mp,"tlm.mp":s.tlm_mp}))}function Dn(e,s,l,i){var x,p,c;return e==="participants"?(p=(x=s==null?void 0:s.filter(r=>Un(X(),new Date((r==null?void 0:r.return_date)??""))))==null?void 0:x.sort((r,f)=>+new Date(r.return_date??"")-+new Date(f.return_date??"")))==null?void 0:p.map(r=>{var u;const f=l==null?void 0:l.find(d=>d.adventureid===r.adventureid),t=(u=r==null?void 0:r.template_ids)==null?void 0:u.map(d=>i==null?void 0:i.find(b=>b.templateid===d));return{...f,...r,cards:t,formatted_return:Rn(new Date((r==null?void 0:r.return_date)??""))}}):(c=s==null?void 0:s.filter(r=>On(X(),new Date((r==null?void 0:r.return_date)??""))))==null?void 0:c.map(r=>{var u;const f=l==null?void 0:l.find(d=>d.adventureid===r.adventureid),t=(u=r==null?void 0:r.template_ids)==null?void 0:u.map(d=>i==null?void 0:i.find(b=>b.templateid===d));return{...f,...r,cards:t}})}const Fn=o("span",{color:"$white500",fw:"$bold",ff:"$heading",fs:"14px"}),Ze=({text:e,characterLimit:s=100})=>{const[l,i]=T.useState(!1),x=()=>{i(!0)},p=c=>{const r=c!=null;return r&&c.length<=s?n.jsx("div",{children:c}):r&&c.length>s&&l?n.jsxs("div",{children:[e,n.jsx("br",{}),n.jsx(Fn,{onClick:()=>i(!1),children:"Show less"})]}):r&&c.length>s?n.jsxs("div",{children:[c.slice(0,s),n.jsx("span",{children:"... "}),n.jsx(Fn,{onClick:()=>x(),children:"Show more"})]}):n.jsx("div",{})};return n.jsx("div",{children:p(e)})},ns=o("div",{d:"flex",align:"center",justify:"center",direction:"column",bg:"$dark_blue500",w:"80vw",maxW:"300px",">button":{mt:"20px",w:"100%",minW:"150px",h:"30px",fs:"16px",div:{border:"none"},svg:{w:"20px",h:"20px"}}}),es=o("span",{d:"flex",align:"center",justify:"center",mr:"auto",ff:"$heading",fs:"22px",fw:"$bold",color:"$light_blue500"}),ss=o("div",{d:"flex",align:"center",justify:"center",w:"100%",mt:"20px",">button":{mt:"20px",w:"100%",minW:"150px",h:"30px",fs:"16px",div:{border:"none"},svg:{w:"20px",h:"20px"}}}),ts=o("span",{bg:"rgba(0,0,0,0.5)",padding:"10px",w:"100%",ff:"$heading",fs:"16px",fw:"$normal",mt:"15px",textAlign:"center",color:"$white500",span:{fw:"$bold"}}),rs=({children:e,adventureid:s,disabled:l})=>{const i=D(h=>h.user),x=_(h=>h.advActives),p=_(h=>h.updateAdvActives),c=_(h=>h.updateSelectedAdventure),[r,f]=T.useState(!1),[t,u]=T.useState(!1);function d(h){u(l?!1:h)}async function b(){if(!(!i||!s))try{f(!0),await Nn({user:i,adventureid:s,assets_ids:[]})&&(await J(2e3),await O(),p({...x,available:[...x.claimable,s]}),c(void 0),Z.success("Adventure started successfully"))}catch(h){console.log(h)}finally{f(!1)}}return n.jsxs(Jn,{onOpenChange:d,open:t,children:[n.jsx(Zn,{children:e}),n.jsx(ne,{closeType:"primary",closePosition:"inside",children:n.jsxs(ns,{children:[n.jsx(es,{children:"Confirm"}),n.jsx(ts,{children:"Are you sure that you wants to start the adventure without NFTs ?"}),n.jsxs(ss,{children:[n.jsx(F,{isLoading:r,disabled:r,onClick:b,color:"solidBlue",rounded:!1,children:"Confirm"}),n.jsx(F,{isLoading:r,disabled:r,onClick:()=>d(!1),color:"solidBlue",rounded:!1,children:"Cancel"})]})]})})]})},as=R.lazy(()=>Vn(()=>import("./star-3ff3b004.js"),["assets/star-3ff3b004.js","assets/index-b65e0159.js","assets/index-55fec1ff.css"])),os=({selected:e})=>{var sn,tn,rn,an,on,ln,dn,xn,pn,cn,fn,un,gn,hn,wn,vn,jn,bn,yn,$n,_n,An,Cn;const{isSmall:s}=Wn(),l=D(a=>a.user),i=_(a=>a.advActives),x=_(a=>a.updateAdvActives),p=_(a=>a.advTemplate),c=_(a=>a.updateSelectedAdventure),[r,f]=T.useState(!1),[t,u]=T.useState(-1),[d,b]=T.useState(100),[h,m]=T.useState({}),[A,k]=T.useState("crew.worlds"),[j,M]=T.useState([void 0,void 0,void 0]),{data:y,isLoading:V}=Xn(A);function B(a){u(a)}function W(a){if(!a){const g=j.map((C,$)=>{if($!==t)return C});nn(g),u(-1),M(g);return}if(j.some(g=>(g==null?void 0:g.asset_id)===(a==null?void 0:a.asset_id))){u(-1);return}const w=j.map((g,C)=>C===t?a:g);nn(w),u(-1),M(w)}function nn(a){if(!e)return;let w={};a.forEach(C=>{const $=p==null?void 0:p.find(S=>(S==null?void 0:S.templateid)===Number(C==null?void 0:C.template.template_id));if(!$)return;const qn=e.mods.reduce((S,v,G)=>{if(v!=null&&v.lock)return S;if(v.affix_value!==99999&&v.affix_value===($==null?void 0:$[v.affix_type])){const L=1+(v==null?void 0:v.mod_value)/100;return S[G]=L,S}if(v.affix_type==="element"&&(v.affix_string.toLocaleLowerCase()===($==null?void 0:$.element.toLocaleLowerCase())||v.affix_string.toLocaleLowerCase()===($==null?void 0:$.weaponclass.toLocaleLowerCase()))){const L=1+(v==null?void 0:v.mod_value)/100;return S[G]=L,S}if(v.affix_string!=="-"&&v.affix_string.toLocaleLowerCase()===String($==null?void 0:$[v.affix_type]).toLocaleLowerCase()){const L=1+(v==null?void 0:v.mod_value)/100;return S[G]=L,S}return S},{});w={...w,...qn}});const g=Object.values(w).reduce((C,$)=>C*$,100);m(w),b(g)}async function Hn(){if(!(!l||!e))try{f(!0);const a=j.filter(g=>!!(g!=null&&g.asset_id)).map(g=>Number(g==null?void 0:g.asset_id));await Nn({user:l,adventureid:e.adventureid,assets_ids:a})&&(await J(2e3),await O(),x({...i,available:[...i.claimable,e.adventureid]}),c(void 0),Z.success("Adventure started successfully"))}catch(a){console.log(a)}finally{f(!1)}}function en(a,w,g){return a==="tlm.mp"||a==="nft.mp"?(w/10).toFixed(1):g==="-"?w:g}return n.jsxs(me,{children:[n.jsxs(Ee,{children:[n.jsxs(Fe,{children:[n.jsxs("p",{children:["Total Rewards: ",e==null?void 0:e.reward_qp," ",n.jsx(q,{})]}),n.jsxs("p",{children:["Point Cost: ",e==null?void 0:e.point_cost.toLocaleString("en-US")," ",n.jsx(as,{})]}),n.jsxs("p",{children:["Duration: ",((e==null?void 0:e.duration_hours)??0)/24," Days"]}),n.jsxs("p",{children:["Current Total Score: ",e==null?void 0:e.score_total]})]}),(e==null?void 0:e.sponsored)===1&&n.jsxs(De,{children:[n.jsx("span",{children:"Sponsor"}),n.jsx("p",{children:e==null?void 0:e.sponsor})]}),n.jsx("img",{src:`${Q}/ipfs/${e==null?void 0:e.image}`,alt:"test"}),n.jsxs(Be,{children:[n.jsxs(ze,{children:["send in period ends in ",(sn=e==null?void 0:e.formatted_enter_end)==null?void 0:sn.days,"d"," ",(tn=e==null?void 0:e.formatted_enter_end)==null?void 0:tn.hours,"h ",(rn=e==null?void 0:e.formatted_enter_end)==null?void 0:rn.minutes,"min"]}),n.jsx(Me,{children:e==null?void 0:e.title})]})]}),n.jsx(Le,{children:s?n.jsx(Ze,{text:e==null?void 0:e.flavor}):e==null?void 0:e.flavor}),n.jsxs(Pe,{children:[n.jsx(Sn,{children:e==null?void 0:e.mods.map((a,w)=>w<5&&n.jsxs(kn,{leftSelected:!!h[w],firstFive:!0,lock:a==null?void 0:a.lock,children:[n.jsx(Tn,{children:a!=null&&a.lock?n.jsx(N,{size:25}):`+${a==null?void 0:a.mod_value}%`}),n.jsx(In,{firstFive:!0,children:a!=null&&a.lock?!s&&n.jsxs("span",{children:["unlocked at level ",a==null?void 0:a.level_to_unlock]}):n.jsxs(n.Fragment,{children:[n.jsx(mn,{children:a==null?void 0:a.affix_type}),n.jsx(En,{children:en(a==null?void 0:a.affix_type,a==null?void 0:a.affix_value,a==null?void 0:a.affix_string)})]})})]},Y()))}),n.jsxs(Re,{children:[t!==-1&&n.jsxs(Ve,{children:[n.jsx(P,{isSelected:A==="crew.worlds",onClick:()=>k("crew.worlds"),children:"Minions"}),n.jsx(P,{isSelected:A==="arms.worlds",onClick:()=>k("arms.worlds"),children:"Weapons"}),n.jsx(P,{isSelected:A==="tool.worlds",onClick:()=>k("tool.worlds"),children:"Tools"}),n.jsx(P,{isSelected:A==="level.worlds",onClick:()=>k("level.worlds"),children:"Levels"}),n.jsx(P,{isSelected:A==="faces.worlds",onClick:()=>k("faces.worlds"),children:"Avatars"})]}),n.jsx(We,{isInventoryOpen:t!==-1,children:t===-1?n.jsxs(n.Fragment,{children:[n.jsx(E,{onClick:()=>B(0),src:j[0]?`https://ipfs.alienworlds.io/ipfs/${(on=(an=j[0])==null?void 0:an.data)==null?void 0:on.img}`:"/assets/default-card.png",alt:(dn=(ln=j[0])==null?void 0:ln.data)==null?void 0:dn.name}),n.jsx(E,{onClick:()=>B(1),src:j[1]?`https://ipfs.alienworlds.io/ipfs/${(pn=(xn=j[1])==null?void 0:xn.data)==null?void 0:pn.img}`:"/assets/default-card.png",alt:(fn=(cn=j[1])==null?void 0:cn.data)==null?void 0:fn.name}),n.jsx(E,{onClick:()=>B(2),src:j[2]?`https://ipfs.alienworlds.io/ipfs/${(gn=(un=j[2])==null?void 0:un.data)==null?void 0:gn.img}`:"/assets/default-card.png",alt:(wn=(hn=j[2])==null?void 0:hn.data)==null?void 0:wn.name})]}):V?new Array(6).fill(0).map((a,w)=>n.jsx(Ue,{},w)):n.jsxs(n.Fragment,{children:[n.jsx(E,{onClick:()=>W(void 0),src:"/assets/default-card.png",alt:"default card"}),(y==null?void 0:y[0])&&n.jsx(E,{onClick:()=>W(y[0]),src:`https://ipfs.alienworlds.io/ipfs/${(jn=(vn=y[0])==null?void 0:vn.data)==null?void 0:jn.img}`,alt:(yn=(bn=y[0])==null?void 0:bn.data)==null?void 0:yn.name}),(y==null?void 0:y[1])&&n.jsx(E,{onClick:()=>W(y[1]),src:`https://ipfs.alienworlds.io/ipfs/${(_n=($n=y[1])==null?void 0:$n.data)==null?void 0:_n.img}`,alt:(Cn=(An=y[1])==null?void 0:An.data)==null?void 0:Cn.name}),y==null?void 0:y.map((a,w)=>{var g,C;return w>1&&n.jsx(E,{onClick:()=>W(a),src:`https://ipfs.alienworlds.io/ipfs/${(g=a==null?void 0:a.data)==null?void 0:g.img}`,alt:(C=a==null?void 0:a.data)==null?void 0:C.name},a==null?void 0:a.asset_id)})]})})]}),n.jsx(Sn,{children:e==null?void 0:e.mods.map((a,w)=>w>=5&&n.jsxs(kn,{rightSelected:!!h[w],firstFive:!1,lock:a==null?void 0:a.lock,children:[n.jsx(Tn,{children:a!=null&&a.lock?n.jsx(N,{size:25}):`+${a==null?void 0:a.mod_value}%`}),n.jsx(In,{firstFive:!1,children:a!=null&&a.lock?!s&&n.jsxs("span",{children:["unlocked at level ",a==null?void 0:a.level_to_unlock]}):n.jsxs(n.Fragment,{children:[n.jsx(mn,{children:a==null?void 0:a.affix_type}),n.jsx(En,{children:en(a==null?void 0:a.affix_type,a==null?void 0:a.affix_value,a==null?void 0:a.affix_string)})]})})]},Y()))})]}),n.jsxs(Ne,{children:[n.jsx("span",{children:"Score"}),n.jsx("span",{children:Math.floor(100*(1+(d-100)/100))})]}),n.jsx(rs,{adventureid:e==null?void 0:e.adventureid,disabled:j.some(a=>a!==void 0),children:n.jsx(F,{isLoading:r,disabled:t!==-1||r||Number((l==null?void 0:l.mcPoints)??0)<((e==null?void 0:e.point_cost)??0),onClick:j.some(a=>a!==void 0)?()=>Hn():void 0,color:t!==-1?"gradientGray":"gradientPink",children:"Start"})}),n.jsx(He,{children:j.some(a=>a!==void 0)?`NFTs can be claimed back after ${((e==null?void 0:e.duration_hours)??0)/24} days`:"To complete objectives, choose NFTs before starting."})]})},ls=R.lazy(()=>Vn(()=>import("./star-3ff3b004.js"),["assets/star-3ff3b004.js","assets/index-b65e0159.js","assets/index-55fec1ff.css"])),is=({data:e})=>{const{isSmall:s}=Wn(),l=_(r=>r.advActives),i=_(r=>r.selectedAdventure),x=_(r=>r.updateSelectedAdventure);function p(r,f,t){return r==="tlm.mp"||r==="nft.mp"?(f/10).toFixed(1):t==="-"?f:t}const c=e==null?void 0:e.filter(r=>{var t;return((t=l==null?void 0:l.available)==null?void 0:t.find(u=>u===(r==null?void 0:r.adventureid)))!==r.adventureid});return n.jsx(de,{children:i?n.jsx(os,{selected:i}):!c||c.length===0?n.jsx(xe,{children:"No adventure available"}):c==null?void 0:c.map(r=>{var f,t,u;return n.jsxs(pe,{children:[n.jsxs(fe,{children:[n.jsxs(ue,{children:[n.jsxs(ce,{children:["expires in ",(f=r==null?void 0:r.formatted_enter_end)==null?void 0:f.days,"d ",(t=r==null?void 0:r.formatted_enter_end)==null?void 0:t.hours,"h ",(u=r==null?void 0:r.formatted_enter_end)==null?void 0:u.minutes,"min"]}),n.jsx(ge,{children:r==null?void 0:r.title}),n.jsxs(he,{children:[n.jsxs("span",{children:["Duration: ",((r==null?void 0:r.duration_hours)??0)/24," Days"]}),n.jsxs("span",{children:["Total Rewards: ",r==null?void 0:r.reward_qp," ",n.jsx(q,{})]}),n.jsxs("span",{children:["MC Point Cost: ",r==null?void 0:r.point_cost.toLocaleString("en-US")," ",n.jsx(ls,{})]})]})]}),n.jsx(F,{onClick:()=>x(r),color:"gradientPink",children:"View"})]}),n.jsxs(we,{children:[n.jsx(be,{children:r==null?void 0:r.mods.map((d,b)=>n.jsxs(ye,{firstFive:b<5,lock:d==null?void 0:d.lock,children:[n.jsx($e,{children:d!=null&&d.lock?n.jsx(N,{size:25}):`+${d==null?void 0:d.mod_value}%`}),n.jsx(_e,{firstFive:b<5,children:d!=null&&d.lock?s?n.jsx(N,{size:25}):n.jsxs("span",{children:["unlocked at level ",d==null?void 0:d.level_to_unlock]}):n.jsxs(n.Fragment,{children:[n.jsx(Ae,{children:d==null?void 0:d.affix_type}),n.jsx(Ce,{children:p(d==null?void 0:d.affix_type,d==null?void 0:d.affix_value,d==null?void 0:d.affix_string)})]})})]},Y()))}),n.jsxs(ve,{children:[(r==null?void 0:r.sponsored)===1&&n.jsxs(je,{children:[n.jsx("span",{children:"Sponsor"}),n.jsx("p",{children:r==null?void 0:r.sponsor})]}),n.jsx("img",{src:`${Q}/ipfs/${r==null?void 0:r.image}`,alt:"test"})]})]}),n.jsx(F,{onClick:()=>x(r),color:"gradientPink",children:"View"})]},r==null?void 0:r.adventureid)})})},ds=R.memo(is);function xs(e){return Gn({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 11 12 14 22 4"}},{tag:"path",attr:{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"}}]})(e)}const ps=o("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",gap:"20px",padding:"0 5px 15px 0",overflowX:"hidden",w:"100%",maxW:"1190px"});o("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",gap:"20px",w:"100%",h:"calc(100vh - 380px)",pr:"5px",overflow:"auto"});const cs=o("div",{d:"flex",align:"center",justify:"center",direction:"column",br:"10px",background:"rgba(3, 16, 32, 0.65)",padding:"30px 18px",color:"$white500",ff:"$heading",fs:"36px",fw:"bold",textAlign:"center",w:"100%",maxW:"1190px",minH:"450px","@sm":{padding:"10px"}}),fs=o("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",br:"10px",background:"rgba(3, 16, 32, 0.65)",padding:"30px 18px",w:"100%",maxW:"1190px",">button":{display:"none"},"@sm":{align:"center",justify:"center",position:"relative",padding:"13px 5px",">button":{display:"flex"}}}),us=o("div",{d:"flex",align:"center",justify:"center",gap:"10px",color:"$white500",ff:"$heading",fs:"16px","@sm":{w:"100%",fs:"10px",gap:"5px",order:2,zIndex:1,">svg":{w:"12px",h:"12px"}}}),gs=o("div",{d:"flex",align:"center",justify:"space-between",w:"100%",">button ":{fs:"18px","> div":{h:"50px"}},"@sm":{zIndex:1,">button ":{d:"none"}}}),hs=o("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column","@sm":{w:"100%"}}),ws=o("h2",{d:"flex",align:"flex-start",justify:"flex-start",color:"$white500",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.9)",fs:"40px",w:"100%","@sm":{order:1,textAlign:"center",fs:"16px"}}),vs=o("div",{d:"flex",align:"center",justify:"center",gap:"10px",span:{d:"flex",align:"center",justify:"center",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.9)",color:"$white500",ff:"$heading",fs:"16px",svg:{ml:"5px"}},"@sm":{direction:"column",gap:"0px",w:"100%",order:3,mt:"125px",span:{justify:"flex-start",w:"100%",textAlign:"right","&:nth-of-type(1)":{order:2}}}}),js=o("div",{d:"flex",align:"center",justify:"space-between",w:"100%",mt:"30px",">img":{br:"10px",width:"382px",height:"249px"},"@md":{">img":{width:"282px",height:"auto"}},"@sm":{mt:"5px",direction:"column",">img":{width:"100%",h:"calc(100% - 70px)",top:0,left:0,position:"absolute"}}}),bs=o("div",{d:"flex",align:"flex-start",justify:"center",pb:"20px",">img":{width:"174px",height:"259px",zIndex:"2","&:nth-of-type(1)":{transform:"translate(60px,20px) rotate(-20deg)",zIndex:"3"},"&:nth-of-type(3)":{transform:"translate(-60px,20px) rotate(20deg)",zIndex:"1"}},"@md":{gap:"20px",">img":{width:"100px",height:"155px","&:nth-of-type(1)":{transform:"translate(30px,10px) rotate(-20deg)",zIndex:"3"},"&:nth-of-type(3)":{transform:"translate(-30px,10px) rotate(20deg)",zIndex:"1"}}},"@sm":{gap:"20px",mt:"-165px",ml:"-90px",">img":{width:"60px",height:"95px","&:nth-of-type(1)":{transform:"translate(30px,10px) rotate(-20deg)",zIndex:"3"},"&:nth-of-type(3)":{transform:"translate(-30px,10px) rotate(20deg)",zIndex:"1"}}}}),ys=o("div",{position:"relative",overflow:"hidden",minWidth:"382px",height:"249px",img:{br:"10px",width:"382px",height:"249px",objectFit:"cover"},"@sm":{position:"absolute",minWidth:"100%",width:"100%",h:"170px",top:0,left:0,img:{width:"100%",h:"170px",position:"absolute"}}}),$s=o("div",{d:"flex",align:"center",justify:"center",direction:"column",zIndex:"1",w:"300px",padding:"0 0 5px",position:"absolute",right:"-90px",top:"40px",transform:"rotate(45deg)",bg:"#65B5FF",color:"$white500",ff:"$heading",span:{fw:"$bold",fs:"20px"},p:{fs:"16px"},"@sm":{transform:"rotate(315deg)",w:"210px",top:"115px",right:"-70px",span:{pt:"5px",fs:"12px"},p:{fs:"8px"}}});async function _s(e,s){const{executeTransaction:l}=zn(),i=As(e,s);return!!await l(i)}function As(e,s){return{actions:[{account:I.ADVENTURE_MC,name:"claimadv",authorization:[{actor:e.name,permission:e.requestPermission}],data:{wallet:e.name,adventureid:s}}]}}const Cs=({data:e})=>{const s=D(t=>t.user),l=D(t=>t.updateMember),i=_(t=>t.advActives),x=_(t=>t.updateAdvActives),[p,c]=T.useState(!1);async function r(t){if(!(!s||typeof t!="number"))try{c(!0),await _s(s,t)&&(await J(4e3),await O(),await Kn(),x({...i,claimable:[...i.claimable,t]}),await l(),Z.success("Adventure claimed successfully"))}catch(u){console.log(u)}finally{c(!1)}}const f=e==null?void 0:e.filter(t=>{var d;return((d=i==null?void 0:i.claimable)==null?void 0:d.find(b=>b===(t==null?void 0:t.adventureid)))!==t.adventureid});return n.jsx(ps,{children:!f||f.length===0?n.jsx(cs,{children:"No adventure available to claim"}):f==null?void 0:f.map(t=>{var u,d,b,h,m,A,k,j,M,y,V,B;return n.jsxs(fs,{children:[n.jsxs(gs,{children:[n.jsxs(hs,{children:[n.jsxs(us,{children:["Mission Completed",n.jsx(xs,{size:20,color:"#40D727"})]}),n.jsx(ws,{children:t==null?void 0:t.title}),n.jsxs(vs,{children:[n.jsxs("span",{children:["Expected QP rewards:"," ",Math.floor(((t==null?void 0:t.score)??0)/((t==null?void 0:t.score_total)??1)*((t==null?void 0:t.reward_qp)??0))," ",n.jsx(q,{})]}),n.jsxs("span",{children:["Players: ",t==null?void 0:t.players]})]})]}),n.jsxs(F,{disabled:p,isLoading:p,onClick:()=>r(t==null?void 0:t.adventureid),color:"gradientPink",children:["Claim NFTs & ",n.jsx("br",{}),"Rewards"]})]}),n.jsxs(js,{children:[n.jsxs(bs,{children:[n.jsx("img",{src:(u=t==null?void 0:t.cards)!=null&&u[0]?`https://ipfs.alienworlds.io/ipfs/${(d=t==null?void 0:t.cards[0])==null?void 0:d.nftimage}`:"/assets/default-card.png",alt:(h=(b=t==null?void 0:t.cards)==null?void 0:b[0])==null?void 0:h.cardname}),n.jsx("img",{src:(m=t==null?void 0:t.cards)!=null&&m[1]?`https://ipfs.alienworlds.io/ipfs/${(A=t==null?void 0:t.cards[1])==null?void 0:A.nftimage}`:"/assets/default-card.png",alt:(j=(k=t==null?void 0:t.cards)==null?void 0:k[1])==null?void 0:j.cardname}),n.jsx("img",{src:(M=t==null?void 0:t.cards)!=null&&M[2]?`https://ipfs.alienworlds.io/ipfs/${(y=t==null?void 0:t.cards[2])==null?void 0:y.nftimage}`:"/assets/default-card.png",alt:(B=(V=t==null?void 0:t.cards)==null?void 0:V[2])==null?void 0:B.cardname})]}),n.jsxs(ys,{children:[(t==null?void 0:t.sponsored)===1&&n.jsxs($s,{children:[n.jsx("span",{children:"Sponsor"}),n.jsx("p",{children:t==null?void 0:t.sponsor})]}),n.jsx("img",{src:`${Q}/ipfs/${t==null?void 0:t.image}`,alt:"test"})]})]}),n.jsxs(F,{disabled:p,isLoading:p,onClick:()=>r(t==null?void 0:t.adventureid),color:"gradientPink",children:["Claim NFTs & ",n.jsx("br",{}),"Rewards"]})]},t==null?void 0:t.adventureid)})})},Ss=R.memo(Cs),ks=o("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",gap:"20px",padding:"0 5px 15px 0",overflowX:"hidden",w:"100%",maxW:"1190px"});o("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",gap:"20px",w:"100%",h:"calc(100vh - 380px)",pr:"5px",overflow:"auto"});const Ts=o("div",{d:"flex",align:"center",justify:"center",direction:"column",br:"10px",background:"rgba(3, 16, 32, 0.65)",padding:"30px 18px",color:"$white500",ff:"$heading",fs:"36px",fw:"bold",textAlign:"center",w:"100%",maxW:"1190px",minH:"450px","@sm":{padding:"10px"}}),Is=o("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",br:"10px",background:"rgba(3, 16, 32, 0.65)",padding:"30px 18px 60px",w:"100%",maxW:"1190px",">button":{display:"none"},"@sm":{align:"center",justify:"center",position:"relative",padding:"13px",">button":{display:"flex"}}}),ms=o("div",{d:"flex",align:"center",justify:"center",gap:"10px",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.9)",color:"$white500",ff:"$heading",fs:"16px","@sm":{w:"100%",fs:"10px",gap:"5px",order:2,zIndex:1,">svg":{w:"12px",h:"12px"}}}),Es=o("div",{d:"flex",align:"center",justify:"space-between",w:"100%",">button ":{fs:"18px","> div":{h:"50px"}},"@sm":{zIndex:1,">button ":{d:"none"}}}),Ds=o("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column","@sm":{w:"100%"}}),Fs=o("h2",{d:"flex",align:"flex-start",justify:"flex-start",color:"$white500",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.9)",fs:"40px",w:"100%","@sm":{order:1,fs:"20px"}}),Bs=o("div",{d:"flex",align:"center",justify:"center",gap:"10px",span:{d:"flex",align:"center",justify:"center",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.9)",color:"$white500",ff:"$heading",fs:"16px",svg:{ml:"5px"}},"@sm":{direction:"column",gap:"0px",w:"100%",order:3,mt:"125px",span:{justify:"flex-start",w:"100%",textAlign:"right","&:nth-of-type(1)":{order:2}}}}),zs=o("div",{d:"flex",align:"center",justify:"space-between",w:"100%",mt:"30px",">img":{br:"10px",width:"382px",height:"249px"},"@sm":{direction:"column",mt:"0px",">img":{width:"100%",h:"calc(100% - 70px)",top:0,left:0,position:"absolute"}}}),Ms=o("div",{d:"flex",align:"flex-start",justify:"center",">img":{width:"174px",height:"259px",zIndex:"2","&:nth-of-type(1)":{transform:"translate(60px,20px) rotate(-20deg)",zIndex:"3"},"&:nth-of-type(3)":{transform:"translate(-60px,20px) rotate(20deg)",zIndex:"1"}},"@md":{gap:"20px",">img":{width:"100px",height:"155px","&:nth-of-type(1)":{transform:"translate(30px,10px) rotate(-20deg)",zIndex:"3"},"&:nth-of-type(3)":{transform:"translate(-30px,10px) rotate(20deg)",zIndex:"1"}}},"@sm":{gap:"20px",mt:"-160px",ml:"-90px",">img":{width:"60px",height:"95px","&:nth-of-type(1)":{transform:"translate(30px,10px) rotate(-20deg)",zIndex:"3"},"&:nth-of-type(3)":{transform:"translate(-30px,10px) rotate(20deg)",zIndex:"1"}}}}),Ls=o("div",{position:"relative",overflow:"hidden",minWidth:"382px",height:"249px",img:{br:"10px",width:"382px",height:"249px",objectFit:"cover"},"@sm":{position:"absolute",minWidth:"100%",width:"100%",h:"170px",top:0,left:0,img:{width:"100%",h:"170px",position:"absolute"}}}),Ps=o("div",{d:"flex",align:"center",justify:"center",direction:"column",zIndex:"1",w:"300px",padding:"0 0 5px",position:"absolute",right:"-90px",top:"40px",transform:"rotate(45deg)",bg:"#65B5FF",color:"$white500",ff:"$heading",span:{fw:"$bold",fs:"20px"},p:{fs:"16px"},"@sm":{transform:"rotate(315deg)",w:"210px",top:"115px",right:"-70px",span:{pt:"5px",fs:"12px"},p:{fs:"8px"}}}),Rs=({data:e})=>n.jsx(ks,{children:!e||e.length===0?n.jsx(Ts,{children:"No adventure running"}):e==null?void 0:e.map(s=>{var l,i,x,p,c,r,f,t,u,d,b,h,m,A,k;return n.jsxs(Is,{children:[n.jsx(Es,{children:n.jsxs(Ds,{children:[n.jsxs(ms,{children:["Returning in ",(l=s==null?void 0:s.formatted_return)==null?void 0:l.days,"d ",(i=s==null?void 0:s.formatted_return)==null?void 0:i.hours,"h"," ",(x=s==null?void 0:s.formatted_return)==null?void 0:x.minutes,"min"]}),n.jsx(Fs,{children:s==null?void 0:s.title}),n.jsxs(Bs,{children:[n.jsxs("span",{children:["Current QP Estimation:"," ",Math.floor(((s==null?void 0:s.score)??0)/((s==null?void 0:s.score_total)??1)*((s==null?void 0:s.reward_qp)??0))," ",n.jsx(q,{})]}),n.jsxs("span",{children:["Players: ",s==null?void 0:s.players]})]})]})}),n.jsxs(zs,{children:[n.jsxs(Ms,{children:[n.jsx("img",{src:(p=s==null?void 0:s.cards)!=null&&p[0]?`https://ipfs.alienworlds.io/ipfs/${(c=s==null?void 0:s.cards[0])==null?void 0:c.nftimage}`:"/assets/default-card.png",alt:(f=(r=s==null?void 0:s.cards)==null?void 0:r[0])==null?void 0:f.cardname}),n.jsx("img",{src:(t=s==null?void 0:s.cards)!=null&&t[1]?`https://ipfs.alienworlds.io/ipfs/${(u=s==null?void 0:s.cards[1])==null?void 0:u.nftimage}`:"/assets/default-card.png",alt:(b=(d=s==null?void 0:s.cards)==null?void 0:d[1])==null?void 0:b.cardname}),n.jsx("img",{src:(h=s==null?void 0:s.cards)!=null&&h[2]?`https://ipfs.alienworlds.io/ipfs/${(m=s==null?void 0:s.cards[2])==null?void 0:m.nftimage}`:"/assets/default-card.png",alt:(k=(A=s==null?void 0:s.cards)==null?void 0:A[2])==null?void 0:k.cardname})]}),n.jsxs(Ls,{children:[(s==null?void 0:s.sponsored)===1&&n.jsxs(Ps,{children:[n.jsx("span",{children:"Sponsor"}),n.jsx("p",{children:s==null?void 0:s.sponsor})]}),n.jsx("img",{src:`${Q}/ipfs/${s==null?void 0:s.image}`,alt:"test"})]})]})]},s==null?void 0:s.adventureid)})}),Vs=R.memo(Rs),Ws=async()=>{var i,x;let e=!1,s;const l=[];for(;!e;){const p=await Mn.get_table_rows({code:I.ADVENTURE_MC,index_position:1,limit:"10000",scope:I.ADVENTURE_MC,table:H.ADV_TEMPLATES,show_payer:!1,json:!0,lower_bound:s});e=!p.more,l.push(...p.rows.slice(0,-1)),s=((x=(i=p.rows)==null?void 0:i[p.rows.length-1])==null?void 0:x.templateid)??""}return l},Us=()=>Pn({queryKey:[z.ADV_TEMPLATES],queryFn:()=>Ns(),staleTime:1e3*60*60,enabled:!!D.getState().user});async function Ns(){try{const e=await Ws();return e?Hs(e):null}catch(e){return console.log(e),null}}function Hs(e){return e.map(s=>({...s,"nft.mp":s.nft_mp,"tlm.mp":s.tlm_mp}))}const Zs=()=>{const{isLoading:e}=Us(),{data:s,isLoading:l,isFetching:i}=Ke(),x=_(u=>u.selectedAdventure),p=_(u=>u.updateSelectedAdventure),[c,r]=T.useState("available");function f(u){r(u),p(void 0),t()}async function t(){await O()}return n.jsxs(te,{children:[n.jsxs(re,{children:["Adventures"," ",n.jsxs(ae,{href:"https://medium.com/mining-matters/feature-spotlight-adventures-c28fb9fff6e2",target:"_blank",children:[n.jsx(ee,{})," "]})]}),n.jsxs(oe,{children:[x&&n.jsx(Yn,{color:"white",size:40,onClick:()=>p(void 0)}),n.jsx(K,{onClick:()=>f("available"),isActive:c==="available",children:"Available"}),n.jsx(K,{onClick:()=>f("running"),isActive:c==="running",children:"Running"}),n.jsx(K,{onClick:()=>f("claimable"),isActive:c==="claimable",children:"Claimable"})]}),l||i||e?n.jsx(le,{}):n.jsxs(ie,{children:[c==="available"&&n.jsx(ds,{data:s==null?void 0:s.available}),c==="running"&&n.jsx(Vs,{data:s==null?void 0:s.participants}),c==="claimable"&&n.jsx(Ss,{data:s==null?void 0:s.claimable})]})]})};export{Zs as default};
