import{s as f,u as fe,a as Ce,b as k,j as a,f as le,q as ge,Q as ue,e as Ve,R as h,_ as w,r as v,d as Le,c as Ie,B as $e,L as he,g as ke}from"./index-89d4724b.js";import{R as Oe}from"./index.esm-5496ce53.js";import{F as ze}from"./index.esm-23f09170.js";import{o as Y,u as Pe}from"./user-miners-query-307a5653.js";import{r as de,o as we,u as Be}from"./tools-query-5ebe5c94.js";import{o as _e,u as Fe}from"./lands-query-b1d4e44a.js";import{o as Ge,u as Ne}from"./lands-query-b71790ec.js";import{g as be,s as U,u as E}from"./showTlmValueFromMine-487431d7.js";import{o as Qe,u as Ue}from"./get-user-settings-assets-query-953c7329.js";import{u as ye}from"./use-media-4f85126a.js";import{o as qe,a as Ke,b as He,g as Ye,u as Ze,c as Xe}from"./use-transaction-203875d1.js";import{f as We,o as Je,g as et,e as tt,u as nt}from"./execute-mine-tool-contract-f369ac71.js";import{f as at}from"./format-currency-usd-c3f487ff.js";import{f as z}from"./formatNumber-be910684.js";import{d as R,c as Z,a as $}from"./mineCooldown-23412600.js";import{u as it}from"./use-ual-7fc3d974.js";import{c as P,a as B}from"./calculateShardsByLand-b4dc44be.js";import{s as I}from"./sleep-da79c358.js";import{e as ot,a as je}from"./execute-claim-contract-ac888e16.js";import{o as rt}from"./toolov-query-2c4455ea.js";import{u as pe}from"./index-22cf8b6d.js";import{v as ct}from"./v4-4a60fe23.js";import"./iconBase-6aac7060.js";import"./axios-43b00e28.js";import"./lands-f6e0fa91.js";import"./checkIfHasCpuOnAccount-21305020.js";import"./index-8642e6ae.js";import"./index-0afda3d2.js";const st=f("div",{d:"flex",align:"center",justify:"center",direction:"column",my:"auto","@sm":{ml:"auto",my:"auto"}}),lt=f("div",{d:"flex",align:"center",justify:"center",direction:"column",cursor:"pointer",mr:"auto",position:"relative"}),dt=f("img",{w:"100%",h:"60px",mb:"10px",objectFit:"contain","@sm":{w:"80px",h:"80px"}}),pt=f("div",{d:"flex",align:"center",justify:"center",zIndex:3,position:"absolute",bottom:"-10px",left:"0px",w:"30px",h:"30px",br:"10px","-webkit-text-stroke":"1px white",letterSpacing:"1px",color:"#00D1FF",fw:"900",fs:"20px",ff:"$heading",border:"2px solid white",background:"#D9D9D9",backdropFilter:"blur(15px)"}),xt=f("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",w:"100%","@sm":{d:"none"}}),mt=f("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",mb:"10px",minW:"200px",w:"100%"}),ft=f("div",{d:"flex",align:"center",justify:"center",position:"relative",boxShadow:"2px 2px 10px #000000",w:"100%",h:"10px",br:"3px",bg:"#595959"}),gt=f("div",{d:"flex",align:"center",justify:"center",position:"absolute",left:"0px",maxW:"200px",h:"10px",br:"3px",bg:"linear-gradient(90deg, #07A3DD 0%, rgba(0, 186, 255, 0.5) 100%)","&::after":{content:"",position:"absolute",right:"-2px",h:"14px",w:"7px",br:"50%",bg:"$white500",filter:"blur(2px)"}}),ut=f("div",{d:"flex",align:"center",justify:"center",direction:"column",ff:"$heading",fw:"$thin",fs:"12px",color:"$white500","@md":{ml:"auto",fs:"10px"}}),ht=f("div",{d:"flex",align:"center",justify:"space-between",w:"100%","@md":{fs:"12px"}}),wt=f("button",{d:"flex",align:"center",justify:"center",ff:"$body",fs:"14px",fw:"$normal",color:"$red500",cursor:"pointer","&:hover":{textShadow:"1px 1px 2px red"},"@md":{fs:"12px"}}),_t=()=>{const n=fe(),{data:t}=Ce(),i=k(l=>l.user),{unAuthorize:e}=it(),{isSmall:r}=ye(),s=t==null?void 0:t.find(l=>l.level===(i==null?void 0:i.level)),x=((i==null?void 0:i.experience)??0)/((s==null?void 0:s.xp_to_level_up)??100)*100;return a.jsxs(st,{children:[a.jsx(lt,{onClick:()=>n(r?"/user-settings":"/menu"),children:a.jsx(dt,{src:"/assets/icons/logo.webp",alt:"avatar icon"})}),a.jsxs(xt,{children:[a.jsxs(mt,{children:[a.jsx(pt,{children:(i==null?void 0:i.level)??1}),a.jsx(ft,{children:a.jsx(gt,{style:{width:`${x}%`}})})]}),a.jsxs(ht,{children:[!r&&a.jsx(wt,{onClick:e,children:"Logout"}),a.jsxs(ut,{children:[(i==null?void 0:i.experience)??0,"/",(s==null?void 0:s.xp_to_level_up)??100," ",!r&&"XP"]})]})]})]})},xe=async({mTools:n,miners:t,setExpireDate:i,setIsLoading:e,toolsLoaning:r,toolsWallets:s,updateIsCalculating:x,user:l,ual:o,updateAuth:y})=>{if(!l)return null;e(!0),x(!0);try{if(!await ot(l))throw new Error("MINE error from contract");await U(l==null?void 0:l.name)}catch(g){console.log(g)}finally{await I(800),x(!1),await O({miners:t,mTools:n,setExpireDate:i,toolsLoaning:r,toolsWallets:s,user:l}),await y(o),e(!1)}},bt=async({setIsLoading:n,updateIsCalculating:t,user:i,miners:e,nonce:r,updateHashExpire:s,mTools:x,setExpireDate:l,toolsLoaning:o,toolsWallets:y})=>{var g;n(!0);try{await _e(),t(!0),await I(500);const[[_,c]]=ge.getQueriesData(ue.LANDS),p=(g=c.highestValue)==null?void 0:g.asset_id;if(!i||!p)return null;if(!(r!=null&&r.rand_str)){await be();const j=new Date;s(j.setMinutes(j.getMinutes()+1))}const d=(e==null?void 0:e.current_land)===p?void 0:p;await je(i,d)&&(await U(i==null?void 0:i.name),await O({miners:e,mTools:x,setExpireDate:l,toolsLoaning:o,toolsWallets:y,user:i}))}catch(_){console.log(_)}finally{t(!1),n(!1)}},N=({delay:n,tools:t,miners:i,setExpireDate:e})=>{var l,o,y,g,_,c,p,d,u;const r=(n??0)/10;if(((l=t==null?void 0:t.userTools)==null?void 0:l.length)===1){const j=r*(((y=(o=t==null?void 0:t.userTools)==null?void 0:o[0])==null?void 0:y.delay)??0);return R(j,t,i,e)}const s=(g=t==null?void 0:t.userTools)==null?void 0:g.sort((j,b)=>b.delay-j.delay);if(((_=t==null?void 0:t.userTools)==null?void 0:_.length)===2){const j=r*((((c=s==null?void 0:s[0])==null?void 0:c.delay)??0)+(((p=s==null?void 0:s[1])==null?void 0:p.delay)??0)/2);return R(j,t,i,e)}const x=r*((((d=s==null?void 0:s[0])==null?void 0:d.delay)??0)+(((u=s==null?void 0:s[1])==null?void 0:u.delay)??0));return R(x,t,i,e)},Q=({landsType:n,favorites:t,user:i,tools:e,miners:r,setExpireDate:s})=>{var g,_;if(!n||!(t!=null&&t.favoriteLands))return null;let x=[];const l=t==null?void 0:t.favoriteLands.filter(([c])=>Z($(N({delay:c.delay,miners:r,setExpireDate:s,tools:e})))==="MINE");if(l.length>0)x=l;else{const c=Math.min(...t.favoriteLands.map(([d])=>$(N({delay:d.delay,miners:r,setExpireDate:s,tools:e})).difference));x=t.favoriteLands.filter(([d])=>$(N({delay:d.delay,miners:r,setExpireDate:s,tools:e})).difference===c)}if((i==null?void 0:i.miningType)==="orange"){const c=Math.max(...x.map(([d])=>P({land:d})));return{...(g=x.filter(([d])=>P({land:d})===c).flatMap(([d])=>d).sort((d,u)=>B({landCardId:u.cardid,landsType:n,userTools:e==null?void 0:e.userTools})-B({landCardId:d.cardid,landsType:n,userTools:e==null?void 0:e.userTools})))==null?void 0:g[0]}}const o=Math.max(...x.map(([c])=>B({landCardId:c.cardid,landsType:n,userTools:e==null?void 0:e.userTools})));return{...(_=x.filter(([c])=>B({landCardId:c.cardid,landsType:n,userTools:e==null?void 0:e.userTools})===o).sort(([c],[p])=>P({land:p})-P({land:c})).flatMap(([c])=>c))==null?void 0:_[0]}},yt=async({setIsLoading:n,user:t,updateIsCalculating:i,miners:e,mTools:r,toolsLoaning:s,toolsWallets:x,setExpireDate:l,favorites:o,landsType:y,tools:g})=>{n(!0);try{i(!0),await I(500);const _=Q({favorites:o,landsType:y,tools:g,user:t,miners:e,setExpireDate:l});if(!t)return null;await je(t,_==null?void 0:_.assetId)&&(await U(t==null?void 0:t.name),await O({miners:e,mTools:r,toolsLoaning:s,toolsWallets:x,setExpireDate:l,user:t}))}catch(_){console.log(_)}finally{i(!1),n(!1)}},X=async()=>{await qe(),await Y(),await Ke(),await He(),await rt(),await Je()},W=({toolsLoaning:n,user:t,mTools:i,toolsWallets:e,miners:r,setExpireDate:s})=>{if(!n||!i)return null;const x=n==null?void 0:n.toolsOv.filter(c=>{var d;const p=c.owned>0&&(c.tool_name==="Certified Kol Digger"?!0:c.allowed===1)&&We((t==null?void 0:t.total_points)??0,c);return((e==null?void 0:e.tempid_allow_list.length)??0)===0?p:p&&((d=e==null?void 0:e.tempid_allow_list)==null?void 0:d.some(u=>u===c.template_id))}).map(c=>{if(c.tool_name==="Certified Kol Digger"){const d=i==null?void 0:i.reduce((u,j)=>{const b=Number(new Date(u.readyat));return Number(new Date(j.readyat))<b?j:u},i[0]);return{...d,last_use:+new Date(`${d.readyat}.000Z`)/1e3-d.cooldown_seconds}}const p=n.stakedTools.find(d=>d.template_id===c.template_id);return{...c,...p,last_use:+new Date(`${c.readyat}.000Z`)/1e3-c.cooldown_seconds}}),l=x==null?void 0:x.filter(c=>{const p=(c.tool_name==="Certified Kol Digger"?500:c.cooldown_seconds)*1.6;return Z($(R(p,{userTools:[c],allData:[]},r)))==="MINE"});let o=null;l.length>0?o=l.sort((c,p)=>de[c.rarity]-de[p.rarity]||p.mining_power-c.mining_power)[0]:o=x==null?void 0:x.reduce((c,p)=>{const d=(c.tool_name==="Certified Kol Digger"?500:c.cooldown_seconds)*1.6,j=+R(d,{userTools:[c],allData:[]},r),b=(p.tool_name==="Certified Kol Digger"?500:p.cooldown_seconds)*1.6,D=+R(b,{userTools:[p],allData:[]},r);return D<j?{...p,cooldownSec:D}:{...c,cooldownSec:j}},x[0]);const y=(o.tool_name==="Certified Kol Digger"?500:o.cooldown_seconds)*1.5,_=R(y,{userTools:[o],allData:[]},r);return s(_),o},jt=async({setIsLoading:n,user:t,updateIsCalculating:i,mTools:e,tools:r,updateMineButtonLoading:s,miners:x,toolsLoaning:l,setExpireDate:o,toolsWallets:y})=>{var g,_;n(!0);try{const c=W({miners:x,toolsLoaning:l,mTools:e,setExpireDate:o,toolsWallets:y,user:t});if(!c||!t||!e)return;await _e(),i(!0),await I(500);let p=0,d,u=[];if(c.tool_name==="Certified Kol Digger"){const b=e==null?void 0:e.reduce((S,D)=>{const q=Number(new Date(S.readyat));return Number(new Date(D.readyat))<q?D:S},e[0]);p=b.asset_ids.length*c.pow,u=b.asset_ids.map(S=>Number(S)),d="1099512958237"}else{const[b]=await Ye(`${c.template_id}`);p=b.pow,u=[b.next_asset_id];let S;try{[[,S]]=ge.getQueriesData([ue.LANDS,"red",c])}catch{S=await et(c)}d=(g=S.highestValue)==null?void 0:g.asset_id}await tt({user:t,difficulty:p,assets_ids:u,land_asset_id:d,old_bag_assets_ids:((_=r==null?void 0:r.userTools)==null?void 0:_.map(b=>Number(b.asset_id)))??[]})&&(await U(t==null?void 0:t.name),await X())}catch(c){console.log(c)}finally{s(!1),i(!1),n(!1)}},O=async({user:n,mTools:t,toolsLoaning:i,toolsWallets:e,miners:r,setExpireDate:s})=>{if(await Y(),await we(),(n==null?void 0:n.miningType)==="red"){await X(),await I(500),W({miners:r,toolsLoaning:i,mTools:t,setExpireDate:s,toolsWallets:e,user:n});return}},H=({toolCooldown:n,updateMineCooldown:t})=>{const i=Z(n);return t(i),i},Tt=async()=>{await we(),await Ge(),await Y(),await Qe()},vt=async({isSmall:n})=>{const t=new Audio("https://play.alienworlds.io/sounds/aw-mining-claim-sfx-02.mp3");n&&await I(1e3),t.play()},St=({isDisableToMine:n,nonce:t,toolCooldown:i,updateMineCooldown:e})=>n?a.jsx("span",{style:{fontSize:"15px"},children:"Membership"}):t!=null&&t.rand_str&&H({toolCooldown:i,updateMineCooldown:e})==="MINE"?"Submit":H({toolCooldown:i,updateMineCooldown:e}),Dt=({isDisableToMine:n,user:t,toolsWallets:i})=>{var e;return n?"Not a Member":(t==null?void 0:t.miningType)==="green"?"Favorites (shards)":(t==null?void 0:t.miningType)==="orange"?"Favorites (TLM)":(t==null?void 0:t.miningType)==="gold"?"Mining":(t==null?void 0:t.miningType)==="blue"?"Mine Maximizer":(t==null?void 0:t.miningType)==="red"?`Deposit: ${le(i==null?void 0:i.deposit).toFixed(4)} TLM`:`Deposit: ${(le((e=t==null?void 0:t.HqMember)==null?void 0:e.deposit)+((t==null?void 0:t.tlm_deposit)??0)/1e4).toFixed(4)} TLM`},Mt=({isDisableToMine:n,user:t,miners:i,bestLand:e})=>n?"Become a member to use mine":(t==null?void 0:t.miningType)==="red"?"Tool Loaning":(t==null?void 0:t.miningType)==="gold"||(t==null?void 0:t.miningType)==="blue"?`${i!=null&&i.name?i==null?void 0:i.name:""}`:`${e!=null&&e.name?e==null?void 0:e.name:""}`,Et=async({isDisableToMine:n,user:t,navigate:i,isCalculating:e,nonce:r,updateIsCalculating:s,updateHashExpire:x,mTools:l,miners:o,setExpireDate:y,setIsLoading:g,tools:_,toolsLoaning:c,toolsWallets:p,updateMineButtonLoading:d,favorites:u,landsType:j,ual:b,updateAuth:S})=>{if(console.log(`buttonOnClick: ${n}`),n)return i("/membership");if((t==null?void 0:t.miningType)==="red")return await X(),jt({miners:o,mTools:l,setExpireDate:y,setIsLoading:g,tools:_,toolsLoaning:c,toolsWallets:p,updateIsCalculating:s,updateMineButtonLoading:d,user:t}),null;if(!(r!=null&&r.rand_str)&&!e){s(!0),((t==null?void 0:t.miningType)==="green"||(t==null?void 0:t.miningType)==="orange")&&await Tt(),await be();const D=new Date;return x(D.setMinutes(D.getMinutes()+1)),null}return(t==null?void 0:t.miningType)==="blue"?(bt({miners:o,mTools:l,nonce:r,setExpireDate:y,setIsLoading:g,toolsLoaning:c,toolsWallets:p,updateIsCalculating:s,user:t,updateHashExpire:x}),null):(t==null?void 0:t.miningType)==="gold"?(xe({miners:o,mTools:l,setExpireDate:y,setIsLoading:g,toolsLoaning:c,toolsWallets:p,ual:b,updateAuth:S,updateIsCalculating:s,user:t}),null):(t==null?void 0:t.miningType)==="green"||(t==null?void 0:t.miningType)==="orange"?(yt({miners:o,mTools:l,setExpireDate:y,setIsLoading:g,toolsLoaning:c,toolsWallets:p,updateIsCalculating:s,user:t,favorites:u,landsType:j,tools:_}),null):xe({miners:o,mTools:l,setExpireDate:y,setIsLoading:g,toolsLoaning:c,toolsWallets:p,ual:b,updateAuth:S,updateIsCalculating:s,user:t})},At=({isCalculating:n,isLoading:t,minersLoading:i,toolLoading:e,toolCooldown:r,toolCooldownEqual0:s,isLoadingLand:x,isMineButtonLoading:l,userMiningTypeRed:o})=>n||t||i||e||!r||s||x||l||o,Rt=({user:n,setBestLand:t,favorites:i,landsType:e,tools:r,setExpireDate:s,miners:x})=>(n==null?void 0:n.miningType)==="gold"?"gradientYellow":(n==null?void 0:n.miningType)==="orange"?(t(Q({favorites:i,landsType:e,tools:r,user:n,setExpireDate:s,miners:x})),"gradientOrange"):(n==null?void 0:n.miningType)==="green"?(t(Q({favorites:i,landsType:e,tools:r,user:n,setExpireDate:s,miners:x})),"gradientGreen"):(n==null?void 0:n.miningType)==="blue"?"gradientBlue":(n==null?void 0:n.miningType)==="red"?"gradientRed":"gradientYellow",Ct=f("div",{d:"flex",align:"center",justify:"space-between",w:"100%",position:"relative",zIndex:20,bg:"$blue700"}),Vt=f("div",{d:"flex",align:"center",justify:"space-between",zIndex:20,w:"100%",px:"30px",h:"140px","@media(max-width:1224px)":{minW:"100%"},"@md":{px:"15px"},"@sm":{}}),Lt=f("div",{d:"flex",align:"center",justify:"center",gap:"20px",">a":{d:"flex",align:"center",justify:"center",svg:{h:"28px",w:"28px"}},svg:{color:"$white500",h:"22px",w:"22px"},zIndex:30,button:{"&:disabled":{opacity:.5}},"@sm":{order:-1,justify:"space-between",w:"max-content",button:{d:"none","&:last-of-type":{d:"flex",zIndex:2,svg:{h:"35px",w:"35px"}}}},"@xxsm":{">a":{top:"10px",position:"absolute"}}}),It=Ve({"100%":{transform:"rotate(360deg)"}}),$t=f("button",{color:"$white500",svg:{ml:"10px",color:"$white500",w:"25px",h:"25px"},variants:{isLoading:{true:{pointerEvents:"none",opacity:"0.5",svg:{animation:`${It} 1s linear`,animationIterationCount:"infinite"}},false:{pointerEvents:"all",opacity:"1"}}}}),kt=f("div",{d:"flex",align:"center",justify:"center",direction:"column",gap:"3px",w:"100%",">button":{h:"30px",minW:"150px",fs:"20px"},span:{textTransform:"uppercase",color:"$white500",fs:"10px",fw:"$bold",ff:"$heading"},"@sm":{w:"max-content",position:"absolute",left:"50%",transform:"translateX(-50%)"}}),Ot=f("div",{d:"flex",align:"center",justify:"center",direction:"column",gap:"10px",width:"310px","@md":{width:"max-content",margin:"0",gap:"7px"},"@sm":{d:"none"}});f("button",{d:"flex",align:"center",justify:"center",ml:"10px"});const zt=f("div",{d:"flex",align:"flex-end",justify:"center",gap:"20px",mt:"20px"}),F=f("div",{d:"flex",align:"center",justify:"space-between",direction:"column",color:"$white500",w:"max-content",fs:"14px",svg:{w:"25px",h:"25px"}}),G=f("div",{d:"flex",align:"center",justify:"center",direction:"column",padding:"5px",w:"35px",h:"35px",border:"1px solid $white500",borderRadius:"$full"}),Pt=f("div",{d:"flex",align:"center",justify:"center",">button>div":{d:"flex",align:"center",justify:"center"},"@sm":{gap:"10px",">button>div":{direction:"column"}}}),Bt=f("div",{d:"flex",align:"center",justify:"center",gap:"5px",ml:"10px",fs:"20px",ff:"$body",color:"$white500",path:{fill:"$white500"}}),Ft=f("p",{ff:"$heading",fs:"20px",fw:"$bold",textShadow:"1px 1px 2px black",color:"$yellow500"}),me=h.lazy(()=>w(()=>import("./tlm-fb2f329b.js"),["assets/tlm-fb2f329b.js","assets/index-89d4724b.js","assets/index-55fec1ff.css"])),Gt=h.lazy(()=>w(()=>import("./star-bc84bcf0.js"),["assets/star-bc84bcf0.js","assets/index-89d4724b.js","assets/index-55fec1ff.css"])),Nt=h.lazy(()=>w(()=>import("./atom-e6236cc2.js"),["assets/atom-e6236cc2.js","assets/index-89d4724b.js","assets/index-55fec1ff.css"])),Qt=h.lazy(()=>w(()=>import("./quest-32573a87.js"),["assets/quest-32573a87.js","assets/index-89d4724b.js","assets/index-55fec1ff.css"])),Ut=h.lazy(()=>w(()=>import("./open-menu-7447ed9a.js"),["assets/open-menu-7447ed9a.js","assets/index-89d4724b.js","assets/index-55fec1ff.css"])),qt=()=>{var ce,se;const n=v.useContext(Le.UALContext),{isSmall:t}=ye(),i=fe(),e=k(m=>m.user),{data:r,isLoading:s,isFetching:x}=Pe(),{data:l,isLoading:o,isFetching:y}=Be(),{data:g}=Ne(),{data:_,isLoading:c}=Fe(),{data:p}=Ue(),{data:d}=Ze(),{data:u,isLoading:j}=Xe(),{data:b}=nt(),S=k(m=>m.updateAuth),D=E(m=>m.nonce),q=E(m=>m.updateIsCalculating),J=E(m=>m.isMineButtonLoading),Te=E(m=>m.updateMineButtonLoading),ee=E(m=>m.isCalculating),te=E(m=>m.updateNonce),ne=E(m=>m.hashExpire),ve=E(m=>m.updateHashExpire),ae=E(m=>m.updateMineCooldown),K=Ie(m=>m.currentWeek),[ie,A]=v.useState(new Date),[Se,De]=v.useState(!1),[M,Me]=v.useState(void 0),[C,oe]=v.useState(null),V=!(e!=null&&e.isMember)||(e==null?void 0:e.flagged);v.useEffect(()=>{let m=(r==null?void 0:r.delay)??0;if((e==null?void 0:e.miningType)==="blue"&&(m=15),((e==null?void 0:e.miningType)==="green"||(e==null?void 0:e.miningType)==="orange")&&C&&(m=C==null?void 0:C.delay),(e==null?void 0:e.miningType)==="red"){W({miners:r,mTools:b,setExpireDate:A,toolsLoaning:u,toolsWallets:d,user:e});return}N({delay:m,miners:r,setExpireDate:A,tools:l})},[e==null?void 0:e.miningType,r,C,b,l,u,d,e]),v.useEffect(()=>{const m=setInterval(()=>{const T=$(ie);Me(T),(e==null?void 0:e.miningType)==="orange"&&oe(Q({favorites:p,landsType:g,setExpireDate:A,tools:l,user:e,miners:r})),(T==null?void 0:T.hours)===0&&(T==null?void 0:T.minutes)===0&&(T==null?void 0:T.seconds)===1&&vt({isSmall:t}),(T==null?void 0:T.hours)===0&&(T==null?void 0:T.minutes)===0&&(T==null?void 0:T.seconds)===0&&clearInterval(m)},1e3);return()=>clearInterval(m)},[ie,e==null?void 0:e.miningType,t,p,g,r,l,e]),v.useEffect(()=>{const m=setInterval(()=>{ne-new Date().getTime()<0&&te(void 0)},3e3);return()=>clearInterval(m)},[ne,te]),v.useEffect(()=>{setInterval(async()=>{await O({miners:r,mTools:b,setExpireDate:A,toolsLoaning:u,toolsWallets:d,user:e})},6e4)},[r,b,A,u,d,e]);const Ee=v.useMemo(()=>Rt({favorites:p,landsType:g,miners:r,setBestLand:oe,setExpireDate:A,tools:l,user:e}),[e==null?void 0:e.miningType]),re=At({isCalculating:ee,isLoading:Se,isLoadingLand:c,isMineButtonLoading:J,minersLoading:s,toolCooldown:!!M,toolCooldownEqual0:((M==null?void 0:M.seconds)??0)<0&&((M==null?void 0:M.minutes)??0)<0&&((M==null?void 0:M.hours)??0)<0,toolLoading:o,userMiningTypeRed:(e==null?void 0:e.miningType)==="red"?j:!1}),Ae=V?!1:re,Re=V?!1:re||H({toolCooldown:M,updateMineCooldown:ae})!=="MINE";return a.jsx(Ct,{children:a.jsxs(Vt,{children:[a.jsx(_t,{}),a.jsxs(Lt,{children:[a.jsx($t,{disabled:!(e!=null&&e.member),onClick:()=>O({miners:r,mTools:b,setExpireDate:A,toolsLoaning:u,toolsWallets:d,user:e}),isLoading:x||y,children:a.jsx(ze,{})}),a.jsxs(kt,{children:[a.jsx("span",{children:Dt({isDisableToMine:V,toolsWallets:d,user:e})}),a.jsx($e,{onClick:()=>Et({favorites:p,isCalculating:ee,isDisableToMine:V,landsType:g,miners:r,mTools:b,navigate:i,nonce:D,setExpireDate:A,setIsLoading:De,tools:l,toolsLoaning:u,toolsWallets:d,ual:n,updateAuth:S,updateIsCalculating:q,updateMineButtonLoading:Te,updateHashExpire:ve,user:e}),disabled:Re,color:Ee,isLoading:Ae,children:St({isDisableToMine:V,nonce:D,toolCooldown:M,updateMineCooldown:ae})}),a.jsx("span",{children:Mt({bestLand:C,isDisableToMine:V,miners:r,user:e})})]}),a.jsx("button",{onClick:()=>i("/user-settings"),children:a.jsx(Oe,{})}),a.jsx("button",{onClick:()=>i("/menu"),children:a.jsx(Ut,{})})]}),a.jsxs(Ot,{children:[a.jsxs(zt,{children:[a.jsxs(F,{children:[a.jsx(G,{children:a.jsx(Qt,{})}),z(((ce=e==null?void 0:e.userWeekly)==null?void 0:ce.total_quest_points)??0,1)]}),a.jsxs(F,{children:[a.jsx(G,{children:a.jsx(Gt,{})}),z((e==null?void 0:e.mcPoints)??0,1)]}),a.jsxs(F,{children:[a.jsx(G,{children:a.jsx(Nt,{color:"#F6A800"})}),z(((e==null?void 0:e.redeemable_points)??0)/10,1)]}),a.jsxs(F,{children:[a.jsx(G,{children:a.jsx(me,{})}),z(Number((se=e==null?void 0:e.userTlm)==null?void 0:se.balance)??0,1)]})]}),a.jsx(Pt,{children:a.jsx("button",{onClick:()=>i("/week-reward"),children:a.jsxs("div",{children:[a.jsx(Ft,{children:"Prize Pool"}),a.jsxs(Bt,{children:[at((K==null?void 0:K.initial_prize_pool_formatted)??0),a.jsx(me,{})]})]})})})]})]})})},Kt=f("div",{d:"flex",align:"center",justify:"flex-start",direction:"column",w:"100%",minH:"100vh",bgSize:"cover !important",backgroundPosition:"top",bgRepeat:"no-repeat",bg:"$blue700",variants:{pathBG:{menu:{bg:"$blue700"},"about-us":{bgImage:"url(/assets/background/bg-login.jpeg)"},questing:{bgImage:"url(/assets/background/bg-quest.jpeg)"},"week-reward":{bgImage:"url(/assets/background/bg-week-rewards.jpeg)"},"mine-max":{bgImage:"url(/assets/background/mine-bg.jpeg)"},crowdfunding:{bgImage:"url(/assets/background/bg-crowdfunding.jpeg)",backgroundPosition:"center"},adventures:{bgImage:"url(/assets/background/bg-adventures.jpeg)"},news:{bgImage:"url(/assets/background/bg-news.jpeg)"}}}}),Ht=f("div",{d:"flex",align:"center",justify:"flex-start",direction:"column",position:"relative",pb:"35px",minH:"calc(100vh - 290px)",w:"100%",variants:{pathBG:{referendums:{bg:"$blue700"},builder:{bgImage:"url(/assets/background/bg-content-mcp-builder.jpeg)",backgroundPosition:"center",bgRepeat:"no-repeat",bgSize:"cover"},"daily-rewards":{pb:"0px",bgImage:"url(/assets/background/bg-content-daily-rewards.webp)",backgroundPosition:"top 110px center",backgroundRepeat:"no-repeat",backgroundSize:"cover","@md":{backgroundPosition:"top 100px center"},"@sm":{backgroundPosition:"top  center"}},"about-us":{mt:"10px"},questing:{mt:"10px"},"user-settings":{mt:"10px"},"tool-tactician":{mt:"10px"},"week-reward":{mt:"10px"},"mine-max":{mt:"10px"},voting:{mt:"10px"},crowdfunding:{mt:"10px"},adventures:{mt:"10px"},news:{mt:"10px"},applications:{mt:"10px"},information:{mt:"10px"}}}}),Yt=f("nav",{d:"flex",align:"center",justify:"center",direction:"column",w:"100%",pb:"10px",mb:"20px",bg:"$blue700"}),Zt=f("nav",{d:"flex",align:"center",justify:"flex-start",maxW:"95%",w:"100%",py:"10px","@sm":{overflow:"auto"}}),Xt=f(he,{d:"flex",align:"center",justify:"center",padding:"10px 20px",fs:"20px",ff:"$heading",color:"$white500",textTransform:"uppercase",variants:{active:{true:{textDecoration:"underline",textDecorationColor:"$blue100",textDecorationThickness:"2px",textUnderlineOffset:"7px"}}}}),Wt=f("nav",{d:"flex",align:"center",justify:"flex-start",gap:"20px",padding:"10px 20px",bg:"rgba(255, 255, 255, 0.05)",br:"10px",maxW:"95%",w:"100%","@md":{flexWrap:"wrap"},"@sm":{d:"grid",gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"repeat(3, 1fr)",align:"center",justify:"center",gap:"5px",bg:"$blue700"},"@xxsm":{gridTemplateColumns:"repeat(3, 100px)"}}),Jt=f(he,{d:"flex",align:"center",justify:"center",w:"130px",variants:{isDisabled:{true:{filter:"grayscale(1)",opacity:"0.5",pointerEvents:"none",cursor:"not-allowed"}}},"@sm":{d:"flex",align:"center",justify:"center",bg:"rgba(255, 255, 255, 0.05)",w:"100%",h:"100%"}}),en=f("button",{d:"flex",align:"center",justify:"flex-end",direction:"column",fs:"20px",ff:"$heading",color:"$white500",svg:{w:"50px",h:"35px"},span:{mt:"10px",fs:"12px",textTransform:"uppercase",ff:"$heading"},"@sm":{padding:"10px",svg:{w:"25px",h:"25px"}},"@xsm":{span:{mt:"5px",fs:"10px"}}}),tn=h.lazy(()=>w(()=>import("./gift-185bcdaa.js"),["assets/gift-185bcdaa.js","assets/index-89d4724b.js","assets/index-55fec1ff.css"])),nn=h.lazy(()=>w(()=>import("./pickaxe-685840d7.js"),["assets/pickaxe-685840d7.js","assets/index-89d4724b.js","assets/index-55fec1ff.css"])),an=h.lazy(()=>w(()=>import("./laserGun-1ccce2d9.js"),["assets/laserGun-1ccce2d9.js","assets/index-89d4724b.js","assets/index-55fec1ff.css"])),on=h.lazy(()=>w(()=>import("./discord-560c80eb.js"),["assets/discord-560c80eb.js","assets/index-89d4724b.js","assets/index-55fec1ff.css"])),rn=h.lazy(()=>w(()=>import("./rocket-cf7aeece.js"),["assets/rocket-cf7aeece.js","assets/index-89d4724b.js","assets/index-55fec1ff.css"])),cn=h.lazy(()=>w(()=>import("./exclamation2-30871fdc.js"),["assets/exclamation2-30871fdc.js","assets/index-89d4724b.js","assets/index-55fec1ff.css"])),sn=h.lazy(()=>w(()=>import("./trophy-275db710.js"),["assets/trophy-275db710.js","assets/index-89d4724b.js","assets/index-55fec1ff.css"])),ln=h.lazy(()=>w(()=>import("./voting-6c1a01f3.js"),["assets/voting-6c1a01f3.js","assets/index-89d4724b.js","assets/index-55fec1ff.css"])),dn=h.lazy(()=>w(()=>import("./calculation-45b3cbdd.js"),["assets/calculation-45b3cbdd.js","assets/index-89d4724b.js","assets/index-55fec1ff.css"])),pn=h.lazy(()=>w(()=>import("./bulldozer-cb126244.js"),["assets/bulldozer-cb126244.js","assets/index-89d4724b.js","assets/index-55fec1ff.css"])),xn=h.lazy(()=>w(()=>import("./news-b4b110fe.js"),["assets/news-b4b110fe.js","assets/index-89d4724b.js","assets/index-55fec1ff.css"])),mn=h.lazy(()=>w(()=>import("./tutorial-6d40e7ad.js"),["assets/tutorial-6d40e7ad.js","assets/index-89d4724b.js","assets/index-55fec1ff.css"])),fn=h.lazy(()=>w(()=>import("./membership-0c331e0e.js"),["assets/membership-0c331e0e.js","assets/index-89d4724b.js","assets/index-55fec1ff.css"])),gn=h.lazy(()=>w(()=>import("./crowdfunding-d3db12c9.js"),["assets/crowdfunding-d3db12c9.js","assets/index-89d4724b.js","assets/index-55fec1ff.css"])),un=h.lazy(()=>w(()=>import("./trilium-vault-b5f4ae29.js"),["assets/trilium-vault-b5f4ae29.js","assets/index-89d4724b.js","assets/index-55fec1ff.css"])),hn=h.lazy(()=>w(()=>import("./applications-7bf8ff84.js"),["assets/applications-7bf8ff84.js","assets/index-89d4724b.js","assets/index-55fec1ff.css"])),wn=h.lazy(()=>w(()=>import("./mcp-builder-ad3fa19d.js"),["assets/mcp-builder-ad3fa19d.js","assets/index-89d4724b.js","assets/index-55fec1ff.css"])),_n=h.lazy(()=>w(()=>import("./sponsor-ac34dd35.js"),["assets/sponsor-ac34dd35.js","assets/index-89d4724b.js","assets/index-55fec1ff.css"])),bn=h.lazy(()=>w(()=>import("./aw-mining-2b5b8c8e.js"),["assets/aw-mining-2b5b8c8e.js","assets/index-89d4724b.js","assets/index-55fec1ff.css"])),L="#BBBBBB",yn=()=>{var l;const n=k(o=>o.user),t=pe(o=>o.currentMenu),i=pe(o=>o.updateCurrentMenu),e=v.useMemo(()=>{var o;return{play:[{path:"builder",title:"Builder",isDisabled:!(n!=null&&n.member),icon:a.jsx(wn,{})},{path:"adventures",title:"Adventures",isDisabled:!(n!=null&&n.member),icon:a.jsx(rn,{color1:n!=null&&n.member?"#00A3FF":L,color2:n!=null&&n.member?"#E75300":L})},{path:"questing",title:"Weekly Quests",isDisabled:!(n!=null&&n.member),icon:a.jsx(cn,{color:n!=null&&n.member?"#ff4f6b ":L})},{path:"week-reward",title:"Rewards",isDisabled:!(n!=null&&n.member),icon:a.jsx(sn,{color1:n!=null&&n.member?"#AC12AF":L,color2:n!=null&&n.member?"#AC12AF":L})},{path:"daily-rewards",title:"DAILY CLAIM",isDisabled:!(n!=null&&n.isMember),icon:a.jsx(v.Suspense,{children:a.jsx(tn,{})})},{path:"mine-max",title:"Mine Maximizer",icon:a.jsx(pn,{color1:"#00ADD3",color2:"#00ADD3"})},{path:"aw-mining",title:"Mining",icon:a.jsx(bn,{})},{path:"tool-loaning",title:"TOOL LOANING",isDisabled:!(n!=null&&n.isMember),icon:a.jsx(nn,{version:1})},{path:"emporium",title:"Zapp's",icon:a.jsx(an,{})},((o=n==null?void 0:n.playerSupport)==null?void 0:o.wallet)&&{path:"applications",title:"Applications",icon:a.jsx(hn,{})}],tools:[{path:"voting",title:"Voting",isDisabled:!(n!=null&&n.member),icon:a.jsx(ln,{color:n!=null&&n.member?"#46C553":L})},{path:"crowdfunding",title:"Crowdfunding",icon:a.jsx(gn,{color:"#26d7ff"})},{path:"trilium-vault",title:"Trilium Vault",icon:a.jsx(un,{color:"#AC12AF"})},{path:"tool-tactician",title:"Tool Tactician",icon:a.jsx(dn,{color:"#FFC700"})}],more:[{path:"membership",title:"Membership",icon:a.jsx(fn,{color:"#57CE4C"})},{path:"information",title:"Tutorials",icon:a.jsx(mn,{color:"#EB7509"})},{path:"news",title:"News",icon:a.jsx(xn,{color:"#D32C54"})},{path:"sponsor-adventures",title:"Sponsor",icon:a.jsx(_n,{})},{path:"https://discord.gg/EmpMt7NDsV",isExternal:!0,title:"Discord",icon:a.jsx(on,{color:"#9563FF"})}]}},[n==null?void 0:n.member,(l=n==null?void 0:n.playerSupport)==null?void 0:l.wallet]),r=v.useMemo(()=>{switch(t){case"play":return e.play;case"tools":return e.tools;case"more":return e.more;default:e.play}},[t,e]),s=v.useMemo(()=>location.hash.replace("#/",""),[]);function x(o){i(o)}return a.jsx(Yt,{children:s==="menu"&&a.jsxs(a.Fragment,{children:[a.jsx(Zt,{children:Object.keys(e).map(o=>a.jsx(Xt,{onClick:()=>x(o),active:s==="menu"&&t===o,to:"menu",children:o},o))}),r&&a.jsx(Wt,{children:r==null?void 0:r.map(o=>a.jsx(Jt,{isDisabled:o==null?void 0:o.isDisabled,to:o==null?void 0:o.path,target:o!=null&&o.isExternal?"_blank":"_self",rel:o!=null&&o.isExternal?"noreferrer":"",children:a.jsxs(en,{children:[o==null?void 0:o.icon,a.jsx("span",{children:o==null?void 0:o.title})]})},ct()))})]})})};function Zn({children:n}){const t=ke(),i=k(r=>r.user),e=v.useMemo(()=>t.pathname.replace("/",""),[t.pathname]);return a.jsxs(Kt,{pathBG:e,children:[a.jsxs(v.Suspense,{children:[i&&a.jsx(qt,{}),e==="menu"&&a.jsx(yn,{})]}),a.jsx(Ht,{pathBG:e,children:n})]})}export{Zn as default};
