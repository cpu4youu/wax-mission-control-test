import{s as o,S as B,R as l,_ as w,u as E,j as t,B as T,f as R}from"./index-27a86a37.js";import{C as F}from"./index-ec3e85e7.js";import{a as I}from"./index.esm-c33391ab.js";import{u as V}from"./use-transaction-1533d77c.js";import{u as z,o as D}from"./wallets-query-8372772e.js";import{s as M}from"./sleep-da79c358.js";import{s as u,r as m}from"./tools-query-b8263576.js";import{u as N}from"./tool-query-4d5b591d.js";import{S as P}from"./index-16410be9.js";import"./iconBase-853790c7.js";import"./toast-options-c01c4e1b.js";import"./adapters-4dbbe042.js";import"./axios-45629df5.js";import"./index.esm-b0993fcd.js";import"./index-599f5c76.js";import"./index-4687380c.js";import"./index-dc22a750.js";const H=o("div",{d:"flex",align:"flex-start",justify:"center",direction:"column",mt:"35px",w:"100%",button:{w:"100%",h:"45px",fs:"16px",maxW:"230px",minW:"130px",minH:"unset",">div":{border:"none"}}}),W=o("h2",{d:"flex",align:"center",justify:"center",mb:"15px",fs:"20px",color:"$white500"}),G=o("div",{d:"flex",align:"center",gap:"15px",w:"100%",mb:"15px"}),Q=o("div",{d:"grid",gridTemplateColumns:"repeat(2, minmax(160px, 1fr))",gap:"15px",mt:"15px",w:"100%","@sm":{gridTemplateColumns:"repeat(1, minmax(160px, 1fr))",justify:"center"}}),$=o("div",{d:"flex",align:"center",justify:"center",gap:"25px",px:"5px","@sm":{mt:"5px",align:"flex-start",w:"100%",gap:"15px"},"@xsm":{gap:"5px",direction:"column",button:{mb:"3px",w:"100%",maxW:"100%",minW:"unset",minH:"unset"}}}),U=o("div",{d:"flex",align:"center",justify:"flex-start",position:"relative",input:{opacity:0,zIndex:1,w:"25px",h:"25px","& ~ div svg":{d:"none"}},"input:checked ~ div":{bg:"#333333",svg:{d:"flex"}},"@sm":{ml:"auto",img:{w:"55px"}}}),q=o("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"absolute",top:"0px",left:"0px",w:"25px",h:"25px",bg:"#fff",border:"3px solid #5A5A5A",borderRadius:"6px",svg:{w:"15px",h:"15px",path:{fill:"white"}}}),J=o("div",{d:"flex",align:"center",justify:"flex-end",gap:"5px","@sm":{gap:"15px"}}),_=o("div",{d:"flex",align:"center",justify:"center",gap:"5px",textShadow:"2px 1px 4px rgba(0, 0, 0)",svg:{filter:"drop-shadow(3px 5px 2px rgb(0 0 0 / 0.6))",w:"20px",h:"20px"}}),v=o("p",{d:"flex",align:"center",justify:"center",w:"max-content",color:"$white500",textShadow:"2px 1px 4px rgba(0, 0, 0)",fs:"12px",ff:"$heading",fw:"400"});async function K(n,r){const{executeTransaction:p}=V(),f=X(n,r);return!!await p(f)}function X(n,r){return{actions:[{account:B.TOOLS_MC,name:"settemplist",authorization:[{actor:n.name,permission:n.authorization.permission}],data:{wallet:n.name,temp_ids:r}}]}}const Y=l.lazy(()=>w(()=>import("./pickaxe-8d9979ac.js"),["assets/pickaxe-8d9979ac.js","assets/index-27a86a37.js","assets/index-55fec1ff.css"])),Z=l.lazy(()=>w(()=>import("./atom-8c918397.js"),["assets/atom-8c918397.js","assets/index-27a86a37.js","assets/index-55fec1ff.css"])),ee=l.lazy(()=>w(()=>import("./check-69b23f33.js"),["assets/check-69b23f33.js","assets/index-27a86a37.js","assets/index-55fec1ff.css"])),k=[{label:"Sort by rarity",value:"rarity"},{label:"Sort by name",value:"name"},{label:"Sort by shine",value:"shine"}],_e=()=>{var y,C,S;const{data:n}=N(),{data:r}=z(),p=E(e=>e.user),f=l.useCallback(()=>{var e,s;return(((e=r==null?void 0:r.tempid_allow_list)==null?void 0:e.length)||0)>0?(r==null?void 0:r.tempid_allow_list)??[]:((s=n==null?void 0:n.toolsOv)==null?void 0:s.filter(i=>{var a;return i.allowed===1&&!((a=r==null?void 0:r.tempid_allow_list)!=null&&a.some(g=>g===i.template_id))}).map(i=>i.template_id))??[]},[r,n]),[c,d]=l.useState(f()),[x,j]=l.useState(!1),[h,b]=l.useState({label:"Sort by rarity",value:"rarity"});async function O(){if(p){j(!0);try{await K(p,c)&&(await M(2e3),D(),R.success("Config saved"))}catch(e){console.error("Error staking tool",e)}finally{j(!1)}}}function L(e,s){var a;const i=(a=e.target)==null?void 0:a.checked;d(i?[...c,s.template_id]:c.filter(g=>g!==s.template_id))}function A(){var e,s;if(((e=n==null?void 0:n.toolsOv)==null?void 0:e.length)===c.length)d([]);else{const i=((s=n==null?void 0:n.toolsOv)==null?void 0:s.map(a=>a.template_id))??[];d(i)}}return t.jsxs(H,{children:[t.jsx(W,{children:"ENABLE OR DISABLE TOOLS FOR USE WITH THE MINE BUTTON"}),t.jsxs(G,{children:[t.jsx(T,{isLoading:x,disabled:x,onClick:O,rounded:!1,color:"solidBlue",children:"Save Config"}),t.jsx(T,{isLoading:x,disabled:x,onClick:A,rounded:!1,color:"solidBlue",children:"Check All"})]}),t.jsx(P,{title:"",selected:h,onSelected:e=>b(e||k[0]),options:k,borderColor1:"#FFB31F",borderColor2:"#FFB31F"}),t.jsx(Q,{children:(S=(C=(y=n==null?void 0:n.toolsOv)==null?void 0:y.filter(e=>e.allowed===1))==null?void 0:C.sort((e,s)=>h.value==="name"?e==null?void 0:e.tool_name.localeCompare(s==null?void 0:s.tool_name):h.value==="shine"?u[e.shine]-u[s.shine]||m[e.rarity]-m[s.rarity]:m[e.rarity]-m[s.rarity]||(e==null?void 0:e.tool_name.localeCompare(s==null?void 0:s.tool_name))||u[e.shine]-u[s.shine]))==null?void 0:S.map((e,s)=>t.jsx(F,{showShine:!0,showNumberBracket:!0,direction:"row",tool:e,children:t.jsxs($,{children:[t.jsxs(J,{children:[t.jsxs(_,{children:[t.jsx(Y,{}),t.jsx(v,{children:e.mining_power/10})]}),t.jsxs(_,{children:[t.jsx(Z,{}),t.jsx(v,{children:e.nft_power/10})]}),t.jsxs(_,{children:[t.jsx(I,{color:"white"}),t.jsxs(v,{children:[e.cooldown_seconds," sec"]})]})]}),t.jsxs(U,{children:[t.jsx("input",{type:"checkbox",checked:c.some(i=>i===e.template_id),onChange:i=>L(i,e),required:!0}),t.jsx(q,{children:t.jsx(ee,{})})]})]})},s))})]})};export{_e as default};
