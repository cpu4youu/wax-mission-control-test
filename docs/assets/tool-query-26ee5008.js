import{g as i,S as s,T as c,d as m,Q as l,u,q as _}from"./index-2466537e.js";import{a as f}from"./adapters-0a89b599.js";const y=async t=>await i({options:{code:s.TOOLS_MC,index_position:3,key_type:"i64",limit:"10000",scope:s.TOOLS_MC,table:c.tools,reverse:!0,lower_bound:t,upper_bound:t}}),O=async t=>await i({options:{code:s.TOOLS_MC,index_position:1,limit:"10000",scope:s.TOOLS_MC,table:c.toolov,upper_bound:t,lower_bound:t}}),v=()=>m({queryKey:[l.toolsMc],queryFn:()=>S(),staleTime:1e3*60*20,enabled:!!u.getState().user});async function w(){return await _.invalidateQueries([l.toolsMc])}async function S(){try{const t=u.getState().user;if(!t)return;const e=await y(t.name),a=await O();if(!e)return{stakedTools:[],toolsOv:a||[]};const{getTemplates:d}=f,p=await d({template_id:e.map(({template_id:o})=>o).join(","),page:1,limit:100,order:"desc"});return{stakedTools:e==null?void 0:e.map(o=>{const r=p.find(n=>n.template_id===String(o.template_id)),T=a==null?void 0:a.find(n=>n.template_id===o.template_id);return r?{...r.immutable_data,...T,...o}:o}),toolsOv:a||[]}}catch(t){console.log(t);return}}export{O as g,w as o,v as u};
