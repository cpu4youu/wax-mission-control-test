import{s as a,h as D,j as t,S as L,u as v,aN as R,b as h,R as u,t as l,B as w,k as b,aO as m,l as g}from"./index-a67d3e3b.js";import{a as k}from"./index.esm-e925b34d.js";const N=a("div",{d:"flex",align:"flex-start",justify:"center",direction:"column",mt:"35px",w:"100%"}),S=a("h2",{d:"flex",align:"center",justify:"center",fs:"20px",mb:"15px",color:"$white500"}),T=a("p",{d:"flex",align:"center",justify:"flex-start",gap:"5px",mb:"5px",w:"100%",color:"$white500",ff:"$heading",fs:"20px","@sm":{flexWrap:"wrap"}}),j=a("span",{ff:"$heading",fw:"$bold",fs:"20px",variants:{color:{red:{color:"#E52251"},green:{color:"#00FF00"}}},"@sm":{fs:"16px"}}),A=a("div",{d:"flex",align:"center",justify:"flex-start",flexWrap:"wrap",gap:"25px",mt:"15px",w:"100%","@sm":{justify:"center"}}),y=a("div",{d:"flex",align:"flex-end",justify:"center",gap:"10px",w:"100%",">div":{w:"100%",label:{w:"100%",justifyContent:"left",mb:"5px"}},button:{align:"flex-end",w:"160px",minW:"unset",maxW:"90%",padding:"0",">div":{minH:"40px",border:"none"}}}),W=a("div",{d:"flex",align:"center",justify:"center",direction:"column",w:"250px","&:has(input:disabled)":{label:{color:"$white800"}},"@md":{fs:"15px",maxW:"150px"}}),B=a("div",{d:"flex",align:"center",justify:"center",w:"100%",h:"100%",bg:"linear-gradient(0deg, rgba(255,255,255, 0.2), rgba(255,255,255, 0.2)), rgb(0, 0, 0, 0.3)",padding:"7px 15px",br:"10px",border:"1px solid",borderColor:"$white500","&:hover":{borderColor:"#FFA800",svg:{color:"#FFA800"}},"&:not(:has(input:placeholder-shown))":{borderColor:"#FFA800",svg:{color:"$blue100"}},"&:has(input[type=search])":{padding:"0px 10px"},"&:has(input:disabled)":{cursor:"not-allowed",borderColor:"$white800",svg:{color:"$white800"}},svg:{ml:"2px",color:"$white500"}}),E=a("label",{d:"flex",align:"center",justify:"center",w:"100%",fs:"22px",ff:"$heading",fw:"$bold",textShadow:" 0px 4px 4px rgba(0, 0, 0, 0.5)",outline:"none",color:"$white500",border:"none"}),O=a("input",{d:"flex",align:"center",justify:"center",h:"100%",w:"100%",bg:"transparent",border:"none",fs:"16px",ff:"$body",fw:"$normal",outline:"none",color:"$white500","&[type=number]::-webkit-inner-spin-button":{appearance:"none",background:"transparent url(/assets/icons/arrows.png) no-repeat center center ",position:"absolute",top:"0px",right:"0px",bottom:"0px",width:"10%",opacity:1},"&::placeholder":{color:"$white800"},"@sm":{"&[type=number]::-webkit-inner-spin-button":{width:"15px",h:"0px"}}}),$=D.forwardRef((e,n)=>{const{label:o,wrapperClassName:s,...r}=e;return t.jsxs(W,{className:s,children:[t.jsx(E,{htmlFor:"input",children:o}),t.jsxs(B,{children:[t.jsx(O,{...r,ref:n,id:(r==null?void 0:r.id)??"input",placeholder:(r==null?void 0:r.placeholder)??" "}),(r==null?void 0:r.type)==="search"&&t.jsx(k,{size:30})]})]})});async function I(e,n){const{executeTransaction:o}=v(),s=q(e,n);return!!await o(s)}function q(e,n){return{actions:[{account:L.ALIEN_WORLDS,name:"transfer",authorization:[{actor:e.name,permission:e.requestPermission}],data:{from:e.name,memo:"deposit",to:"tools.mc",quantity:`${n.toFixed(4)} TLM`}}]}}async function z(e,n){const{executeTransaction:o}=v(),s=_(e,n);return!!await o(s)}function _(e,n){return{actions:[{account:L.TOOLS_MC,name:"claim",authorization:[{actor:e.name,permission:e.requestPermission}],data:{wallet:e.name,tokens:`${n.toFixed(4)} TLM`}}]}}const Q=()=>{var f,x;const{data:e}=R(),n=h(i=>i.user),o=h(i=>i.updateTLM),s=u.useRef(null),r=u.useRef(null),[d,p]=u.useState(!1);async function C(){var i;if(n){p(!0);try{await I(n,Number((i=s.current)==null?void 0:i.value))&&(await b(2e3),await m(),await o(),g.success("Deposit successful"))}catch(c){console.error("Error staking tool",c)}finally{p(!1)}}}async function M(){var i;if(n){p(!0);try{await z(n,Number((i=s.current)==null?void 0:i.value))&&(await b(2e3),await m(),await o(),g.success("Withdraw successful"))}catch(c){console.error("Error staking tool",c)}finally{p(!1)}}}function F(){r.current.value=l(e==null?void 0:e.deposit).toFixed(4)}return t.jsxs(N,{children:[t.jsx(S,{children:"Deposited TLM"}),t.jsxs(T,{children:["Deposited TLM:"," ",t.jsxs(j,{style:{cursor:"pointer"},onClick:F,color:l(e==null?void 0:e.deposit)>=0?"green":"red",children:[l(e==null?void 0:e.deposit)>=0?l(e==null?void 0:e.deposit).toFixed(4):`- ${l(e==null?void 0:e.trialtlm).toFixed(4)}`," ","TLM"," "]})]}),t.jsxs(T,{children:["Available TLM:"," ",t.jsx(j,{color:(Number((f=n==null?void 0:n.userTlm)==null?void 0:f.balance)??0)>=0?"green":"red",children:`${(x=n==null?void 0:n.userTlm)==null?void 0:x.balance} TLM`})]}),t.jsxs(A,{children:[t.jsxs(y,{children:[t.jsx($,{ref:s,label:"Deposit TLM"}),t.jsx(w,{isLoading:d,disabled:d,onClick:C,rounded:!1,color:"solidBlue",children:"Deposit"})]}),t.jsxs(y,{children:[t.jsx($,{ref:r,label:"Withdraw TLM"}),t.jsx(w,{isLoading:d,disabled:d,onClick:M,rounded:!1,color:"solidBlue",children:"Withdraw"})]})]})]})};export{Q as default};
